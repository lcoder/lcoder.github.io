<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>create-react-appä½¿ç”¨ç¬”è®° | lcoderçš„åšå®¢</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="lcoder,å‰ç«¯,è®¾è®¡,å‰ç«¯å¼€å‘,ç”¨æˆ·ä½“éªŒ,è®¾è®¡,css3,design,nodejs,JavaScript,html5" />
  

  <meta name="description" content="create-react-appä½¿ç”¨ç¬”è®°å®˜æ–¹è„šæ‰‹æ¶åŠŸèƒ½å¼ºå¤§ï¼Œå„ä¸ªéœ€æ±‚ç‚¹ä¹Ÿæ˜¯è€ƒè™‘åˆ°äº†ï¼Œæ˜¯å¼€å‘reactåº”ç”¨çš„ç¥å™¨ã€‚
###å¦‚ä½•ä½¿ç”¨
â€‹    create-react-appä¾èµ–ä¸¤ä¸ªåŒ…,ä¸€ä¸ªæ˜¯create-react-appå…¨å±€å‘½ä»¤å·¥å…·åŒ…ï¼Œç”¨æ¥åˆ›å»ºæ–°çš„é¡¹ç›®ï¼Œå°±æ˜¯create-react-app myProjectå‘½ä»¤ï¼›ç¬¬äºŒä¸ªæ˜¯react-scriptsåœ¨ç”Ÿæˆçš„é¡¹ç›®ä¸­ä¾èµ–çš„åŒ…ã€‚ä¸€èˆ¬ä¸ç”¨å‡çº§create">
<meta property="og:type" content="article">
<meta property="og:title" content="create-react-appä½¿ç”¨ç¬”è®°">
<meta property="og:url" content="http://www.maotingfeng.me/2017/11/10/create-react-appä½¿ç”¨ç¬”è®°/index.html">
<meta property="og:site_name" content="lcoderçš„åšå®¢">
<meta property="og:description" content="create-react-appä½¿ç”¨ç¬”è®°å®˜æ–¹è„šæ‰‹æ¶åŠŸèƒ½å¼ºå¤§ï¼Œå„ä¸ªéœ€æ±‚ç‚¹ä¹Ÿæ˜¯è€ƒè™‘åˆ°äº†ï¼Œæ˜¯å¼€å‘reactåº”ç”¨çš„ç¥å™¨ã€‚
###å¦‚ä½•ä½¿ç”¨
â€‹    create-react-appä¾èµ–ä¸¤ä¸ªåŒ…,ä¸€ä¸ªæ˜¯create-react-appå…¨å±€å‘½ä»¤å·¥å…·åŒ…ï¼Œç”¨æ¥åˆ›å»ºæ–°çš„é¡¹ç›®ï¼Œå°±æ˜¯create-react-app myProjectå‘½ä»¤ï¼›ç¬¬äºŒä¸ªæ˜¯react-scriptsåœ¨ç”Ÿæˆçš„é¡¹ç›®ä¸­ä¾èµ–çš„åŒ…ã€‚ä¸€èˆ¬ä¸ç”¨å‡çº§create">
<meta property="og:image" content="http://oco9w3mgp.bkt.clouddn.com/WechatIMG39.jpeg">
<meta property="og:image" content="http://oco9w3mgp.bkt.clouddn.com/service-workerss-falling-back-to-network.png">
<meta property="og:image" content="http://oco9w3mgp.bkt.clouddn.com/from-serviceWorkerwhats-new-in-create-react-app-03.png">
<meta property="og:updated_time" content="2017-11-10T06:31:45.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="create-react-appä½¿ç”¨ç¬”è®°">
<meta name="twitter:description" content="create-react-appä½¿ç”¨ç¬”è®°å®˜æ–¹è„šæ‰‹æ¶åŠŸèƒ½å¼ºå¤§ï¼Œå„ä¸ªéœ€æ±‚ç‚¹ä¹Ÿæ˜¯è€ƒè™‘åˆ°äº†ï¼Œæ˜¯å¼€å‘reactåº”ç”¨çš„ç¥å™¨ã€‚
###å¦‚ä½•ä½¿ç”¨
â€‹    create-react-appä¾èµ–ä¸¤ä¸ªåŒ…,ä¸€ä¸ªæ˜¯create-react-appå…¨å±€å‘½ä»¤å·¥å…·åŒ…ï¼Œç”¨æ¥åˆ›å»ºæ–°çš„é¡¹ç›®ï¼Œå°±æ˜¯create-react-app myProjectå‘½ä»¤ï¼›ç¬¬äºŒä¸ªæ˜¯react-scriptsåœ¨ç”Ÿæˆçš„é¡¹ç›®ä¸­ä¾èµ–çš„åŒ…ã€‚ä¸€èˆ¬ä¸ç”¨å‡çº§create">
<meta name="twitter:image" content="http://oco9w3mgp.bkt.clouddn.com/WechatIMG39.jpeg">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=028c63b1" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  

</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">ç›’å­</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">ç›’å­</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            target="_self"
            >
            åšå®¢
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            target="_self"
            >
            åˆ†ç±»
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            target="_self"
            >
            æ ‡ç­¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            target="_self"
            >
            å‹é“¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            target="_self"
            >
            å…³äº
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/RSS/atom.xml"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            target="_self"
            >
            æœç´¢
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#create-react-appä½¿ç”¨ç¬”è®°"><span class="toc-text">create-react-appä½¿ç”¨ç¬”è®°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯è¿è¡Œçš„è„šæœ¬"><span class="toc-text">å¯è¿è¡Œçš„è„šæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç "><span class="toc-text">è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åœ¨Visual-Studio-Codeä¸­Debugger"><span class="toc-text">åœ¨Visual Studio Codeä¸­Debugger</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è‡ªå®šä¹‰ç¯å¢ƒå˜é‡"><span class="toc-text">è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨"><span class="toc-text">èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚"><span class="toc-text">å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯åŠ¨HTTPS"><span class="toc-text">å¯åŠ¨HTTPS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶"><span class="toc-text">åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨"><span class="toc-text">é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®¢æˆ·ç«¯è·¯ç”±"><span class="toc-text">å®¢æˆ·ç«¯è·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„"><span class="toc-text">æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-create-react-appä½¿ç”¨ç¬”è®°" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">create-react-appä½¿ç”¨ç¬”è®°</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2017.11.10</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>maotingfeng</span>
        </span>
      

      


      

    </div>
  </header>

  <div class="article-content">
    
      <h2 id="create-react-appä½¿ç”¨ç¬”è®°"><a href="#create-react-appä½¿ç”¨ç¬”è®°" class="headerlink" title="create-react-appä½¿ç”¨ç¬”è®°"></a>create-react-appä½¿ç”¨ç¬”è®°</h2><p>å®˜æ–¹è„šæ‰‹æ¶åŠŸèƒ½å¼ºå¤§ï¼Œå„ä¸ªéœ€æ±‚ç‚¹ä¹Ÿæ˜¯è€ƒè™‘åˆ°äº†ï¼Œæ˜¯å¼€å‘reactåº”ç”¨çš„ç¥å™¨ã€‚</p>
<p>###å¦‚ä½•ä½¿ç”¨</p>
<p>â€‹    <code>create-react-app</code>ä¾èµ–ä¸¤ä¸ªåŒ…,ä¸€ä¸ªæ˜¯<code>create-react-app</code>å…¨å±€å‘½ä»¤å·¥å…·åŒ…ï¼Œç”¨æ¥åˆ›å»ºæ–°çš„é¡¹ç›®ï¼Œå°±æ˜¯<code>create-react-app myProject</code>å‘½ä»¤ï¼›ç¬¬äºŒä¸ªæ˜¯<code>react-scripts</code>åœ¨ç”Ÿæˆçš„é¡¹ç›®ä¸­ä¾èµ–çš„åŒ…ã€‚ä¸€èˆ¬ä¸ç”¨å‡çº§create-react-appï¼Œå› ä¸ºä¸»è¦çš„reactä¾èµ–éƒ½æ˜¯ç”±react-scriptsæ¥ç”Ÿæˆçš„ï¼Œè€Œç”Ÿæˆçš„<code>react-scripts</code>ä¼šè‡ªåŠ¨ä¸‹è½½æœ€æ–° ç‰ˆï¼Œæ‰€ä»¥ä½ ç”¨çš„reactåŒ…ä¹Ÿæ˜¯æœ€æ–°ç‰ˆæœ¬çš„ã€‚</p>
<p>###create-react-appç”Ÿæˆçš„é¡¹ç›®ç»“æ„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">â”œâ”€â”€ README.md</div><div class="line">â”œâ”€â”€ node_modules</div><div class="line">â”œâ”€â”€ package.json</div><div class="line">â”œâ”€â”€ public</div><div class="line">â”‚Â Â  â”œâ”€â”€ favicon.ico</div><div class="line">â”‚Â Â  â”œâ”€â”€ index.html</div><div class="line">â”‚Â Â  â””â”€â”€ manifest.json</div><div class="line">â”œâ”€â”€ src</div><div class="line">â”‚Â Â  â”œâ”€â”€ App.css</div><div class="line">â”‚Â Â  â”œâ”€â”€ App.js</div><div class="line">â”‚Â Â  â”œâ”€â”€ App.test.js</div><div class="line">â”‚Â Â  â”œâ”€â”€ index.css</div><div class="line">â”‚Â Â  â”œâ”€â”€ index.js</div><div class="line">â”‚Â Â  â”œâ”€â”€ logo.svg</div><div class="line">â”‚Â Â  â””â”€â”€ registerServiceWorker.js</div><div class="line">â””â”€â”€ yarn.lock</div></pre></td></tr></table></figure>
<p>é¡¹ç›®ä¸­å¿…é¡»å­˜åœ¨çš„æ–‡ä»¶ï¼š</p>
<ul>
<li>public/index.html   htmlæ¨¡ç‰ˆæ–‡ä»¶</li>
<li>src/index.js   reactåº”ç”¨çš„å…¥å£æ–‡ä»¶</li>
</ul>
<p>å¯ä»¥åœ¨<code>src</code>ç›®å½•ä¸‹æ–°å»ºNå¤šä¸ªå­é›†ç›®å½•ï¼Œåªæœ‰åœ¨srcä¸‹çš„èµ„æºï¼Œæ‰èƒ½è¢«webpackå¤„ç†ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½å°†jså’Œcssèµ„æºæ”¾å…¥<code>src</code>ç›®å½•ä¸‹ï¼Œå›¾ç‰‡èµ„æºä¹Ÿå¯ä»¥æ”¾<code>src</code>é‡Œé¢,</p>
<p>å®˜æ–¹demoåˆ™å°†svgèµ„æºæ”¾å…¥äº†<code>src</code>ä¸­ã€‚</p>
<h3 id="å¯è¿è¡Œçš„è„šæœ¬"><a href="#å¯è¿è¡Œçš„è„šæœ¬" class="headerlink" title="å¯è¿è¡Œçš„è„šæœ¬"></a>å¯è¿è¡Œçš„è„šæœ¬</h3><ul>
<li><code>npm start</code>è¿è¡Œå¼€å‘è¿è¡Œï¼Œé»˜è®¤ä¼šæ‰“å¼€<code>http://localhost:3000</code>çš„æµè§ˆç•Œï¼Œå¯ä»¥çƒ­æ›´æ–°ä»£ç </li>
<li><code>npm test</code>è¿è¡Œæµ‹è¯•è„šæœ¬</li>
<li><code>npm run build</code>æ‰“åŒ…å‘½ä»¤ï¼Œä¼šå¯ç”¨reactçš„ç”Ÿäº§ç¯å¢ƒæ¨¡å¼ï¼Œå»é™¤ç±»å‹æ£€æŸ¥ç­‰ï¼Œå‹ç¼©ä»£ç </li>
<li><code>npm run eject</code>æš´éœ²å‡ºé»˜è®¤é…ç½®æ–‡ä»¶</li>
</ul>
<p>###æ”¯æŒæœ€æ–°çš„JavaScriptæ–°åŠŸèƒ½å’ŒPolyfills</p>
<p>è¯¥é¡¹ç›®æ”¯æŒæœ€æ–°çš„JavaScriptæ ‡å‡†çš„è¶…é›†ã€‚é™¤äº†es6çš„è¯­æ³•ï¼Œ<code>create-react-app</code>è¿˜æ”¯æŒï¼š</p>
<ul>
<li>æŒ‡æ•°è¿ç®—ç¬¦</li>
<li>Async/awaitè¯­æ³•(ES2017)</li>
<li>å¯¹è±¡çš„è§£æ„èµ‹å€¼</li>
<li>åŠ¨æ€import è¯­æ³•</li>
<li>ç±»é™æ€å±æ€§</li>
<li>JSXè¯­æ³•å’Œflowè¯­æ³•</li>
</ul>
<p>å¦å¤–å®˜æ–¹ä»…ä»…åŒ…å«äº†å¾ˆå°‘ä¸€ä¸ªéƒ¨åˆ†çš„ES6 polyfills:</p>
<ul>
<li>Object.assign() æ”¯æŒ <a href="https://github.com/sindresorhus/object-assign" target="_blank" rel="external">object-assign</a></li>
<li>Promise æ”¯æŒï¼Œ<a href="https://github.com/then/promise" target="_blank" rel="external">promise</a></li>
<li>fetchæ”¯æŒï¼Œ<a href="https://github.com/github/fetch" target="_blank" rel="external">whatwg-fetch</a></li>
</ul>
<p>æ‰€ä»¥å½“ç”¨åˆ°ä¸€äº›éœ€è¦polyfillsçš„åŠŸèƒ½æ—¶ï¼ŒæŸäº›polyfillséœ€è¦æ‰‹åŠ¨æ·»åŠ </p>
<p>###æ”¹å˜htmlçš„title</p>
<p>æ‰¾åˆ°<code>public/index.html</code>ç›´æ¥ä¿®æ”¹titleå³å¯ï¼Œå¦‚æœæ˜¯å•é¡µåº”ç”¨ï¼Œåˆ™åœ¨æ¯ä¸ªcomponentçš„componentDidMountçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼Œè°ƒç”¨document.titleæ¥ä¿®æ”¹ã€‚ä½ ä¹Ÿå¯ä»¥å‚è€ƒ<a href="https://github.com/nfl/react-helmet" target="_blank" rel="external">React Helmet</a></p>
<p>###å¯¼å…¥ç»„ä»¶</p>
<p>æ”¯æŒcommonjsæ¨¡å—è¯­æ³•ï¼Œå½“ç„¶æœ€å¥½ä½¿ç”¨import å’Œ export è¯­æ³•</p>
<p>###ä»£ç åˆ†å‰²</p>
<p>å½“æŸäº›ä»£ç ç‰‡æ®µéœ€è¦å¼‚æ­¥åŠ è½½çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p>
<p><code>chart.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">const initChart = () =&gt; &#123; // do something... &#125;;</div><div class="line"></div><div class="line">export &#123; initChart &#125;;</div></pre></td></tr></table></figure>
<p><code>App.js</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  click = () =&gt; &#123;</div><div class="line">    <span class="keyword">import</span>(<span class="string">'./chart.js'</span>)</div><div class="line">      .then((&#123; initChart &#125;) =&gt; &#123;</div><div class="line">        <span class="comment">// ä½¿ç”¨ initChart() ;</span></div><div class="line">      &#125;)</div><div class="line">      .catch(err =&gt; &#123;</div><div class="line">        <span class="comment">// é”™è¯¯å¤„ç†</span></div><div class="line">      &#125;);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.click&#125;</span>&gt;</span>åŠ è½½å›¾è¡¨<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</div></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>async/await</code>è¯­æ³•æ¥ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼š</p>
<p><code>App.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  click = <span class="keyword">async</span> () =&gt; &#123;</div><div class="line">    <span class="keyword">let</span> &#123; initChart &#125; = <span class="keyword">await</span> <span class="keyword">import</span>( <span class="string">'./chart'</span> ).catch( e=&gt;<span class="built_in">console</span>.warn(e) ) ;</div><div class="line">    initChart() ;</div><div class="line">  &#125; ;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.click&#125;</span>&gt;</span>åŠ è½½å›¾è¡¨<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</div></pre></td></tr></table></figure>
<p>æ¯”ç”¨ä¸Šé¢çš„è¯­æ³•ç®€å•æ¸…æ™°å¾ˆå¤šã€‚</p>
<p>###æ·»åŠ æ ·å¼è¡¨</p>
<p><code>create-react-app</code>å·²ç»å†…ç½®äº†é…ç½®å¥½äº†çš„webpack,å¯ä»¥å°†csså½“ä½œjsèµ„æºä¸€æ ·å¼•å…¥åˆ°jsæ–‡ä»¶ä¸­ã€‚</p>
<p><code>Button.css</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.Button</span> &#123; <span class="attribute">color</span>: red ; &#125;</div></pre></td></tr></table></figure>
<p><code>Button.js</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">'./Button.css'</span>; <span class="comment">// å¼•å…¥cssèµ„æº</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="comment">// ä½¿ç”¨</span></div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"Button"</span> /&gt;</span>;</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œä¿®æ”¹cssæ–‡ä»¶ï¼Œå¯ä»¥çƒ­æ›´æ–°ï¼›ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåˆ™æ‰€æœ‰cssæ–‡ä»¶ä¼šè¢«æ‰“åŒ…è¿›ä¸€ä¸ª.cssæ–‡ä»¶ä¸­ï¼Œé€šè¿‡linkæ ‡ç­¾æ³¨å…¥åˆ°<code>public/index.html</code>ä¸­ã€‚è¿™ç§æ–¹å¼ï¼Œå¢åŠ äº†è¿ç§»åˆ°å…¶ä»–æ‰“åŒ…å·¥å…·çš„æˆæœ¬ï¼Œä¸è¿‡å¯¹äºæ‰“åŒ…å·¥å…·ä»…ä»…æ˜¯webpackæ¥è¯´å¾ˆæ–¹ä¾¿ã€‚</p>
<p>å¦å¤–<code>create-react-app</code>é›†æˆäº†æ’ä»¶<code>Autoprefixer</code>ï¼Œå¯ä»¥è‡ªåŠ¨å¸®ä½ è¡¥å…¨æµè§ˆå™¨å‰ç¼€ã€‚</p>
<p>###æ·»åŠ å›¾åƒã€å­—ä½“ã€æ–‡ä»¶</p>
<p>å¼•å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œæ˜¯å‘Šè¯‰webpackæŠŠï¼Œè¿™ä¸ªæ–‡ä»¶å¼•å…¥åˆ°æ‰“åŒ…çš„bundleä¸­ï¼Œä¸åƒimport cssæ–‡ä»¶ï¼Œå¼•å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œwebpackä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚ï¼Œsrcçš„urlåœ°å€ï¼Œhrefçš„è¶…é“¾æ¥åœ°å€ã€‚</p>
<p>æ¯”å¦‚å›¾ç‰‡çš„è¯ï¼Œå¦‚æœå¤§å°å°é›¨10,000å­—èŠ‚ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªdata URIçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœå¤§äºçš„è¯ï¼Œåˆ™è¿”å›ç›¸å¯¹äº<code>%PUBLIC_URL%</code>çš„urlåœ°å€ã€‚ç›®å‰<code>create-react-app</code>æ”¯æŒbmp,gif,jpg,jpeg,pngã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">'./logo.png'</span>; <span class="comment">// å¼•å…¥logo pngèµ„æº</span></div><div class="line"><span class="built_in">console</span>.log(logo); <span class="comment">// å­—ç¬¦ä¸²"/logo.84287d09.png"</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Header</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// è®¾ç½®srcç­‰äºlogo</span></div><div class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;logo&#125;</span> <span class="attr">alt</span>=<span class="string">"Logo"</span> /&gt;</span>;</span></div><div class="line">&#125;</div><div class="line">export default Header;</div></pre></td></tr></table></figure>
<p>webpackä¼šæ ¹æ®èµ„æºçš„å†…å®¹åŠ¨æ€ç”Ÿæˆhash,å¦‚æœä»¥åå›¾ç‰‡æœ‰å°ä¿®æ”¹ï¼Œå°±ä¸ç”¨åŠ ç‰ˆæœ¬å·äº†ï¼Œæ¸…é™¤ç¼“å­˜å¾ˆæ–¹ä¾¿ã€‚</p>
<p>###æ­£ç¡®ä½¿ç”¨<code>public</code>æ–‡ä»¶å¤¹</p>
<p><code>public/index.html</code>é‡Œé¢çš„å†…å®¹å¯ä»¥éšæ„ä¿®æ”¹ï¼Œæ·»åŠ æˆ–è€…åˆ é™¤scriptæ ‡ç­¾ç­‰ã€‚</p>
<p><code>create-react-app</code>é¼“åŠ±ä½¿ç”¨import è¯­æ³•æ¥å¼•å…¥ æ ·å¼ã€å›¾ç‰‡ã€å­—ä½“æ–‡ä»¶ï¼Œå› ä¸ºæœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p>
<ul>
<li>ä¸€èµ·æ‰“åŒ…å¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚</li>
<li>ç¼–è¯‘è¿‡ç¨‹ä¸­çš„é”™è¯¯ï¼Œå¯ä»¥é¢„é˜²ä¸Šçº¿å‡ºç°çš„404é”™è¯¯</li>
<li>æ ¹æ®å†…å®¹è‡ªåŠ¨ç”Ÿæˆhashï¼Œå¯ä»¥é¢„é˜²æµè§ˆå™¨ç¼“å­˜</li>
</ul>
<p>å¦‚æœå°†é™æ€èµ„æºæ”¾å…¥<code>public</code>æ–‡ä»¶å¤¹ä¸­ï¼Œå®ƒä¸ä¼šè¢«webpackå¤„ç†ï¼Œä»…ä»…æ‰“åŒ…ä¹‹åï¼Œä¼šè¢«æ‹·è´åˆ°<code>build</code>ç›®å½•ä¸­ã€‚ä¸ºäº†å¼•ç”¨åˆ°è¿™ä¸ªèµ„æºï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªå«<code>PUBLIC_URL</code>çš„å˜é‡ã€‚åœ¨<code>index.html</code>ä¸­ï¼Œæœ‰å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"%PUBLIC_URL%/favicon.ico"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>åªæœ‰åœ¨<code>public</code>ä¸­çš„æ–‡ä»¶ï¼Œæ‰å¯ä»¥ç”¨<code>%PUBLIC_URL%</code>è·å–ã€‚å¦‚æœèµ„æºåœ¨srcæˆ–è€…node_modulesé‡Œé¢ï¼Œä½ éœ€è¦æ‹·è´åˆ°<code>public</code>ç›®å½•ä¸­å»ä½¿ç”¨ã€‚</p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨<code>yarn build</code>çš„æ—¶å€™ï¼Œ<code>%PUBLIC_URL%</code>ä¼šè¢«ç»å¯¹è·¯å¾„æ›¿æ¢ï¼Œå°±æ˜¯ç½‘ç«™çš„é™æ€èµ„æºæ ¹ç›®å½•ã€‚</p>
<p>åœ¨JavaScriptä»£ç ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>process.env.PUBLIC_URL</code>æ¥è®¿é—®ï¼Œä¸è¿‡å®˜æ–¹ä¸æ¨èä½¿ç”¨ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">render() &#123;</div><div class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;process.env.PUBLIC_URL</span> + '/<span class="attr">img</span>/<span class="attr">logo.png</span>'&#125; /&gt;</span>;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li><code>public</code>é‡Œçš„æ–‡ä»¶ä¸ä¼šè¢«é¢„å¤„ç†ï¼Œå’Œå‹ç¼©</li>
<li>ä¸¢å¤±æ–‡ä»¶ï¼Œä¼šå¯¼è‡´404</li>
<li>å½“æ–‡ä»¶æ”¹å˜æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨é‡å‘½åï¼Œæˆ–è€…æ‰‹åŠ¨æ·»åŠ ç‰ˆæœ¬å·ï¼Œæ¥å¤„ç†ç¼“å­˜é—®é¢˜ã€‚</li>
</ul>
<p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨<code>public</code>æ–‡ä»¶å¤¹</p>
<ul>
<li>éœ€è¦åœ¨æ„å»ºè¾“å‡ºä¸­å…·æœ‰ç‰¹å®šåç§°çš„æ–‡ä»¶ï¼Œæ¯”å¦‚manifest.webmanifest</li>
<li>æœ‰Nå¤šå›¾ç‰‡ï¼ŒåŠ¨æ€å¼•å…¥çš„å›¾ç‰‡</li>
<li>æŸä¸ªjsæ–‡ä»¶ä¸æƒ³å¼•å…¥åˆ°bundleä¸­</li>
<li>ä¸€äº›ç¬¬ä¸‰æ–¹åº“å’Œwebpackä¸å…¼å®¹</li>
</ul>
<p>###å¦‚ä½•ä½¿ç”¨å…¨å±€å˜é‡</p>
<p>å½“åœ¨jsä»£ç ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹çš„å…¨å±€å˜é‡æ—¶ï¼Œlinterä¼šæç¤ºï¼Œæ²¡æœ‰å®šä¹‰è¿‡çš„å˜é‡ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> $ = <span class="built_in">window</span>.$</div></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$.extend( &#123;&#125; , &#123;a:<span class="number">1</span>&#125; ) ; <span class="comment">// eslint-disable-line</span></div></pre></td></tr></table></figure>
<p>ä¸æ£€æµ‹å½“è¡Œä»£ç </p>
<h3 id="è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç "><a href="#è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç " class="headerlink" title="è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç "></a>è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </h3><p><a href="https://github.com/prettier/prettier" target="_blank" rel="external">prettier</a>æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ï¼ˆopinionatedï¼‰ä»£ç æ ¼å¼åŒ–å·¥å…·ã€‚ç”¨å®ƒï¼Œå¯ä»¥ç¡®ä¿åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œæœ‰ç»Ÿä¸€çš„ä»£ç é£æ ¼ã€‚ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save husky lint-staged prettier</div></pre></td></tr></table></figure>
<p>æˆ–è€…(  é€šè¿‡yarnå®‰è£…æœ‰å‘ï¼Œä¸‹é¢ä¼šè®²è§£ )</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add husky lint-staged prettier</div></pre></td></tr></table></figure>
<ul>
<li><code>husky</code>ç›‘å¬hithooksçš„äº‹ä»¶ï¼Œç„¶åæ‰§è¡Œè‡ªå®šä¹‰çš„å‘½ä»¤</li>
<li><code>lint-staged</code>å…è®¸æˆ‘ä»¬åœ¨gitä¸­å·²ç»æš‚å­˜çš„æ–‡ä»¶é‡Œï¼Œæ‰§è¡Œè„šæœ¬å‘½ä»¤</li>
<li><code>prettier</code>åœ¨commitä¹‹å‰ï¼Œæ ¼å¼åŒ–æˆ‘ä»¬çš„ä»£ç </li>
</ul>
<p>ä¿®æ”¹<code>package.json</code>æ–‡ä»¶ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  "scripts": &#123;</div><div class="line">+   "precommit": "lint-staged",</div><div class="line">    "start": "react-scripts start",</div><div class="line">    "build": "react-scripts build",</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  "dependencies": &#123;</div><div class="line">    // ...</div><div class="line">  &#125;,</div><div class="line">+ "lint-staged": &#123;</div><div class="line">+   "src/**/*.&#123;js,jsx,json,css&#125;": [</div><div class="line">+     "prettier --single-quote --write",</div><div class="line">+     "git add"</div><div class="line">+   ]</div><div class="line">+ &#125;,</div><div class="line">  "scripts": &#123;</div></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬<code>git commit -m &quot;...&quot;</code>æ‰§è¡Œçš„æ—¶å€™ï¼Œ<code>Prettier</code>ä¼šè‡ªåŠ¨æ ¼å¼åŒ–å·²ç»ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œç„¶åæäº¤ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>./node_modules/.bin/prettier --single-quote --write &quot;src/**/*.{js,jsx}&quot;</code>æ¥æ ¼å¼åŒ–æ•´ä¸ªå·¥ç¨‹ã€‚</p>
<p>é€šè¿‡<code>yarn</code>å®‰è£…ä¹‹åï¼Œå¯èƒ½ä¼šé‡åˆ°<code>git commit</code>ä¹‹åæ²¡æœ‰ä»»ä½•ååº”çš„å‘ï¼Œgoogleä¹‹åï¼Œå‘ç°<a href="https://github.com/typicode/husky/issues/81" target="_blank" rel="external">how to setting up?</a></p>
<p>æƒ…å†µä¸€æ ·ï¼ŒåŸæ¥é€šè¿‡<code>yarn</code>å®‰è£…çš„<code>husky</code>ï¼Œé»˜è®¤ä¸ä¼šæ‰§è¡Œhuskyçš„å®‰è£…ç¨‹åºã€‚æ‰€ä»¥è§£å†³æ–¹æ¡ˆå°±æ˜¯æ‰‹åŠ¨æ‰§è¡Œä¸€ä¸‹å®‰è£…ç¨‹åºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node node_modules/husky/bin/install.js</div></pre></td></tr></table></figure>
<p>çœ‹åˆ°done,å°±è¯´æ˜è®¾ç½®gitçš„é’©å­æˆåŠŸäº†</p>
<p><img src="http://oco9w3mgp.bkt.clouddn.com/WechatIMG39.jpeg" alt="æ‰‹åŠ¨æ‰§è¡Œhuskyçš„å®‰è£…ç¨‹åº"></p>
<h3 id="åœ¨Visual-Studio-Codeä¸­Debugger"><a href="#åœ¨Visual-Studio-Codeä¸­Debugger" class="headerlink" title="åœ¨Visual Studio Codeä¸­Debugger"></a>åœ¨Visual Studio Codeä¸­Debugger</h3><p>é¦–å…ˆéœ€è¦å®‰è£…æœ€æ–°çš„<a href="https://code.visualstudio.com/" target="_blank" rel="external">VS Code</a>å’Œ VS Code <a href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome" target="_blank" rel="external">Chrome Debugger Extension</a> ã€‚</p>
<p>ä¹‹ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º<code>.vscode</code>æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ–°å»º<code>launch.json</code>ï¼Œå°†å¦‚ä¸‹ä»£ç æ”¾å…¥å…¶ä¸­ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</div><div class="line">  <span class="attr">"configurations"</span>: [&#123;</div><div class="line">    <span class="attr">"name"</span>: <span class="string">"Chrome"</span>,</div><div class="line">    <span class="attr">"type"</span>: <span class="string">"chrome"</span>,</div><div class="line">    <span class="attr">"request"</span>: <span class="string">"launch"</span>,</div><div class="line">    <span class="attr">"url"</span>: <span class="string">"http://localhost:3000"</span>,</div><div class="line">    <span class="attr">"webRoot"</span>: <span class="string">"$&#123;workspaceRoot&#125;/src"</span>,</div><div class="line">    <span class="attr">"sourceMapPathOverrides"</span>: &#123;</div><div class="line">      <span class="attr">"webpack:///src/*"</span>: <span class="string">"$&#123;webRoot&#125;/*"</span></div><div class="line">    &#125;</div><div class="line">  &#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„âš ï¸ï¼šå¦‚æœè‡ªå®šä¹‰ä¿®æ”¹äº†HOSTæˆ–è€…PORT,åˆ™éœ€è¦ä¿®æ”¹ç›¸åº”çš„åœ°å€</p>
</blockquote>
<p>é…ç½®å¥½äº†ä¹‹åï¼Œå¯åŠ¨<code>yarn start</code>ï¼Œåœ¨<code>VS Code</code>ä¸­æŒ‰<code>F5</code>æˆ–è€…æŒ‰ç»¿è‰²çš„debugæŒ‰é’®è¿›è¡Œdebugã€‚</p>
<h3 id="è‡ªå®šä¹‰ç¯å¢ƒå˜é‡"><a href="#è‡ªå®šä¹‰ç¯å¢ƒå˜é‡" class="headerlink" title="è‡ªå®šä¹‰ç¯å¢ƒå˜é‡"></a>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</h3><p>ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ï¼Œæ ¹æ®æŸäº›æ¡ä»¶ï¼Œå±•ç¤ºä¸åŒçš„æ•°æ®ï¼Œæ¯”å¦‚ï¼ˆæ ¹æ®ç¯å¢ƒï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦mockæ•°æ®ï¼‰ï¼›æˆ–è€…ä½¿ç”¨ä¸€äº›ä¸åœ¨ç‰ˆæœ¬æ§åˆ¶åŠ›çš„æ•æ„Ÿä¿¡æ¯ï¼›å› ä¸ºæ˜¯åœ¨æ„å»ºæœŸé—´è¿è¡Œï¼Œæ‰€ä»¥webpackå¯ä»¥ç›´æ¥è¿›è¡Œä¸€äº›é€»è¾‘çš„åˆ¤æ–­ï¼Œä¸ä¼šå‡ºç°çš„ä»£ç ç›´æ¥ä¼šåˆ é™¤ï¼Œä¸ä¼šè¿›å…¥æ‰“åŒ…æ–‡ä»¶ã€‚</p>
<p>åœ¨é¡¹ç›®å·¥ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ç¯å¢ƒå˜é‡ï¼Œå°±åƒå£°æ˜åœ¨jsæ–‡ä»¶çš„æ™®é€šå˜é‡ä¸€æ ·ã€‚é»˜è®¤çš„ï¼Œå†…ç½®äº†ä¸€ä¸ª<code>NODE_ENV</code>ç¯å¢ƒå˜é‡ï¼Œå…¶ä»–çš„ç¯å¢ƒå˜é‡ï¼Œè§„å®šå¿…é¡»è¦ä»¥<code>REACT_APP_</code>å¼€å¤´ï¼Œä»¥é˜²æ­¢å’Œå…¶ä»–ç¯å¢ƒå˜é‡å†²çªã€‚</p>
<p>ç¯å¢ƒå˜é‡å¯ä»¥åªèƒ½åœ¨æ„å»ºæœŸé—´ä½¿ç”¨ï¼Œä¸èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åŠ¨æ€ä½¿ç”¨ã€‚å¦‚æœéœ€è¦åŠ¨æ€è·å–çš„è¯ï¼Œéœ€è¦æœåŠ¡å™¨ç«¯æ”¯æŒã€‚</p>
<p>ç¯å¢ƒå˜é‡æ˜¯å®šä¹‰åœ¨<code>process.env</code>å¯¹è±¡ä¸Šçš„ï¼Œæ¯”å¦‚ï¼Œå®šä¹‰äº†ä¸€ä¸ª<code>REACT_APP_SECRET_CODE</code>å˜é‡ï¼Œéœ€è¦åœ¨jsæ–‡ä»¶ä¸­ä½¿ç”¨çš„è¯ï¼Œéœ€è¦ç”¨<code>process.env.REACT_APP_SECRET_CODE</code>æ¥è·å–ã€‚</p>
<p>è¦è·å–å½“å‰çš„å¼€å‘ç¯å¢ƒï¼Œä½¿ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">process.env.NODE_ENV</div></pre></td></tr></table></figure>
<ul>
<li><code>npm start</code> å¯åŠ¨çš„è¯ï¼Œè¿™ä¸ªå€¼æ°¸è¿œä¸º<code>development</code> </li>
<li><code>npm test</code>å¯åŠ¨çš„è¯ï¼Œè¿™ä¸ªå€¼æ°¸è¿œä¸º<code>test</code></li>
<li><code>npm run build</code>å¯åŠ¨çš„è¯ï¼Œè¿™ä¸ªå€¼æ°¸è¿œä¸º<code>production</code></li>
</ul>
<p><code>NODE_ENV</code>è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä¸å…è®¸æ‰‹åŠ¨ä¿®æ”¹,å³ä½¿ä¿®æ”¹äº†ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚</p>
<p>jsä¸­ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span>) &#123;</div><div class="line">  analytics.disable();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>public/index.html</code>ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>%REACT_APP_WEBSITE_NAME%<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„âš ï¸ï¼š</p>
<ul>
<li>é™¤äº†NODE_ENVå’ŒPUBLIC_URLè¿ä¸ªç¯å¢ƒå˜é‡ï¼Œå…¶ä»–ç¯å¢ƒå˜é‡éƒ½éœ€è¦ç”±REACT<em>APP</em>å¼€å¤´ã€‚</li>
<li>ç¯å¢ƒå˜é‡åªæœ‰åœ¨æ„å»ºæœŸé—´æœ‰æ•ˆï¼Œè¿è¡ŒæœŸé—´æ— æ•ˆã€‚</li>
</ul>
</blockquote>
<p>æœ‰ä¸¤ç§æ–¹å¼å®šä¹‰ç¯å¢ƒå˜é‡ï¼š</p>
<ol>
<li><p>shellå‘½ä»¤</p>
<ul>
<li>windows: <code>set REACT_APP_SECRET_CODE=abcdef&amp;&amp;npm start</code></li>
<li>Linux,maxOs:<code>REACT_APP_SECRET_CODE=abcdef npm start</code></li>
</ul>
<p>è¿™ç§æ–¹å¼ï¼Œç¯å¢ƒå˜é‡åªæœ‰åœ¨shellå›è¯ä¸­æœ‰æ•ˆ</p>
</li>
<li><p><code>.env</code>æ–‡ä»¶</p>
<p>ä¸ºäº†æ°¸ä¹…çš„ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œéœ€è¦åœ¨æ ¹ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª<code>.env</code>æ–‡ä»¶</p>
<p>.envï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">REACT_APP_SECRET_CODE=abcdef</div></pre></td></tr></table></figure>
<p>.envæ–‡ä»¶å¯ä»¥æ·»åŠ è¿›ç‰ˆæœ¬æ§åˆ¶ä¸­( <code>.gitignore</code>ä¸­é…ç½®<code>.env*.local</code> )ã€‚</p>
<p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–‡ä»¶ï¼š</p>
<ul>
<li><code>.env</code>ï¼šé»˜è®¤</li>
<li><code>.env.local</code>ï¼šæœ¬åœ°è¦†ç›–ï¼Œè¿™ä¸ªåœ¨é™¤äº†testæ„å»ºï¼Œå…¶ä»–æ‰€æœ‰æ„å»ºä¸­éƒ½æœ‰æ•ˆ</li>
<li><code>.env.development</code>ï¼Œ<code>.env.test</code>ï¼Œ<code>.env.production</code>ï¼šæŒ‡å®šæ„å»ºç¯å¢ƒä¸­æœ‰æ•ˆ</li>
<li><code>.env.development.local</code>, <code>.env.test.local</code>, <code>.env.production.local</code>ï¼šæœ¬åœ°è¦†ç›–æŒ‡å®šæ„å»ºç¯å¢ƒ</li>
</ul>
<p>è¿™äº›å®šä¹‰çš„ä¼˜å…ˆçº§( è¶Šé è¿‘å·¦è¾¹çš„ï¼Œä¼˜å…ˆçº§è¶Šé«˜ )ï¼š</p>
<ul>
<li><code>npm start</code>: <code>.env.development.local</code>, <code>.env.development</code>, <code>.env.local</code>, <code>.env</code></li>
<li><code>npm run build</code>: <code>.env.production.local</code>, <code>.env.production</code>, <code>.env.local</code>, <code>.env</code></li>
<li><code>npm test</code>: <code>.env.test.local</code>, <code>.env.test</code>, <code>.env</code> (æ³¨æ„âš ï¸ï¼šæ²¡æœ‰ <code>.env.local</code> )</li>
</ul>
</li>
</ol>
<h3 id="èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨"><a href="#èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨" class="headerlink" title="èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨"></a>èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨</h3><p>ä¸èƒ½ã€‚</p>
<ul>
<li>è¿™æ˜¯ä¸€ä¸ªè¯•éªŒæ€§çš„å»ºè®®ï¼Œå¯èƒ½ä¼šæ”¹å˜ã€‚</li>
<li>ç›®å‰çš„è§„æ ¼ç‰ˆæœ¬æ²¡æœ‰å¾—åˆ°Babelå®˜æ–¹çš„æ”¯æŒã€‚</li>
<li>å¦‚æœè§„èŒƒå‘ç”Ÿå˜åŒ–ï¼Œå°†æ— æ³•ç¼–å†™é‡æ„ä»¶codemodï¼Œå› ä¸ºFacebookå†…éƒ¨ä½¿ç”¨å®ƒä»¬ã€‚</li>
</ul>
<p>å¦‚æœéœ€è¦ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨<code>npm run eject</code>è‡ªå·±ç”¨ç¬¬ä¸‰æ–¹å·¥å…·é…ç½®</p>
<h3 id="å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚"><a href="#å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚" class="headerlink" title="å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚"></a>å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚</h3><p>ä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒçš„é¡¹ç›®éƒ½æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/             - é™æ€æœåŠ¡ï¼Œè¿”å›index.ftl</div><div class="line">/todos        - é™æ€æœåŠ¡ï¼Œè¿”å›index.ftl</div><div class="line">/api/todos    - æœåŠ¡å™¨æ‹¦æˆª /api/* å¼€å¤´çš„è¯·æ±‚ï¼Œåç«¯æ‰§è¡Œä¸šåŠ¡é€»è¾‘åè¿”å›</div></pre></td></tr></table></figure>
<p>ä¸ºäº†å‘Šè¯‰å¼€å‘æœåŠ¡å™¨ï¼Œå¦‚ä½•é‡å®šå‘ä¸€ä¸ªæœªçŸ¥çš„æ¥å£è¯·æ±‚ï¼Œéœ€è¦åœ¨<code>package.json</code>ä¸­æ·»åŠ <code>proxy</code>å­—æ®µï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;proxy&quot;:&quot;http://locahost:8080&quot;</div></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬å‘èµ·è¯·æ±‚ï¼Œæ¯”å¦‚<code>fetch(&#39;/api/todos&#39;)</code>ï¼Œå¼€å‘æœåŠ¡å™¨é¦–å…ˆç¡®è®¤ï¼Œå½“å‰ä¸æ˜¯ä¸€ä¸ªé™æ€èµ„æºï¼Œä¹‹åä¼šè½¬å‘è¿™ä¸ªè¯·æ±‚åˆ°<code>http://localhost:8080/api/todos</code>ï¼Œå¼€å‘æœåŠ¡å™¨åªä¼šå°è¯•è½¬å‘<code>Accept</code>å¤´éƒ¨ä¸æ˜¯<code>text/html</code>çš„è¯·æ±‚ã€‚</p>
<p>è½¬å‘è¯·æ±‚å¯ä»¥é¿å…è·¨åŸŸè¯·æ±‚å¤±è´¥ï¼š</p>
<p><code>Fetch API cannot load http://localhost:8080/api/todos. No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. Origin &#39;http://localhost:3000&#39; is therefore not allowed access. If an opaque response serves your needs, set the request&#39;s mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.</code></p>
<p>å¯ä»¥æ‰©å±•<code>proxy</code>ï¼š</p>
<ul>
<li><p>è‡ªå®šä¹‰ä»£ç†è¯·æ±‚</p>
<ul>
<li><p>ä¿®æ”¹<code>package.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  // ...</div><div class="line">  &quot;proxy&quot;: &#123;</div><div class="line">    &quot;/api&quot;: &#123;</div><div class="line">      &quot;target&quot;: &quot;&lt;url&gt;&quot;,</div><div class="line">      &quot;ws&quot;: true</div><div class="line">      // ...</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ‰€æœ‰çš„<code>/api</code>å¼€å¤´çš„è¯·æ±‚éƒ½ä¼šè¢«ä»£ç†ï¼ŒåŒ…æ‹¬å¤´éƒ¨<code>Accept</code>æ˜¯<code>text/html</code>çš„è¯·æ±‚ï¼Œå’Œé»˜è®¤çš„é…ç½®<code>proxy</code>ä¸ä¸€æ ·ã€‚</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  // ...</div><div class="line">  &quot;proxy&quot;: &#123;</div><div class="line">    // ä»£ç†ä»¥ /api å¼€å¤´çš„è¯·æ±‚</div><div class="line">    &quot;/api&quot;: &#123;</div><div class="line">      &quot;target&quot;: &quot;&lt;url_1&gt;&quot;,</div><div class="line">      &quot;ws&quot;: true</div><div class="line">      // ...</div><div class="line">    &#125;,</div><div class="line">    // ä»£ç†ä»¥ /foo å¼€å¤´çš„è¯·æ±‚</div><div class="line">    &quot;/foo&quot;: &#123;</div><div class="line">      &quot;target&quot;: &quot;&lt;url_2&gt;&quot;,</div><div class="line">      &quot;ssl&quot;: true,</div><div class="line">      &quot;pathRewrite&quot;: &#123;   // æ¥å£é‡å†™</div><div class="line">        &quot;^/foo&quot;: &quot;/foo/beta&quot;</div><div class="line">      &#125;</div><div class="line">      // ...</div><div class="line">    &#125;,</div><div class="line">    // ä»£ç† /bar/abc.html è€Œä¸æ˜¯ /bar/sub/def.html</div><div class="line">    &quot;/bar/[^/]*[.]html&quot;: &#123;</div><div class="line">      &quot;target&quot;: &quot;&lt;url_3&gt;&quot;,</div><div class="line">      // ...</div><div class="line">    &#125;,</div><div class="line">    // ä»£ç† /baz/abc.html å’Œ /baz/sub/def.html</div><div class="line">    &quot;/baz/.*/.*[.]html&quot;: &#123;</div><div class="line">      &quot;target&quot;: &quot;&lt;url_4&gt;&quot;</div><div class="line">      // ...</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>æ”¯æŒWebSocketçš„ä»£ç†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  // ...</div><div class="line">  &quot;proxy&quot;: &#123;</div><div class="line">    &quot;/socket&quot;: &#123;</div><div class="line">      // ä»£ç†çš„ç›®æ ‡websocketæœåŠ¡å™¨</div><div class="line">      &quot;target&quot;: &quot;ws://&lt;socket_url&gt;&quot;,</div><div class="line">      // æ ‡è®°è¿™æ˜¯webSocketè¯·æ±‚</div><div class="line">      &quot;ws&quot;: true</div><div class="line">      // ...</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="å¯åŠ¨HTTPS"><a href="#å¯åŠ¨HTTPS" class="headerlink" title="å¯åŠ¨HTTPS"></a>å¯åŠ¨HTTPS</h3><ul>
<li>Windowsï¼š<code>set HTTPS=true&amp;&amp;npm start</code></li>
<li>Linux,macOSï¼š<code>HTTPS=true npm start</code></li>
</ul>
<h3 id="åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶"><a href="#åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶" class="headerlink" title="åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶"></a>åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶</h3><p>é€šå¸¸ï¼Œåœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œä½ æœ‰å¾ˆå¤šçš„UIç»„ä»¶ï¼Œè€Œä¸”æ¯ä¸ªç»„ä»¶éƒ½æœ‰å¾ˆå¤šä¸åŒçš„çŠ¶æ€ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„æŒ‰é’®ç»„ä»¶å¯èƒ½å…·æœ‰ä»¥ä¸‹çŠ¶æ€ï¼š</p>
<ul>
<li>æ­£å¸¸çš„çŠ¶æ€ä¸‹ï¼Œä»…å±•ç¤ºæ–‡æœ¬æ ‡ç­¾ã€‚</li>
<li>æœ‰ç¦ç”¨çš„æ¨¡å¼</li>
<li>æœ‰ä¸€ä¸ªloadingçŠ¶æ€</li>
</ul>
<p>é€šå¸¸ï¼Œå¦‚æœä¸å•ç‹¬è·‘å„ä¸ªçŠ¶æ€çš„ç»„ä»¶ï¼Œå¾ˆéš¾ä¸€æ¬¡æ€§çœ‹åˆ°è¿™äº›çŠ¶æ€ã€‚</p>
<p><code>create-react-app</code>ä¸åŒ…å«è¿™äº›å¼€å‘å·¥å…·ï¼Œéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œæ¥å®ç°åŒæ—¶æŸ¥çœ‹ä¸€ä¸ªç»„ä»¶çš„æ‰€æœ‰çŠ¶æ€ã€‚å·¥å…·æœ‰ï¼š</p>
<ul>
<li><p><a href="https://storybook.js.org/" target="_blank" rel="external">Storybook for React</a> (<a href="https://github.com/storybooks/storybook" target="_blank" rel="external">source</a>) </p>
<p>é¦–å…ˆï¼Œå…¨å±€å®‰è£…<code>@storybook/cli</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g @storybook/cli</div></pre></td></tr></table></figure>
<p>ä¹‹åï¼Œåœ¨æ ¹ç›®å½•æ‰§è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getstorybook</div></pre></td></tr></table></figure>
<p>ä¹‹åä¼šè‡ªåŠ¨å®‰è£…ä»¥æ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">âœ  testReact git:(master) âœ— getstorybook</div><div class="line"></div><div class="line"> getstorybook - the simplest way to add a storybook to your project.</div><div class="line"></div><div class="line"> â€¢ Detecting project type. âœ“</div><div class="line"> â€¢ Adding storybook support to your &quot;Create React App&quot; based project. âœ“</div><div class="line"> â€¢ Preparing to install dependencies. âœ“</div><div class="line"></div><div class="line">yarn install v1.2.1</div><div class="line">[1/4] ğŸ”  Resolving packages...</div><div class="line">[2/4] ğŸšš  Fetching packages...</div><div class="line">[3/4] ğŸ”—  Linking dependencies...</div><div class="line">....</div><div class="line"></div><div class="line">âœ¨  Done in 21.32s.</div><div class="line"></div><div class="line"> â€¢ Installing dependencies. âœ“</div><div class="line"></div><div class="line">To run your storybook, type:</div><div class="line"></div><div class="line">   yarn run storybook</div><div class="line"></div><div class="line">For more information visit: https://storybook.js.org</div></pre></td></tr></table></figure>
<p>æç¤ºä½ å¯ä»¥é€šè¿‡<code>yarn run storybook</code>æ¥å¯åŠ¨<code>storybook</code>ã€‚</p>
</li>
<li><p><a href="https://react-styleguidist.js.org/" target="_blank" rel="external">React Styleguidist</a> (<a href="https://github.com/styleguidist/react-styleguidist" target="_blank" rel="external">source</a>) </p>
</li>
</ul>
<p>è¿™äº›å·¥å…·å¯ä»¥å•ç‹¬éƒ¨ç½²ï¼Œè¿™æ ·å­å›¢é˜Ÿä¸­çš„å…¶ä»–äººå°±å¯ä»¥ç›´æ¥æŸ¥çœ‹ç»„ä»¶çš„å„ä¸ªçŠ¶æ€ï¼Œè€Œä¸éœ€è¦å¯åŠ¨æœåŠ¡å™¨ã€‚</p>
<h3 id="é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨"><a href="#é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨" class="headerlink" title="é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨"></a>é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨</h3><p> <code>create-react-app</code>åˆ›å»ºçš„é¡¹ç›®é»˜è®¤å°±ä¼šæ”¯æŒ [æ¸è¿›å¼webåº”ç”¨(PWA)] ï¼Œä¼šä½¿ç”¨ <a href="https://developers.google.com/web/fundamentals/getting-started/primers/service-workers" target="_blank" rel="external">service workers</a> å®ç° <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#cache-falling-back-to-network" target="_blank" rel="external">ç¼“å­˜ä¼˜å…ˆç­–ç•¥</a> æ¥ä¼˜åŒ–ç”¨æˆ·å†æ¬¡è®¿é—®åº”ç”¨çš„é€Ÿåº¦ã€‚ä»€ä¹ˆæ˜¯service workers?</p>
<p><img src="http://oco9w3mgp.bkt.clouddn.com/service-workerss-falling-back-to-network.png" alt="service-worker"></p>
<p><img src="http://oco9w3mgp.bkt.clouddn.com/from-serviceWorkerwhats-new-in-create-react-app-03.png" alt="from serviceWorker"></p>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®é»˜è®¤ä¸å¼€å¯è¿™ä¸ªç‰¹æ€§ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨å¼€å‘æ–°çš„åº”ç”¨ï¼Œæ¨èä½¿ç”¨ï¼Œç‰¹åˆ«åœ¨ç§»åŠ¨ç«¯Androidè®¾å¤‡ä¸Šï¼Œèƒ½åŠ é€ŸWeb Appçš„å¯åŠ¨ã€‚</p>
<p>å·²ç¼“å­˜çš„é¡¹ç›®ï¼Œå¦‚æœæƒ³ç¦ç”¨<code>service-worker</code>ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨<code>unregister</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; unregister &#125; <span class="keyword">from</span> <span class="string">'./registerServiceWorker'</span>;</div></pre></td></tr></table></figure>
<h3 id="å®¢æˆ·ç«¯è·¯ç”±"><a href="#å®¢æˆ·ç«¯è·¯ç”±" class="headerlink" title="å®¢æˆ·ç«¯è·¯ç”±"></a>å®¢æˆ·ç«¯è·¯ç”±</h3><p>å¦‚æœå®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯HTML5çš„<code>pushState history API</code>ï¼Œè®¸å¤šé™æ€èµ„æºæ–‡ä»¶è¯·æ±‚å°†ä¼šå¤±è´¥ã€‚æ¯”å¦‚ï¼Œè¯·æ±‚é¡µé¢<code>/todos/42</code>ï¼Œå¼€å‘æœåŠ¡å™¨ä¼šè¿è¡Œå¾ˆå¥½ï¼Œä½†æ˜¯ç”Ÿäº§ç¯å¢ƒå°†ä¼šå¤±è´¥ã€‚å› ä¸ºåå°ç¨‹åºå¹¶æ²¡æœ‰é…ç½®<code>/todos/42</code>è¿™ä¸ªè·¯ç”±ï¼Œä¼šè¿”å›404ã€‚</p>
<p>NODEçš„è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// app.get( '/api/*' , ()=&gt;&#123; // .... &#125; )</span></div><div class="line">app.get(<span class="string">'/*'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">   res.sendFile(path.join(__dirname, <span class="string">'build'</span>, <span class="string">'index.html'</span>));</div><div class="line"> &#125;);</div></pre></td></tr></table></figure>
<h3 id="æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„"><a href="#æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„" class="headerlink" title="æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„"></a>æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„</h3><p>é»˜è®¤çš„<code>create-react-app</code>ä¼šè®²æ‰“åŒ…çš„é»˜è®¤è·¯å¾„è®¾ç½®ä¸ºæœåŠ¡å™¨çš„æ ¹ç›®å½•<code>/</code>ã€‚</p>
<p>è¦è¦†ç›–é»˜è®¤çš„è®¾ç½®ï¼Œéœ€è¦åœ¨<code>package.json</code>ä¸­ï¼Œè®¾ç½®<code>homepage</code>ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">"homepage": "http://kf.netease.com/index",</div></pre></td></tr></table></figure>
<p>è®¾ç½®ä¹‹åï¼Œ<code>create-react-app</code>å°±çŸ¥é“äº†é¡¹ç›®çš„æ ¹ç›®å½•æ˜¯ï¼š<code>/index</code>ã€‚</p>
<p>ä¹‹åç”Ÿæˆçš„htmlæ–‡ä»¶ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"/index/favicon.ico"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/index/static/css/main.6cfcf8f6.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/index/static/js/main.4dc8f75a.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
    
  </div>
</article>

</div>


  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">æ”¯æŒä¸€ä¸‹</span>
      <div class="donation-body">
        <div class="tip text-center">æ‰«ä¸€æ‰«ï¼Œæ”¯æŒlcoder</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/images/qr-wechat.png" alt="">
          </li>
        
          <li class="item">
            <img src="/images/qr-alipay.png" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>




  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">å…³é—­</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              target="_self"
              >
              åšå®¢
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              target="_self"
              >
              åˆ†ç±»
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              target="_self"
              >
              æ ‡ç­¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              target="_self"
              >
              å‹é“¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              target="_self"
              >
              å…³äº
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/RSS/atom.xml"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              target="_self"
              >
              æœç´¢
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    
  <section class="duoshuo-comments">
    <!-- å¤šè¯´è¯„è®ºæ¡† start -->
    <div class="ds-thread" data-thread-key="" data-title="create-react-appä½¿ç”¨ç¬”è®°" data-url="http://www.maotingfeng.me/2017/11/10/create-react-appä½¿ç”¨ç¬”è®°/index.html"></div>
    <!-- å¤šè¯´è¯„è®ºæ¡† end -->
  </section>




  <script type="text/javascript">
  var duoshuoQuery = {short_name:"lcoder"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>


  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
