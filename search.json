[{"title":"create-react-appä½¿ç”¨ç¬”è®°","url":"http://www.maotingfeng.me/2017/11/10/create-react-appä½¿ç”¨ç¬”è®°/","content":"<h2 id=\"create-react-appä½¿ç”¨ç¬”è®°\"><a href=\"#create-react-appä½¿ç”¨ç¬”è®°\" class=\"headerlink\" title=\"create-react-appä½¿ç”¨ç¬”è®°\"></a>create-react-appä½¿ç”¨ç¬”è®°</h2><p>å®˜æ–¹è„šæ‰‹æ¶åŠŸèƒ½å¼ºå¤§ï¼Œå„ä¸ªéœ€æ±‚ç‚¹ä¹Ÿæ˜¯è€ƒè™‘åˆ°äº†ï¼Œæ˜¯å¼€å‘reactåº”ç”¨çš„ç¥å™¨ã€‚</p>\n<p>###å¦‚ä½•ä½¿ç”¨</p>\n<p>â€‹    <code>create-react-app</code>ä¾èµ–ä¸¤ä¸ªåŒ…,ä¸€ä¸ªæ˜¯<code>create-react-app</code>å…¨å±€å‘½ä»¤å·¥å…·åŒ…ï¼Œç”¨æ¥åˆ›å»ºæ–°çš„é¡¹ç›®ï¼Œå°±æ˜¯<code>create-react-app myProject</code>å‘½ä»¤ï¼›ç¬¬äºŒä¸ªæ˜¯<code>react-scripts</code>åœ¨ç”Ÿæˆçš„é¡¹ç›®ä¸­ä¾èµ–çš„åŒ…ã€‚ä¸€èˆ¬ä¸ç”¨å‡çº§create-react-appï¼Œå› ä¸ºä¸»è¦çš„reactä¾èµ–éƒ½æ˜¯ç”±react-scriptsæ¥ç”Ÿæˆçš„ï¼Œè€Œç”Ÿæˆçš„<code>react-scripts</code>ä¼šè‡ªåŠ¨ä¸‹è½½æœ€æ–° ç‰ˆï¼Œæ‰€ä»¥ä½ ç”¨çš„reactåŒ…ä¹Ÿæ˜¯æœ€æ–°ç‰ˆæœ¬çš„ã€‚</p>\n<p>###create-react-appç”Ÿæˆçš„é¡¹ç›®ç»“æ„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">.</div><div class=\"line\">â”œâ”€â”€ README.md</div><div class=\"line\">â”œâ”€â”€ node_modules</div><div class=\"line\">â”œâ”€â”€ package.json</div><div class=\"line\">â”œâ”€â”€ public</div><div class=\"line\">â”‚Â Â  â”œâ”€â”€ favicon.ico</div><div class=\"line\">â”‚Â Â  â”œâ”€â”€ index.html</div><div class=\"line\">â”‚Â Â  â””â”€â”€ manifest.json</div><div class=\"line\">â”œâ”€â”€ src</div><div class=\"line\">â”‚Â Â  â”œâ”€â”€ App.css</div><div class=\"line\">â”‚Â Â  â”œâ”€â”€ App.js</div><div class=\"line\">â”‚Â Â  â”œâ”€â”€ App.test.js</div><div class=\"line\">â”‚Â Â  â”œâ”€â”€ index.css</div><div class=\"line\">â”‚Â Â  â”œâ”€â”€ index.js</div><div class=\"line\">â”‚Â Â  â”œâ”€â”€ logo.svg</div><div class=\"line\">â”‚Â Â  â””â”€â”€ registerServiceWorker.js</div><div class=\"line\">â””â”€â”€ yarn.lock</div></pre></td></tr></table></figure>\n<p>é¡¹ç›®ä¸­å¿…é¡»å­˜åœ¨çš„æ–‡ä»¶ï¼š</p>\n<ul>\n<li>public/index.html   htmlæ¨¡ç‰ˆæ–‡ä»¶</li>\n<li>src/index.js   reactåº”ç”¨çš„å…¥å£æ–‡ä»¶</li>\n</ul>\n<p>å¯ä»¥åœ¨<code>src</code>ç›®å½•ä¸‹æ–°å»ºNå¤šä¸ªå­é›†ç›®å½•ï¼Œåªæœ‰åœ¨srcä¸‹çš„èµ„æºï¼Œæ‰èƒ½è¢«webpackå¤„ç†ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½å°†jså’Œcssèµ„æºæ”¾å…¥<code>src</code>ç›®å½•ä¸‹ï¼Œå›¾ç‰‡èµ„æºä¹Ÿå¯ä»¥æ”¾<code>src</code>é‡Œé¢,</p>\n<p>å®˜æ–¹demoåˆ™å°†svgèµ„æºæ”¾å…¥äº†<code>src</code>ä¸­ã€‚</p>\n<h3 id=\"å¯è¿è¡Œçš„è„šæœ¬\"><a href=\"#å¯è¿è¡Œçš„è„šæœ¬\" class=\"headerlink\" title=\"å¯è¿è¡Œçš„è„šæœ¬\"></a>å¯è¿è¡Œçš„è„šæœ¬</h3><ul>\n<li><code>npm start</code>è¿è¡Œå¼€å‘è¿è¡Œï¼Œé»˜è®¤ä¼šæ‰“å¼€<code>http://localhost:3000</code>çš„æµè§ˆç•Œï¼Œå¯ä»¥çƒ­æ›´æ–°ä»£ç </li>\n<li><code>npm test</code>è¿è¡Œæµ‹è¯•è„šæœ¬</li>\n<li><code>npm run build</code>æ‰“åŒ…å‘½ä»¤ï¼Œä¼šå¯ç”¨reactçš„ç”Ÿäº§ç¯å¢ƒæ¨¡å¼ï¼Œå»é™¤ç±»å‹æ£€æŸ¥ç­‰ï¼Œå‹ç¼©ä»£ç </li>\n<li><code>npm run eject</code>æš´éœ²å‡ºé»˜è®¤é…ç½®æ–‡ä»¶</li>\n</ul>\n<p>###æ”¯æŒæœ€æ–°çš„JavaScriptæ–°åŠŸèƒ½å’ŒPolyfills</p>\n<p>è¯¥é¡¹ç›®æ”¯æŒæœ€æ–°çš„JavaScriptæ ‡å‡†çš„è¶…é›†ã€‚é™¤äº†es6çš„è¯­æ³•ï¼Œ<code>create-react-app</code>è¿˜æ”¯æŒï¼š</p>\n<ul>\n<li>æŒ‡æ•°è¿ç®—ç¬¦</li>\n<li>Async/awaitè¯­æ³•(ES2017)</li>\n<li>å¯¹è±¡çš„è§£æ„èµ‹å€¼</li>\n<li>åŠ¨æ€import è¯­æ³•</li>\n<li>ç±»é™æ€å±æ€§</li>\n<li>JSXè¯­æ³•å’Œflowè¯­æ³•</li>\n</ul>\n<p>å¦å¤–å®˜æ–¹ä»…ä»…åŒ…å«äº†å¾ˆå°‘ä¸€ä¸ªéƒ¨åˆ†çš„ES6 polyfills:</p>\n<ul>\n<li>Object.assign() æ”¯æŒ <a href=\"https://github.com/sindresorhus/object-assign\" target=\"_blank\" rel=\"external\">object-assign</a></li>\n<li>Promise æ”¯æŒï¼Œ<a href=\"https://github.com/then/promise\" target=\"_blank\" rel=\"external\">promise</a></li>\n<li>fetchæ”¯æŒï¼Œ<a href=\"https://github.com/github/fetch\" target=\"_blank\" rel=\"external\">whatwg-fetch</a></li>\n</ul>\n<p>æ‰€ä»¥å½“ç”¨åˆ°ä¸€äº›éœ€è¦polyfillsçš„åŠŸèƒ½æ—¶ï¼ŒæŸäº›polyfillséœ€è¦æ‰‹åŠ¨æ·»åŠ </p>\n<p>###æ”¹å˜htmlçš„title</p>\n<p>æ‰¾åˆ°<code>public/index.html</code>ç›´æ¥ä¿®æ”¹titleå³å¯ï¼Œå¦‚æœæ˜¯å•é¡µåº”ç”¨ï¼Œåˆ™åœ¨æ¯ä¸ªcomponentçš„componentDidMountçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼Œè°ƒç”¨document.titleæ¥ä¿®æ”¹ã€‚ä½ ä¹Ÿå¯ä»¥å‚è€ƒ<a href=\"https://github.com/nfl/react-helmet\" target=\"_blank\" rel=\"external\">React Helmet</a></p>\n<p>###å¯¼å…¥ç»„ä»¶</p>\n<p>æ”¯æŒcommonjsæ¨¡å—è¯­æ³•ï¼Œå½“ç„¶æœ€å¥½ä½¿ç”¨import å’Œ export è¯­æ³•</p>\n<p>###ä»£ç åˆ†å‰²</p>\n<p>å½“æŸäº›ä»£ç ç‰‡æ®µéœ€è¦å¼‚æ­¥åŠ è½½çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p>\n<p><code>chart.js</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">const initChart = () =&gt; &#123; // do something... &#125;;</div><div class=\"line\"></div><div class=\"line\">export &#123; initChart &#125;;</div></pre></td></tr></table></figure>\n<p><code>App.js</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  click = () =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">import</span>(<span class=\"string\">'./chart.js'</span>)</div><div class=\"line\">      .then((&#123; initChart &#125;) =&gt; &#123;</div><div class=\"line\">        <span class=\"comment\">// ä½¿ç”¨ initChart() ;</span></div><div class=\"line\">      &#125;)</div><div class=\"line\">      .catch(err =&gt; &#123;</div><div class=\"line\">        <span class=\"comment\">// é”™è¯¯å¤„ç†</span></div><div class=\"line\">      &#125;);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;button onClick=&#123;this.click&#125;&gt;åŠ è½½å›¾è¡¨&lt;/button&gt;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    );</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</div></pre></td></tr></table></figure>\n<p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>async/await</code>è¯­æ³•æ¥ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼š</p>\n<p><code>App.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  click = <span class=\"keyword\">async</span> () =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> &#123; initChart &#125; = <span class=\"keyword\">await</span> <span class=\"keyword\">import</span>( <span class=\"string\">'./chart'</span> ).catch( e=&gt;<span class=\"built_in\">console</span>.warn(e) ) ;</div><div class=\"line\">    initChart() ;</div><div class=\"line\">  &#125; ;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;button onClick=&#123;this.click&#125;&gt;åŠ è½½å›¾è¡¨&lt;/button&gt;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    );</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</div></pre></td></tr></table></figure>\n<p>æ¯”ç”¨ä¸Šé¢çš„è¯­æ³•ç®€å•æ¸…æ™°å¾ˆå¤šã€‚</p>\n<p>###æ·»åŠ æ ·å¼è¡¨</p>\n<p><code>create-react-app</code>å·²ç»å†…ç½®äº†é…ç½®å¥½äº†çš„webpack,å¯ä»¥å°†csså½“ä½œjsèµ„æºä¸€æ ·å¼•å…¥åˆ°jsæ–‡ä»¶ä¸­ã€‚</p>\n<p><code>Button.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.Button</span> &#123; <span class=\"attribute\">color</span>: red ; &#125;</div></pre></td></tr></table></figure>\n<p><code>Button.js</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'./Button.css'</span>; <span class=\"comment\">// å¼•å…¥cssèµ„æº</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Button</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"comment\">// ä½¿ç”¨</span></div><div class=\"line\">    <span class=\"keyword\">return</span> &lt;div className=\"Button\" /&gt;;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œä¿®æ”¹cssæ–‡ä»¶ï¼Œå¯ä»¥çƒ­æ›´æ–°ï¼›ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåˆ™æ‰€æœ‰cssæ–‡ä»¶ä¼šè¢«æ‰“åŒ…è¿›ä¸€ä¸ª.cssæ–‡ä»¶ä¸­ï¼Œé€šè¿‡linkæ ‡ç­¾æ³¨å…¥åˆ°<code>public/index.html</code>ä¸­ã€‚è¿™ç§æ–¹å¼ï¼Œå¢åŠ äº†è¿ç§»åˆ°å…¶ä»–æ‰“åŒ…å·¥å…·çš„æˆæœ¬ï¼Œä¸è¿‡å¯¹äºæ‰“åŒ…å·¥å…·ä»…ä»…æ˜¯webpackæ¥è¯´å¾ˆæ–¹ä¾¿ã€‚</p>\n<p>å¦å¤–<code>create-react-app</code>é›†æˆäº†æ’ä»¶<code>Autoprefixer</code>ï¼Œå¯ä»¥è‡ªåŠ¨å¸®ä½ è¡¥å…¨æµè§ˆå™¨å‰ç¼€ã€‚</p>\n<p>###æ·»åŠ å›¾åƒã€å­—ä½“ã€æ–‡ä»¶</p>\n<p>å¼•å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œæ˜¯å‘Šè¯‰webpackæŠŠï¼Œè¿™ä¸ªæ–‡ä»¶å¼•å…¥åˆ°æ‰“åŒ…çš„bundleä¸­ï¼Œä¸åƒimport cssæ–‡ä»¶ï¼Œå¼•å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œwebpackä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚ï¼Œsrcçš„urlåœ°å€ï¼Œhrefçš„è¶…é“¾æ¥åœ°å€ã€‚</p>\n<p>æ¯”å¦‚å›¾ç‰‡çš„è¯ï¼Œå¦‚æœå¤§å°å°é›¨10,000å­—èŠ‚ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªdata URIçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœå¤§äºçš„è¯ï¼Œåˆ™è¿”å›ç›¸å¯¹äº<code>%PUBLIC_URL%</code>çš„urlåœ°å€ã€‚ç›®å‰<code>create-react-app</code>æ”¯æŒbmp,gif,jpg,jpeg,pngã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> logo <span class=\"keyword\">from</span> <span class=\"string\">'./logo.png'</span>; <span class=\"comment\">// å¼•å…¥logo pngèµ„æº</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(logo); <span class=\"comment\">// å­—ç¬¦ä¸²\"/logo.84287d09.png\"</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Header</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// è®¾ç½®srcç­‰äºlogo</span></div><div class=\"line\">  <span class=\"keyword\">return</span> &lt;img src=&#123;logo&#125; alt=\"Logo\" /&gt;;</div><div class=\"line\">&#125;</div><div class=\"line\">export default Header;</div></pre></td></tr></table></figure>\n<p>webpackä¼šæ ¹æ®èµ„æºçš„å†…å®¹åŠ¨æ€ç”Ÿæˆhash,å¦‚æœä»¥åå›¾ç‰‡æœ‰å°ä¿®æ”¹ï¼Œå°±ä¸ç”¨åŠ ç‰ˆæœ¬å·äº†ï¼Œæ¸…é™¤ç¼“å­˜å¾ˆæ–¹ä¾¿ã€‚</p>\n<p>###æ­£ç¡®ä½¿ç”¨<code>public</code>æ–‡ä»¶å¤¹</p>\n<p><code>public/index.html</code>é‡Œé¢çš„å†…å®¹å¯ä»¥éšæ„ä¿®æ”¹ï¼Œæ·»åŠ æˆ–è€…åˆ é™¤scriptæ ‡ç­¾ç­‰ã€‚</p>\n<p><code>create-react-app</code>é¼“åŠ±ä½¿ç”¨import è¯­æ³•æ¥å¼•å…¥ æ ·å¼ã€å›¾ç‰‡ã€å­—ä½“æ–‡ä»¶ï¼Œå› ä¸ºæœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p>\n<ul>\n<li>ä¸€èµ·æ‰“åŒ…å¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚</li>\n<li>ç¼–è¯‘è¿‡ç¨‹ä¸­çš„é”™è¯¯ï¼Œå¯ä»¥é¢„é˜²ä¸Šçº¿å‡ºç°çš„404é”™è¯¯</li>\n<li>æ ¹æ®å†…å®¹è‡ªåŠ¨ç”Ÿæˆhashï¼Œå¯ä»¥é¢„é˜²æµè§ˆå™¨ç¼“å­˜</li>\n</ul>\n<p>å¦‚æœå°†é™æ€èµ„æºæ”¾å…¥<code>public</code>æ–‡ä»¶å¤¹ä¸­ï¼Œå®ƒä¸ä¼šè¢«webpackå¤„ç†ï¼Œä»…ä»…æ‰“åŒ…ä¹‹åï¼Œä¼šè¢«æ‹·è´åˆ°<code>build</code>ç›®å½•ä¸­ã€‚ä¸ºäº†å¼•ç”¨åˆ°è¿™ä¸ªèµ„æºï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªå«<code>PUBLIC_URL</code>çš„å˜é‡ã€‚åœ¨<code>index.html</code>ä¸­ï¼Œæœ‰å¦‚ä¸‹ä»£ç ï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"shortcut icon\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"%PUBLIC_URL%/favicon.ico\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>åªæœ‰åœ¨<code>public</code>ä¸­çš„æ–‡ä»¶ï¼Œæ‰å¯ä»¥ç”¨<code>%PUBLIC_URL%</code>è·å–ã€‚å¦‚æœèµ„æºåœ¨srcæˆ–è€…node_modulesé‡Œé¢ï¼Œä½ éœ€è¦æ‹·è´åˆ°<code>public</code>ç›®å½•ä¸­å»ä½¿ç”¨ã€‚</p>\n<p>å½“æˆ‘ä»¬ä½¿ç”¨<code>yarn build</code>çš„æ—¶å€™ï¼Œ<code>%PUBLIC_URL%</code>ä¼šè¢«ç»å¯¹è·¯å¾„æ›¿æ¢ï¼Œå°±æ˜¯ç½‘ç«™çš„é™æ€èµ„æºæ ¹ç›®å½•ã€‚</p>\n<p>åœ¨JavaScriptä»£ç ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>process.env.PUBLIC_URL</code>æ¥è®¿é—®ï¼Œä¸è¿‡å®˜æ–¹ä¸æ¨èä½¿ç”¨ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">render() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;process.env.PUBLIC_URL</span> + '/<span class=\"attr\">img</span>/<span class=\"attr\">logo.png</span>'&#125; /&gt;</span>;</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>\n<ul>\n<li><code>public</code>é‡Œçš„æ–‡ä»¶ä¸ä¼šè¢«é¢„å¤„ç†ï¼Œå’Œå‹ç¼©</li>\n<li>ä¸¢å¤±æ–‡ä»¶ï¼Œä¼šå¯¼è‡´404</li>\n<li>å½“æ–‡ä»¶æ”¹å˜æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨é‡å‘½åï¼Œæˆ–è€…æ‰‹åŠ¨æ·»åŠ ç‰ˆæœ¬å·ï¼Œæ¥å¤„ç†ç¼“å­˜é—®é¢˜ã€‚</li>\n</ul>\n<p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨<code>public</code>æ–‡ä»¶å¤¹</p>\n<ul>\n<li>éœ€è¦åœ¨æ„å»ºè¾“å‡ºä¸­å…·æœ‰ç‰¹å®šåç§°çš„æ–‡ä»¶ï¼Œæ¯”å¦‚manifest.webmanifest</li>\n<li>æœ‰Nå¤šå›¾ç‰‡ï¼ŒåŠ¨æ€å¼•å…¥çš„å›¾ç‰‡</li>\n<li>æŸä¸ªjsæ–‡ä»¶ä¸æƒ³å¼•å…¥åˆ°bundleä¸­</li>\n<li>ä¸€äº›ç¬¬ä¸‰æ–¹åº“å’Œwebpackä¸å…¼å®¹</li>\n</ul>\n<p>###å¦‚ä½•ä½¿ç”¨å…¨å±€å˜é‡</p>\n<p>å½“åœ¨jsä»£ç ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹çš„å…¨å±€å˜é‡æ—¶ï¼Œlinterä¼šæç¤ºï¼Œæ²¡æœ‰å®šä¹‰è¿‡çš„å˜é‡ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> $ = <span class=\"built_in\">window</span>.$</div></pre></td></tr></table></figure>\n<p>or</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$.extend( &#123;&#125; , &#123;a:<span class=\"number\">1</span>&#125; ) ; <span class=\"comment\">// eslint-disable-line</span></div></pre></td></tr></table></figure>\n<p>ä¸æ£€æµ‹å½“è¡Œä»£ç </p>\n<h3 id=\"è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç \"><a href=\"#è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç \" class=\"headerlink\" title=\"è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç \"></a>è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </h3><p><a href=\"https://github.com/prettier/prettier\" target=\"_blank\" rel=\"external\">prettier</a>æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ï¼ˆopinionatedï¼‰ä»£ç æ ¼å¼åŒ–å·¥å…·ã€‚ç”¨å®ƒï¼Œå¯ä»¥ç¡®ä¿åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œæœ‰ç»Ÿä¸€çš„ä»£ç é£æ ¼ã€‚ä½¿ç”¨æ–¹æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install --save husky lint-staged prettier</div></pre></td></tr></table></figure>\n<p>æˆ–è€…(  é€šè¿‡yarnå®‰è£…æœ‰å‘ï¼Œä¸‹é¢ä¼šè®²è§£ )</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yarn add husky lint-staged prettier</div></pre></td></tr></table></figure>\n<ul>\n<li><code>husky</code>ç›‘å¬hithooksçš„äº‹ä»¶ï¼Œç„¶åæ‰§è¡Œè‡ªå®šä¹‰çš„å‘½ä»¤</li>\n<li><code>lint-staged</code>å…è®¸æˆ‘ä»¬åœ¨gitä¸­å·²ç»æš‚å­˜çš„æ–‡ä»¶é‡Œï¼Œæ‰§è¡Œè„šæœ¬å‘½ä»¤</li>\n<li><code>prettier</code>åœ¨commitä¹‹å‰ï¼Œæ ¼å¼åŒ–æˆ‘ä»¬çš„ä»£ç </li>\n</ul>\n<p>ä¿®æ”¹<code>package.json</code>æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">  \"scripts\": &#123;</div><div class=\"line\">+   \"precommit\": \"lint-staged\",</div><div class=\"line\">    \"start\": \"react-scripts start\",</div><div class=\"line\">    \"build\": \"react-scripts build\",</div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">  \"dependencies\": &#123;</div><div class=\"line\">    // ...</div><div class=\"line\">  &#125;,</div><div class=\"line\">+ \"lint-staged\": &#123;</div><div class=\"line\">+   \"src/**/*.&#123;js,jsx,json,css&#125;\": [</div><div class=\"line\">+     \"prettier --single-quote --write\",</div><div class=\"line\">+     \"git add\"</div><div class=\"line\">+   ]</div><div class=\"line\">+ &#125;,</div><div class=\"line\">  \"scripts\": &#123;</div></pre></td></tr></table></figure>\n<p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬<code>git commit -m &quot;...&quot;</code>æ‰§è¡Œçš„æ—¶å€™ï¼Œ<code>Prettier</code>ä¼šè‡ªåŠ¨æ ¼å¼åŒ–å·²ç»ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œç„¶åæäº¤ã€‚</p>\n<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>./node_modules/.bin/prettier --single-quote --write &quot;src/**/*.{js,jsx}&quot;</code>æ¥æ ¼å¼åŒ–æ•´ä¸ªå·¥ç¨‹ã€‚</p>\n<p>é€šè¿‡<code>yarn</code>å®‰è£…ä¹‹åï¼Œå¯èƒ½ä¼šé‡åˆ°<code>git commit</code>ä¹‹åæ²¡æœ‰ä»»ä½•ååº”çš„å‘ï¼Œgoogleä¹‹åï¼Œå‘ç°<a href=\"https://github.com/typicode/husky/issues/81\" target=\"_blank\" rel=\"external\">how to setting up?</a></p>\n<p>æƒ…å†µä¸€æ ·ï¼ŒåŸæ¥é€šè¿‡<code>yarn</code>å®‰è£…çš„<code>husky</code>ï¼Œé»˜è®¤ä¸ä¼šæ‰§è¡Œhuskyçš„å®‰è£…ç¨‹åºã€‚æ‰€ä»¥è§£å†³æ–¹æ¡ˆå°±æ˜¯æ‰‹åŠ¨æ‰§è¡Œä¸€ä¸‹å®‰è£…ç¨‹åºã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">node node_modules/husky/bin/install.js</div></pre></td></tr></table></figure>\n<p>çœ‹åˆ°done,å°±è¯´æ˜è®¾ç½®gitçš„é’©å­æˆåŠŸäº†</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/WechatIMG39.jpeg\" alt=\"æ‰‹åŠ¨æ‰§è¡Œhuskyçš„å®‰è£…ç¨‹åº\"></p>\n<h3 id=\"åœ¨Visual-Studio-Codeä¸­Debugger\"><a href=\"#åœ¨Visual-Studio-Codeä¸­Debugger\" class=\"headerlink\" title=\"åœ¨Visual Studio Codeä¸­Debugger\"></a>åœ¨Visual Studio Codeä¸­Debugger</h3><p>é¦–å…ˆéœ€è¦å®‰è£…æœ€æ–°çš„<a href=\"https://code.visualstudio.com/\" target=\"_blank\" rel=\"external\">VS Code</a>å’Œ VS Code <a href=\"https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome\" target=\"_blank\" rel=\"external\">Chrome Debugger Extension</a> ã€‚</p>\n<p>ä¹‹ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º<code>.vscode</code>æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ–°å»º<code>launch.json</code>ï¼Œå°†å¦‚ä¸‹ä»£ç æ”¾å…¥å…¶ä¸­ï¼š</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"0.2.0\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"configurations\"</span>: [&#123;</div><div class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Chrome\"</span>,</div><div class=\"line\">    <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"chrome\"</span>,</div><div class=\"line\">    <span class=\"attr\">\"request\"</span>: <span class=\"string\">\"launch\"</span>,</div><div class=\"line\">    <span class=\"attr\">\"url\"</span>: <span class=\"string\">\"http://localhost:3000\"</span>,</div><div class=\"line\">    <span class=\"attr\">\"webRoot\"</span>: <span class=\"string\">\"$&#123;workspaceRoot&#125;/src\"</span>,</div><div class=\"line\">    <span class=\"attr\">\"sourceMapPathOverrides\"</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">\"webpack:///src/*\"</span>: <span class=\"string\">\"$&#123;webRoot&#125;/*\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>æ³¨æ„âš ï¸ï¼šå¦‚æœè‡ªå®šä¹‰ä¿®æ”¹äº†HOSTæˆ–è€…PORT,åˆ™éœ€è¦ä¿®æ”¹ç›¸åº”çš„åœ°å€</p>\n</blockquote>\n<p>é…ç½®å¥½äº†ä¹‹åï¼Œå¯åŠ¨<code>yarn start</code>ï¼Œåœ¨<code>VS Code</code>ä¸­æŒ‰<code>F5</code>æˆ–è€…æŒ‰ç»¿è‰²çš„debugæŒ‰é’®è¿›è¡Œdebugã€‚</p>\n<h3 id=\"è‡ªå®šä¹‰ç¯å¢ƒå˜é‡\"><a href=\"#è‡ªå®šä¹‰ç¯å¢ƒå˜é‡\" class=\"headerlink\" title=\"è‡ªå®šä¹‰ç¯å¢ƒå˜é‡\"></a>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</h3><p>ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ï¼Œæ ¹æ®æŸäº›æ¡ä»¶ï¼Œå±•ç¤ºä¸åŒçš„æ•°æ®ï¼Œæ¯”å¦‚ï¼ˆæ ¹æ®ç¯å¢ƒï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦mockæ•°æ®ï¼‰ï¼›æˆ–è€…ä½¿ç”¨ä¸€äº›ä¸åœ¨ç‰ˆæœ¬æ§åˆ¶åŠ›çš„æ•æ„Ÿä¿¡æ¯ï¼›å› ä¸ºæ˜¯åœ¨æ„å»ºæœŸé—´è¿è¡Œï¼Œæ‰€ä»¥webpackå¯ä»¥ç›´æ¥è¿›è¡Œä¸€äº›é€»è¾‘çš„åˆ¤æ–­ï¼Œä¸ä¼šå‡ºç°çš„ä»£ç ç›´æ¥ä¼šåˆ é™¤ï¼Œä¸ä¼šè¿›å…¥æ‰“åŒ…æ–‡ä»¶ã€‚</p>\n<p>åœ¨é¡¹ç›®å·¥ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ç¯å¢ƒå˜é‡ï¼Œå°±åƒå£°æ˜åœ¨jsæ–‡ä»¶çš„æ™®é€šå˜é‡ä¸€æ ·ã€‚é»˜è®¤çš„ï¼Œå†…ç½®äº†ä¸€ä¸ª<code>NODE_ENV</code>ç¯å¢ƒå˜é‡ï¼Œå…¶ä»–çš„ç¯å¢ƒå˜é‡ï¼Œè§„å®šå¿…é¡»è¦ä»¥<code>REACT_APP_</code>å¼€å¤´ï¼Œä»¥é˜²æ­¢å’Œå…¶ä»–ç¯å¢ƒå˜é‡å†²çªã€‚</p>\n<p>ç¯å¢ƒå˜é‡å¯ä»¥åªèƒ½åœ¨æ„å»ºæœŸé—´ä½¿ç”¨ï¼Œä¸èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åŠ¨æ€ä½¿ç”¨ã€‚å¦‚æœéœ€è¦åŠ¨æ€è·å–çš„è¯ï¼Œéœ€è¦æœåŠ¡å™¨ç«¯æ”¯æŒã€‚</p>\n<p>ç¯å¢ƒå˜é‡æ˜¯å®šä¹‰åœ¨<code>process.env</code>å¯¹è±¡ä¸Šçš„ï¼Œæ¯”å¦‚ï¼Œå®šä¹‰äº†ä¸€ä¸ª<code>REACT_APP_SECRET_CODE</code>å˜é‡ï¼Œéœ€è¦åœ¨jsæ–‡ä»¶ä¸­ä½¿ç”¨çš„è¯ï¼Œéœ€è¦ç”¨<code>process.env.REACT_APP_SECRET_CODE</code>æ¥è·å–ã€‚</p>\n<p>è¦è·å–å½“å‰çš„å¼€å‘ç¯å¢ƒï¼Œä½¿ç”¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">process.env.NODE_ENV</div></pre></td></tr></table></figure>\n<ul>\n<li><code>npm start</code> å¯åŠ¨çš„è¯ï¼Œè¿™ä¸ªå€¼æ°¸è¿œä¸º<code>development</code> </li>\n<li><code>npm test</code>å¯åŠ¨çš„è¯ï¼Œè¿™ä¸ªå€¼æ°¸è¿œä¸º<code>test</code></li>\n<li><code>npm run build</code>å¯åŠ¨çš„è¯ï¼Œè¿™ä¸ªå€¼æ°¸è¿œä¸º<code>production</code></li>\n</ul>\n<p><code>NODE_ENV</code>è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä¸å…è®¸æ‰‹åŠ¨ä¿®æ”¹,å³ä½¿ä¿®æ”¹äº†ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚</p>\n<p>jsä¸­ä½¿ç”¨</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</div><div class=\"line\">  analytics.disable();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>public/index.html</code>ä¸­ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>%REACT_APP_WEBSITE_NAME%<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>æ³¨æ„âš ï¸ï¼š</p>\n<ul>\n<li>é™¤äº†NODE_ENVå’ŒPUBLIC_URLè¿ä¸ªç¯å¢ƒå˜é‡ï¼Œå…¶ä»–ç¯å¢ƒå˜é‡éƒ½éœ€è¦ç”±REACT<em>APP</em>å¼€å¤´ã€‚</li>\n<li>ç¯å¢ƒå˜é‡åªæœ‰åœ¨æ„å»ºæœŸé—´æœ‰æ•ˆï¼Œè¿è¡ŒæœŸé—´æ— æ•ˆã€‚</li>\n</ul>\n</blockquote>\n<p>æœ‰ä¸¤ç§æ–¹å¼å®šä¹‰ç¯å¢ƒå˜é‡ï¼š</p>\n<ol>\n<li><p>shellå‘½ä»¤</p>\n<ul>\n<li>windows: <code>set REACT_APP_SECRET_CODE=abcdef&amp;&amp;npm start</code></li>\n<li>Linux,maxOs:<code>REACT_APP_SECRET_CODE=abcdef npm start</code></li>\n</ul>\n<p>è¿™ç§æ–¹å¼ï¼Œç¯å¢ƒå˜é‡åªæœ‰åœ¨shellå›è¯ä¸­æœ‰æ•ˆ</p>\n</li>\n<li><p><code>.env</code>æ–‡ä»¶</p>\n<p>ä¸ºäº†æ°¸ä¹…çš„ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œéœ€è¦åœ¨æ ¹ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª<code>.env</code>æ–‡ä»¶</p>\n<p>.envï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">REACT_APP_SECRET_CODE=abcdef</div></pre></td></tr></table></figure>\n<p>.envæ–‡ä»¶å¯ä»¥æ·»åŠ è¿›ç‰ˆæœ¬æ§åˆ¶ä¸­( <code>.gitignore</code>ä¸­é…ç½®<code>.env*.local</code> )ã€‚</p>\n<p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–‡ä»¶ï¼š</p>\n<ul>\n<li><code>.env</code>ï¼šé»˜è®¤</li>\n<li><code>.env.local</code>ï¼šæœ¬åœ°è¦†ç›–ï¼Œè¿™ä¸ªåœ¨é™¤äº†testæ„å»ºï¼Œå…¶ä»–æ‰€æœ‰æ„å»ºä¸­éƒ½æœ‰æ•ˆ</li>\n<li><code>.env.development</code>ï¼Œ<code>.env.test</code>ï¼Œ<code>.env.production</code>ï¼šæŒ‡å®šæ„å»ºç¯å¢ƒä¸­æœ‰æ•ˆ</li>\n<li><code>.env.development.local</code>, <code>.env.test.local</code>, <code>.env.production.local</code>ï¼šæœ¬åœ°è¦†ç›–æŒ‡å®šæ„å»ºç¯å¢ƒ</li>\n</ul>\n<p>è¿™äº›å®šä¹‰çš„ä¼˜å…ˆçº§( è¶Šé è¿‘å·¦è¾¹çš„ï¼Œä¼˜å…ˆçº§è¶Šé«˜ )ï¼š</p>\n<ul>\n<li><code>npm start</code>: <code>.env.development.local</code>, <code>.env.development</code>, <code>.env.local</code>, <code>.env</code></li>\n<li><code>npm run build</code>: <code>.env.production.local</code>, <code>.env.production</code>, <code>.env.local</code>, <code>.env</code></li>\n<li><code>npm test</code>: <code>.env.test.local</code>, <code>.env.test</code>, <code>.env</code> (æ³¨æ„âš ï¸ï¼šæ²¡æœ‰ <code>.env.local</code> )</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨\"><a href=\"#èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨\" class=\"headerlink\" title=\"èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨\"></a>èƒ½å¦ä½¿ç”¨ä¿®é¥°å™¨</h3><p>ä¸èƒ½ã€‚</p>\n<ul>\n<li>è¿™æ˜¯ä¸€ä¸ªè¯•éªŒæ€§çš„å»ºè®®ï¼Œå¯èƒ½ä¼šæ”¹å˜ã€‚</li>\n<li>ç›®å‰çš„è§„æ ¼ç‰ˆæœ¬æ²¡æœ‰å¾—åˆ°Babelå®˜æ–¹çš„æ”¯æŒã€‚</li>\n<li>å¦‚æœè§„èŒƒå‘ç”Ÿå˜åŒ–ï¼Œå°†æ— æ³•ç¼–å†™é‡æ„ä»¶codemodï¼Œå› ä¸ºFacebookå†…éƒ¨ä½¿ç”¨å®ƒä»¬ã€‚</li>\n</ul>\n<p>å¦‚æœéœ€è¦ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨<code>npm run eject</code>è‡ªå·±ç”¨ç¬¬ä¸‰æ–¹å·¥å…·é…ç½®</p>\n<h3 id=\"å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚\"><a href=\"#å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚\" class=\"headerlink\" title=\"å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚\"></a>å¼€å‘ç¯å¢ƒä¸­è½¬å‘APIè¯·æ±‚</h3><p>ä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒçš„é¡¹ç›®éƒ½æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">/             - é™æ€æœåŠ¡ï¼Œè¿”å›index.ftl</div><div class=\"line\">/todos        - é™æ€æœåŠ¡ï¼Œè¿”å›index.ftl</div><div class=\"line\">/api/todos    - æœåŠ¡å™¨æ‹¦æˆª /api/* å¼€å¤´çš„è¯·æ±‚ï¼Œåç«¯æ‰§è¡Œä¸šåŠ¡é€»è¾‘åè¿”å›</div></pre></td></tr></table></figure>\n<p>ä¸ºäº†å‘Šè¯‰å¼€å‘æœåŠ¡å™¨ï¼Œå¦‚ä½•é‡å®šå‘ä¸€ä¸ªæœªçŸ¥çš„æ¥å£è¯·æ±‚ï¼Œéœ€è¦åœ¨<code>package.json</code>ä¸­æ·»åŠ <code>proxy</code>å­—æ®µï¼Œæ¯”å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&quot;proxy&quot;:&quot;http://locahost:8080&quot;</div></pre></td></tr></table></figure>\n<p>å½“æˆ‘ä»¬å‘èµ·è¯·æ±‚ï¼Œæ¯”å¦‚<code>fetch(&#39;/api/todos&#39;)</code>ï¼Œå¼€å‘æœåŠ¡å™¨é¦–å…ˆç¡®è®¤ï¼Œå½“å‰ä¸æ˜¯ä¸€ä¸ªé™æ€èµ„æºï¼Œä¹‹åä¼šè½¬å‘è¿™ä¸ªè¯·æ±‚åˆ°<code>http://localhost:8080/api/todos</code>ï¼Œå¼€å‘æœåŠ¡å™¨åªä¼šå°è¯•è½¬å‘<code>Accept</code>å¤´éƒ¨ä¸æ˜¯<code>text/html</code>çš„è¯·æ±‚ã€‚</p>\n<p>è½¬å‘è¯·æ±‚å¯ä»¥é¿å…è·¨åŸŸè¯·æ±‚å¤±è´¥ï¼š</p>\n<p><code>Fetch API cannot load http://localhost:8080/api/todos. No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. Origin &#39;http://localhost:3000&#39; is therefore not allowed access. If an opaque response serves your needs, set the request&#39;s mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.</code></p>\n<p>å¯ä»¥æ‰©å±•<code>proxy</code>ï¼š</p>\n<ul>\n<li><p>è‡ªå®šä¹‰ä»£ç†è¯·æ±‚</p>\n<ul>\n<li><p>ä¿®æ”¹<code>package.json</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  // ...</div><div class=\"line\">  &quot;proxy&quot;: &#123;</div><div class=\"line\">    &quot;/api&quot;: &#123;</div><div class=\"line\">      &quot;target&quot;: &quot;&lt;url&gt;&quot;,</div><div class=\"line\">      &quot;ws&quot;: true</div><div class=\"line\">      // ...</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  // ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æ‰€æœ‰çš„<code>/api</code>å¼€å¤´çš„è¯·æ±‚éƒ½ä¼šè¢«ä»£ç†ï¼ŒåŒ…æ‹¬å¤´éƒ¨<code>Accept</code>æ˜¯<code>text/html</code>çš„è¯·æ±‚ï¼Œå’Œé»˜è®¤çš„é…ç½®<code>proxy</code>ä¸ä¸€æ ·ã€‚</p>\n</li>\n<li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  // ...</div><div class=\"line\">  &quot;proxy&quot;: &#123;</div><div class=\"line\">    // ä»£ç†ä»¥ /api å¼€å¤´çš„è¯·æ±‚</div><div class=\"line\">    &quot;/api&quot;: &#123;</div><div class=\"line\">      &quot;target&quot;: &quot;&lt;url_1&gt;&quot;,</div><div class=\"line\">      &quot;ws&quot;: true</div><div class=\"line\">      // ...</div><div class=\"line\">    &#125;,</div><div class=\"line\">    // ä»£ç†ä»¥ /foo å¼€å¤´çš„è¯·æ±‚</div><div class=\"line\">    &quot;/foo&quot;: &#123;</div><div class=\"line\">      &quot;target&quot;: &quot;&lt;url_2&gt;&quot;,</div><div class=\"line\">      &quot;ssl&quot;: true,</div><div class=\"line\">      &quot;pathRewrite&quot;: &#123;   // æ¥å£é‡å†™</div><div class=\"line\">        &quot;^/foo&quot;: &quot;/foo/beta&quot;</div><div class=\"line\">      &#125;</div><div class=\"line\">      // ...</div><div class=\"line\">    &#125;,</div><div class=\"line\">    // ä»£ç† /bar/abc.html è€Œä¸æ˜¯ /bar/sub/def.html</div><div class=\"line\">    &quot;/bar/[^/]*[.]html&quot;: &#123;</div><div class=\"line\">      &quot;target&quot;: &quot;&lt;url_3&gt;&quot;,</div><div class=\"line\">      // ...</div><div class=\"line\">    &#125;,</div><div class=\"line\">    // ä»£ç† /baz/abc.html å’Œ /baz/sub/def.html</div><div class=\"line\">    &quot;/baz/.*/.*[.]html&quot;: &#123;</div><div class=\"line\">      &quot;target&quot;: &quot;&lt;url_4&gt;&quot;</div><div class=\"line\">      // ...</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  // ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>æ”¯æŒWebSocketçš„ä»£ç†</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  // ...</div><div class=\"line\">  &quot;proxy&quot;: &#123;</div><div class=\"line\">    &quot;/socket&quot;: &#123;</div><div class=\"line\">      // ä»£ç†çš„ç›®æ ‡websocketæœåŠ¡å™¨</div><div class=\"line\">      &quot;target&quot;: &quot;ws://&lt;socket_url&gt;&quot;,</div><div class=\"line\">      // æ ‡è®°è¿™æ˜¯webSocketè¯·æ±‚</div><div class=\"line\">      &quot;ws&quot;: true</div><div class=\"line\">      // ...</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  // ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"å¯åŠ¨HTTPS\"><a href=\"#å¯åŠ¨HTTPS\" class=\"headerlink\" title=\"å¯åŠ¨HTTPS\"></a>å¯åŠ¨HTTPS</h3><ul>\n<li>Windowsï¼š<code>set HTTPS=true&amp;&amp;npm start</code></li>\n<li>Linux,macOSï¼š<code>HTTPS=true npm start</code></li>\n</ul>\n<h3 id=\"åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶\"><a href=\"#åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶\" class=\"headerlink\" title=\"åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶\"></a>åœ¨å•ç‹¬çš„ç¯å¢ƒä¸­ï¼ˆéš”ç¦»ï¼‰å¼€å‘ç»„ä»¶</h3><p>é€šå¸¸ï¼Œåœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œä½ æœ‰å¾ˆå¤šçš„UIç»„ä»¶ï¼Œè€Œä¸”æ¯ä¸ªç»„ä»¶éƒ½æœ‰å¾ˆå¤šä¸åŒçš„çŠ¶æ€ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„æŒ‰é’®ç»„ä»¶å¯èƒ½å…·æœ‰ä»¥ä¸‹çŠ¶æ€ï¼š</p>\n<ul>\n<li>æ­£å¸¸çš„çŠ¶æ€ä¸‹ï¼Œä»…å±•ç¤ºæ–‡æœ¬æ ‡ç­¾ã€‚</li>\n<li>æœ‰ç¦ç”¨çš„æ¨¡å¼</li>\n<li>æœ‰ä¸€ä¸ªloadingçŠ¶æ€</li>\n</ul>\n<p>é€šå¸¸ï¼Œå¦‚æœä¸å•ç‹¬è·‘å„ä¸ªçŠ¶æ€çš„ç»„ä»¶ï¼Œå¾ˆéš¾ä¸€æ¬¡æ€§çœ‹åˆ°è¿™äº›çŠ¶æ€ã€‚</p>\n<p><code>create-react-app</code>ä¸åŒ…å«è¿™äº›å¼€å‘å·¥å…·ï¼Œéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œæ¥å®ç°åŒæ—¶æŸ¥çœ‹ä¸€ä¸ªç»„ä»¶çš„æ‰€æœ‰çŠ¶æ€ã€‚å·¥å…·æœ‰ï¼š</p>\n<ul>\n<li><p><a href=\"https://storybook.js.org/\" target=\"_blank\" rel=\"external\">Storybook for React</a> (<a href=\"https://github.com/storybooks/storybook\" target=\"_blank\" rel=\"external\">source</a>) </p>\n<p>é¦–å…ˆï¼Œå…¨å±€å®‰è£…<code>@storybook/cli</code>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install -g @storybook/cli</div></pre></td></tr></table></figure>\n<p>ä¹‹åï¼Œåœ¨æ ¹ç›®å½•æ‰§è¡Œï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">getstorybook</div></pre></td></tr></table></figure>\n<p>ä¹‹åä¼šè‡ªåŠ¨å®‰è£…ä»¥æ¥ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">âœ  testReact git:(master) âœ— getstorybook</div><div class=\"line\"></div><div class=\"line\"> getstorybook - the simplest way to add a storybook to your project.</div><div class=\"line\"></div><div class=\"line\"> â€¢ Detecting project type. âœ“</div><div class=\"line\"> â€¢ Adding storybook support to your &quot;Create React App&quot; based project. âœ“</div><div class=\"line\"> â€¢ Preparing to install dependencies. âœ“</div><div class=\"line\"></div><div class=\"line\">yarn install v1.2.1</div><div class=\"line\">[1/4] ğŸ”  Resolving packages...</div><div class=\"line\">[2/4] ğŸšš  Fetching packages...</div><div class=\"line\">[3/4] ğŸ”—  Linking dependencies...</div><div class=\"line\">....</div><div class=\"line\"></div><div class=\"line\">âœ¨  Done in 21.32s.</div><div class=\"line\"></div><div class=\"line\"> â€¢ Installing dependencies. âœ“</div><div class=\"line\"></div><div class=\"line\">To run your storybook, type:</div><div class=\"line\"></div><div class=\"line\">   yarn run storybook</div><div class=\"line\"></div><div class=\"line\">For more information visit: https://storybook.js.org</div></pre></td></tr></table></figure>\n<p>æç¤ºä½ å¯ä»¥é€šè¿‡<code>yarn run storybook</code>æ¥å¯åŠ¨<code>storybook</code>ã€‚</p>\n</li>\n<li><p><a href=\"https://react-styleguidist.js.org/\" target=\"_blank\" rel=\"external\">React Styleguidist</a> (<a href=\"https://github.com/styleguidist/react-styleguidist\" target=\"_blank\" rel=\"external\">source</a>) </p>\n</li>\n</ul>\n<p>è¿™äº›å·¥å…·å¯ä»¥å•ç‹¬éƒ¨ç½²ï¼Œè¿™æ ·å­å›¢é˜Ÿä¸­çš„å…¶ä»–äººå°±å¯ä»¥ç›´æ¥æŸ¥çœ‹ç»„ä»¶çš„å„ä¸ªçŠ¶æ€ï¼Œè€Œä¸éœ€è¦å¯åŠ¨æœåŠ¡å™¨ã€‚</p>\n<h3 id=\"é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨\"><a href=\"#é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨\" class=\"headerlink\" title=\"é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨\"></a>é»˜è®¤æ”¯æŒæ¸è¿›å¼Webåº”ç”¨</h3><p> <code>create-react-app</code>åˆ›å»ºçš„é¡¹ç›®é»˜è®¤å°±ä¼šæ”¯æŒ [æ¸è¿›å¼webåº”ç”¨(PWA)] ï¼Œä¼šä½¿ç”¨ <a href=\"https://developers.google.com/web/fundamentals/getting-started/primers/service-workers\" target=\"_blank\" rel=\"external\">service workers</a> å®ç° <a href=\"https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#cache-falling-back-to-network\" target=\"_blank\" rel=\"external\">ç¼“å­˜ä¼˜å…ˆç­–ç•¥</a> æ¥ä¼˜åŒ–ç”¨æˆ·å†æ¬¡è®¿é—®åº”ç”¨çš„é€Ÿåº¦ã€‚ä»€ä¹ˆæ˜¯service workers?</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/service-workerss-falling-back-to-network.png\" alt=\"service-worker\"></p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/from-serviceWorkerwhats-new-in-create-react-app-03.png\" alt=\"from serviceWorker\"></p>\n<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®é»˜è®¤ä¸å¼€å¯è¿™ä¸ªç‰¹æ€§ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨å¼€å‘æ–°çš„åº”ç”¨ï¼Œæ¨èä½¿ç”¨ï¼Œç‰¹åˆ«åœ¨ç§»åŠ¨ç«¯Androidè®¾å¤‡ä¸Šï¼Œèƒ½åŠ é€ŸWeb Appçš„å¯åŠ¨ã€‚</p>\n<p>å·²ç¼“å­˜çš„é¡¹ç›®ï¼Œå¦‚æœæƒ³ç¦ç”¨<code>service-worker</code>ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨<code>unregister</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; unregister &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./registerServiceWorker'</span>;</div></pre></td></tr></table></figure>\n<h3 id=\"å®¢æˆ·ç«¯è·¯ç”±\"><a href=\"#å®¢æˆ·ç«¯è·¯ç”±\" class=\"headerlink\" title=\"å®¢æˆ·ç«¯è·¯ç”±\"></a>å®¢æˆ·ç«¯è·¯ç”±</h3><p>å¦‚æœå®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯HTML5çš„<code>pushState history API</code>ï¼Œè®¸å¤šé™æ€èµ„æºæ–‡ä»¶è¯·æ±‚å°†ä¼šå¤±è´¥ã€‚æ¯”å¦‚ï¼Œè¯·æ±‚é¡µé¢<code>/todos/42</code>ï¼Œå¼€å‘æœåŠ¡å™¨ä¼šè¿è¡Œå¾ˆå¥½ï¼Œä½†æ˜¯ç”Ÿäº§ç¯å¢ƒå°†ä¼šå¤±è´¥ã€‚å› ä¸ºåå°ç¨‹åºå¹¶æ²¡æœ‰é…ç½®<code>/todos/42</code>è¿™ä¸ªè·¯ç”±ï¼Œä¼šè¿”å›404ã€‚</p>\n<p>NODEçš„è§£å†³æ–¹æ¡ˆï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// app.get( '/api/*' , ()=&gt;&#123; // .... &#125; )</span></div><div class=\"line\">app.get(<span class=\"string\">'/*'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</div><div class=\"line\">   res.sendFile(path.join(__dirname, <span class=\"string\">'build'</span>, <span class=\"string\">'index.html'</span>));</div><div class=\"line\"> &#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„\"><a href=\"#æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„\" class=\"headerlink\" title=\"æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„\"></a>æ‰“åŒ…åˆ°ç›¸å¯¹è·¯å¾„</h3><p>é»˜è®¤çš„<code>create-react-app</code>ä¼šè®²æ‰“åŒ…çš„é»˜è®¤è·¯å¾„è®¾ç½®ä¸ºæœåŠ¡å™¨çš„æ ¹ç›®å½•<code>/</code>ã€‚</p>\n<p>è¦è¦†ç›–é»˜è®¤çš„è®¾ç½®ï¼Œéœ€è¦åœ¨<code>package.json</code>ä¸­ï¼Œè®¾ç½®<code>homepage</code>ï¼š</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">\"homepage\": \"http://kf.netease.com/index\",</div></pre></td></tr></table></figure>\n<p>è®¾ç½®ä¹‹åï¼Œ<code>create-react-app</code>å°±çŸ¥é“äº†é¡¹ç›®çš„æ ¹ç›®å½•æ˜¯ï¼š<code>/index</code>ã€‚</p>\n<p>ä¹‹åç”Ÿæˆçš„htmlæ–‡ä»¶ï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"shortcut icon\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/index/favicon.ico\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/index/static/css/main.6cfcf8f6.css\"</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/index/static/js/main.4dc8f75a.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>"},{"title":"åŸºäºè¿›ç¨‹å¯¹è±¡processå°†æ—¥å¿—ã€é”™è¯¯å†™å…¥ä¸åŒæ–‡ä»¶","url":"http://www.maotingfeng.me/2017/06/30/åŸºäºè¿›ç¨‹å¯¹è±¡processå°†æ—¥å¿—ã€é”™è¯¯å†™å…¥ä¸åŒæ–‡ä»¶/","content":"<p><a href=\"http://itbilu.com/nodejs/core/EyEJTxF8.html\" target=\"_blank\" rel=\"external\"><code>process</code></a>åŒæ ·æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œå®ƒæä¾›äº†å¯¹æ ‡å‡†æµçš„è®¿é—®æ¥å£ã€‚è€Œ<code>process.stdout</code>å’Œ<code>process.stderr</code>éƒ½æ˜¯<a href=\"http://itbilu.com/nodejs/core/VyJhveS7l.html\" target=\"_blank\" rel=\"external\">å¯å†™æµ</a>ï¼Œè¦å°†<code>process.stdout</code>å’Œ<code>process.stderr</code>ä¸­çš„æ•°æ®å†™å…¥ä¸åŒçš„æ–‡ä»¶ï¼Œé¦–å…ˆéœ€è¦å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª<a href=\"http://itbilu.com/nodejs/core/4JJTifN7l.html\" target=\"_blank\" rel=\"external\">å¯è¯»æµ</a>æˆ–<a href=\"http://itbilu.com/nodejs/core/VkE2Y0GQl.html#stream-duplex-transform\" target=\"_blank\" rel=\"external\">åŒå·¥æµ</a>ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> stream = <span class=\"built_in\">require</span>(<span class=\"string\">'stream'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> rawStdout = process.stdout;</div><div class=\"line\"><span class=\"keyword\">const</span> rawStderr = process.stderr;</div><div class=\"line\"><span class=\"comment\">// åˆ›å»ºä¸€ä¸ªPassThroughæµ</span></div><div class=\"line\"><span class=\"keyword\">const</span> newStdout = <span class=\"keyword\">new</span> stream.PassThrough();</div><div class=\"line\"><span class=\"keyword\">const</span> newStderr = <span class=\"keyword\">new</span> stream.PassThrough();</div><div class=\"line\"><span class=\"comment\">// é‡æ–°å®šä¹‰ process.stdout çš„Getter</span></div><div class=\"line\">process.__defineGetter__(<span class=\"string\">'stdout'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">// åŸæ ·è¿”å›  PassThrough</span></div><div class=\"line\">  <span class=\"keyword\">return</span> newStdout;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// é‡æ–°å®šä¹‰ process.stderr çš„Getter</span></div><div class=\"line\">process.__defineGetter__(<span class=\"string\">'stderr'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">// åŸæ ·è¿”å›  PassThrough</span></div><div class=\"line\">  <span class=\"keyword\">return</span> newStderr;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// å°† process.stdout ä¸­çš„æ•°æ®å†™å…¥ stdout.log æ–‡ä»¶</span></div><div class=\"line\">newStdout.pipe(fs.createWriteStream(<span class=\"string\">'./stdout.log'</span>));</div><div class=\"line\"><span class=\"comment\">// å°† process.stderr ä¸­çš„æ•°æ®å†™å…¥ stderr.log æ–‡ä»¶</span></div><div class=\"line\">newStderr.pipe(fs.createWriteStream(<span class=\"string\">'./stderr.log'</span>));</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'å‘ stdout ä¸­å†™å…¥æ•°æ®'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.error(<span class=\"string\">'å‘ stderr ä¸­å†™å…¥æ•°æ®'</span>);</div></pre></td></tr></table></figure>\n<p>æŒ‰è¿™ä¸ªæ¥å¯ä»¥å®ç°ä¸€ä¸ªåŸºç¡€ç‰ˆçš„æ—¥å¿—ï¼Œä¸è¿‡<code>fs.createWriteStream</code>æ–¹æ³•æœ€å¥½ç”¨è¿½åŠ çš„æ¨¡å¼<code>newStdout.pipe(fs.createWriteStream(&#39;./stdout.log&#39;,{&#39;flags&#39;:&#39;a&#39;}));</code>è¿™æ ·å­æ¯æ¬¡é‡å¯å°±ä¸ä¼šæŠŠä¹‹å‰çš„æ—¥å¿—è¦†ç›–æ‰äº†ã€‚æŒ‰ç›®å‰çš„ä»£ç ï¼Œå¯ä»¥å¾ˆå¥½çš„å·¥ä½œã€‚</p>\n<p>ç„¶åå½“æˆ‘çš„ç¨‹åºåœ¨expressä¸­è·‘çš„æ—¶å€™ï¼Œä¼šå‘ç°<code>console.log</code>è¾“å…¥çš„å†…å®¹ç›´æ¥åœ¨æ§åˆ¶å°ä¸­æ‰“å°ï¼Ÿè€Œå¯¹åº”çš„æ—¥å¿—æ–‡ä»¶<code>stdout.log</code>ä¸ºç©ºï¼Œæ€ä¹ˆè¿è¡Œä¸äº†äº†ï¼Ÿæˆ‘çš„æ—¥å¿—å‘¢ï¼Ÿ</p>\n<p>è¿½æŸ¥åŸå› ï¼Œå‘ç°æ˜¯ä»£ç å¼•å…¥äº†consolidateï¼ˆå¤šæ¨¡ç‰ˆå¼•æ“å…±å­˜<code>v0.14.1</code>ï¼‰æ¨¡å—å¼•å…¥é—®é¢˜ï¼Œç»§ç»­è¿½æŸ¥ï¼Œå‘ç°æ˜¯consolidateä¸­å¼•å…¥çš„bluebirdæ¨¡ç‰ˆçš„é—®é¢˜ï¼Œç»§ç»­è¿½æŸ¥ï¼Œå‘ç°æ˜¯bluebird.jså¼•å…¥çš„promise.jsçš„é—®é¢˜ï¼Œç»§ç»­è¿½æŸ¥ï¼Œå‘ç°æ˜¯promise.jså¼•å…¥çš„debuggability.jsçš„é—®é¢˜ã€‚debuggeråŠå¤©ï¼Œä»£ç ç»ˆäºåœç•™åœ¨äº†è®©æˆ‘æ„Ÿè§‰æ¯›éª¨æ‚šç„¶çš„åœ°æ–¹,ä»£ç ç¬¬802è¡Œï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"built_in\">console</span> !== <span class=\"string\">\"undefined\"</span> &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">console</span>.warn !== <span class=\"string\">\"undefined\"</span></div></pre></td></tr></table></figure>\n<p>ç»†çœ‹ä¸€ä¸‹ï¼Œä¸å°±æ˜¯åˆ¤æ–­consoleæ˜¯å¦ä¸ºundefinedå—ï¼Ÿæ¥ç€æ ¡éªŒconsole.warnæ˜¯å¦ä¸ºundefinedå—ï¼Ÿæ€ä¹ˆå›äº‹ï¼Ÿ</p>\n<p>å…ˆçœ‹çœ‹ä»£ç æ­£å¸¸çš„æƒ…å†µï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> stream_mao = <span class=\"built_in\">require</span>(<span class=\"string\">'stream'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> rawStdout = process.stdout;</div><div class=\"line\"><span class=\"keyword\">var</span> rawStderr = process.stderr;</div><div class=\"line\"><span class=\"comment\">// åˆ›å»ºä¸€ä¸ªPassThroughæµ</span></div><div class=\"line\"><span class=\"keyword\">var</span> newStdout = <span class=\"keyword\">new</span> stream_mao.PassThrough();</div><div class=\"line\"><span class=\"keyword\">var</span> newStderr = <span class=\"keyword\">new</span> stream_mao.PassThrough();</div><div class=\"line\"><span class=\"comment\">// é‡æ–°å®šä¹‰ process.stdout çš„Getter</span></div><div class=\"line\">process.__defineGetter__(<span class=\"string\">'stdout'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">// åŸæ ·è¿”å›  PassThrough</span></div><div class=\"line\">    <span class=\"keyword\">return</span> newStdout;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// é‡æ–°å®šä¹‰ process.stderr çš„Getter</span></div><div class=\"line\">process.__defineGetter__(<span class=\"string\">'stderr'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">// åŸæ ·è¿”å›  PassThrough</span></div><div class=\"line\">    <span class=\"keyword\">return</span> newStderr;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// å°† process.stdout ä¸­çš„æ•°æ®å†™å…¥ stdout.log æ–‡ä»¶</span></div><div class=\"line\">newStdout.pipe(fs.createWriteStream( process.cwd() + <span class=\"string\">'/stdout.log'</span>,&#123;<span class=\"string\">'flags'</span>:<span class=\"string\">'a'</span>&#125;));</div><div class=\"line\"><span class=\"comment\">// å°† process.stderr ä¸­çš„æ•°æ®å†™å…¥ stderr.log æ–‡ä»¶</span></div><div class=\"line\">newStderr.pipe(fs.createWriteStream(process.cwd() + <span class=\"string\">'/stderr.log'</span>,&#123;<span class=\"string\">'flags'</span>:<span class=\"string\">'a'</span>&#125;));</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'å‘ stdout ä¸­å†™å…¥æ•°æ®'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.error(<span class=\"string\">'å‘ stderr ä¸­å†™å…¥æ•°æ®'</span>);</div></pre></td></tr></table></figure>\n<p>æ§åˆ¶å°æµ‹è¯•ï¼š</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/process_stdout_success.png\" alt=\"process_stdout_successæ§åˆ¶å°æ‰“å°\"></p>\n<p>æ—¥å¿—å†™å…¥æˆåŠŸã€‚</p>\n<p>æ¥ç€çœ‹çœ‹æ·»åŠ é‚£å¥é€»è¾‘è¿ç®—ç¬¦ä»£ç ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> stream_mao = <span class=\"built_in\">require</span>(<span class=\"string\">'stream'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> rawStdout = process.stdout;</div><div class=\"line\"><span class=\"keyword\">var</span> rawStderr = process.stderr;</div><div class=\"line\"><span class=\"comment\">// åˆ›å»ºä¸€ä¸ªPassThroughæµ</span></div><div class=\"line\"><span class=\"keyword\">var</span> newStdout = <span class=\"keyword\">new</span> stream_mao.PassThrough();</div><div class=\"line\"><span class=\"keyword\">var</span> newStderr = <span class=\"keyword\">new</span> stream_mao.PassThrough();</div><div class=\"line\"><span class=\"comment\">// å°±æ·»åŠ äº†è¿™è¡Œä»£ç ï¼Œå…¶ä»–ä¸å˜</span></div><div class=\"line\"><span class=\"keyword\">typeof</span> <span class=\"built_in\">console</span> !== <span class=\"string\">\"undefined\"</span> &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">console</span>.warn !== <span class=\"string\">\"undefined\"</span>;</div><div class=\"line\"><span class=\"comment\">// é‡æ–°å®šä¹‰ process.stdout çš„Getter</span></div><div class=\"line\">process.__defineGetter__(<span class=\"string\">'stdout'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">// åŸæ ·è¿”å›  PassThrough</span></div><div class=\"line\">    <span class=\"keyword\">return</span> newStdout;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// é‡æ–°å®šä¹‰ process.stderr çš„Getter</span></div><div class=\"line\">process.__defineGetter__(<span class=\"string\">'stderr'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">// åŸæ ·è¿”å›  PassThrough</span></div><div class=\"line\">    <span class=\"keyword\">return</span> newStderr;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// å°† process.stdout ä¸­çš„æ•°æ®å†™å…¥ stdout.log æ–‡ä»¶</span></div><div class=\"line\">newStdout.pipe(fs.createWriteStream( process.cwd() + <span class=\"string\">'/stdout.log'</span>,&#123;<span class=\"string\">'flags'</span>:<span class=\"string\">'a'</span>&#125;));</div><div class=\"line\"><span class=\"comment\">// å°† process.stderr ä¸­çš„æ•°æ®å†™å…¥ stderr.log æ–‡ä»¶</span></div><div class=\"line\">newStderr.pipe(fs.createWriteStream(process.cwd() + <span class=\"string\">'/stderr.log'</span>,&#123;<span class=\"string\">'flags'</span>:<span class=\"string\">'a'</span>&#125;));</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'å‘ stdout ä¸­å†™å…¥æ•°æ®'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.error(<span class=\"string\">'å‘ stderr ä¸­å†™å…¥æ•°æ®'</span>);</div></pre></td></tr></table></figure>\n<p>æ§åˆ¶å°æµ‹è¯•ï¼š</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/process_stdout_error.png\" alt=\"process_stdout_erroræ§åˆ¶å°æ‰“å°\"></p>\n<p>ä¹Ÿå°±æ˜¯æ—¥å¿—æ–‡ä»¶æ²¡å†™å…¥ã€‚</p>\n<p>æˆ‘å°±åœ¨ç¬¬8è¡ŒåŠ äº†è¿™å¥è¯¡å¼‚çš„ä»£ç ï¼Œæˆ‘çš„ä¸–ç•Œå°±å´©æºƒäº†ã€‚ã€‚ã€‚</p>\n<p>æˆ‘çš„nodeç‰ˆæœ¬æ˜¯ï¼š<code>v0.12.7</code>ï¼Œåº”è¯¥æ˜¯ç³»ç»Ÿé—®é¢˜ï¼Œä¸æ˜¯å¼•å…¥çš„ç¬¬ä¸‰æ–¹æ¨¡å—çš„é—®é¢˜ï¼Œæœ‰è§£å†³æ–¹æ¡ˆçš„å¯ä»¥å…±äº«</p>\n"},{"title":"koaç®€ä»‹","url":"http://www.maotingfeng.me/2017/03/26/koaç®€ä»‹/","content":"<h2 id=\"koaç®€ä»‹\"><a href=\"#koaç®€ä»‹\" class=\"headerlink\" title=\"koaç®€ä»‹\"></a>koaç®€ä»‹</h2><p>åˆè¯•koaï¼Œçœ‹äº†ä¸‹å®˜ç½‘ä»‹ç»ï¼Œè®°å½•ä¸€ä¸‹å­¦ä¹ å¿ƒå¾—ã€‚</p>\n<p>koaæ˜¯è‡´åŠ›äºæˆä¸ºä¸€ä¸ªæ›´å°ã€æ›´å¥å£®ã€æ›´å¯Œæœ‰è¡¨ç°åŠ›çš„ Web æ¡†æ¶ã€‚è·Ÿexpressç›¸æ¯”ï¼Œæœ€æ ¸å¿ƒçš„éƒ¨åˆ†å°±æ˜¯ç”¨æ–°çš„async function è§£å†³äº†å›è°ƒå‡½æ•°çš„å™©æ¢¦ã€‚</p>\n<p>æ¯”å¦‚ç”¨expresså®ç°ä¸€ä¸ªè®¡ç®—ç¨‹åºå¤„ç†æ—¶é—´çš„åŠŸèƒ½ï¼Œç”¨expresså†™æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> app = express();</div><div class=\"line\">app.use( <span class=\"string\">'/'</span> , <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> req , res , next </span>)</span>&#123;</div><div class=\"line\">  req.startTime = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() ;</div><div class=\"line\">  next() ;</div><div class=\"line\">&#125; ) ;</div><div class=\"line\"></div><div class=\"line\">app.use( <span class=\"string\">'/'</span> , <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> req , res , next </span>)</span>&#123;</div><div class=\"line\">  req.endTime = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() ;</div><div class=\"line\">  res.end( <span class=\"string\">'time diff: '</span> + ( req.startTime - req.endTime ) + <span class=\"string\">'ms'</span> ) ;</div><div class=\"line\">&#125; ) ;</div></pre></td></tr></table></figure>\n<p>expressçš„ä¸­é—´ä»¶å½¢å¼ï¼Œéœ€è¦æ¯ä¸ªä¸­é—´ä»¶æ‰‹åŠ¨è°ƒç”¨nextå‡½æ•°ï¼ŒæŠŠæ‰§è¡Œæƒé™ç§»äº¤åˆ°ä¸‹ä¸€ä¸ªæ³¨å†Œçš„ä¸­é—´ä»¶ã€‚</p>\n<p>å¦‚æœç”¨koaæ¥å†™ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Koa = <span class=\"built_in\">require</span>( <span class=\"string\">'koa'</span> ) ;</div><div class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> Koa();</div><div class=\"line\">app.use(<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ctx, next</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> startTime = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">  <span class=\"keyword\">await</span> next();</div><div class=\"line\">  <span class=\"keyword\">const</span> timeDiff = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() - startTime;</div><div class=\"line\">  ctx.body = <span class=\"string\">`time diff: <span class=\"subst\">$&#123;timeDiff&#125;</span>ms`</span>;</div><div class=\"line\">&#125;);</div><div class=\"line\">app.listen(<span class=\"number\">3001</span>);</div></pre></td></tr></table></figure>\n<p>ç›¸å¯¹è€Œè¨€ï¼Œä»£ç ç®€å•äº†å¾ˆå¤šã€‚æƒ³è¦å­¦ä¹ koaï¼Œå…ˆè¦å­¦ä¹ ä¸€ä¸‹åŸºç¡€çŸ¥è¯†ç‚¹ï¼Œasyncå‡½æ•°ã€‚</p>\n<h3 id=\"koaçš„ä»£ç çº§è”\"><a href=\"#koaçš„ä»£ç çº§è”\" class=\"headerlink\" title=\"koaçš„ä»£ç çº§è”\"></a>koaçš„ä»£ç çº§è”</h3><p>ä»£ç çº§è”æ˜¯é€šè¿‡asyncå‡½æ•°å®ç°çš„ï¼ˆKoa v2.x ç§»é™¤äº†å†…ç½®çš„ Generator æ”¯æŒï¼Œä½¿ç”¨ async å‡½æ•°æ›¿ä»£ï¼‰ï¼Œå…ˆç®€å•ä»‹ç»ä¸‹asyncå‡½æ•°ï¼Œè¯­æ³•å¾ˆç®€å•:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncFunc</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">// å‡½æ•°ä½“</span></div><div class=\"line\">  <span class=\"keyword\">var</span> data = <span class=\"keyword\">await</span> fetchSomeThing() ;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>asyncå‡½æ•°è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨thenæ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚å½“å‡½æ•°ä½“æ‰§è¡Œçš„æ—¶å€™ï¼Œé‡åˆ°awaitçš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œåé¢çš„è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼å¯ä»¥æ˜¯åŸå§‹å€¼ç±»å‹æˆ–è€…è¿”å›Promiseå¯¹è±¡ã€‚å¦‚æœæ˜¯ä¸ªå¼‚æ­¥è¡¨è¾¾å¼çš„è¯ï¼Œjavascriptä¼šä¸­æ–­æœ¬æ¬¡æ‰§è¡Œï¼Œæ‰§è¡Œå…¶ä»–å†…å®¹ã€‚ç­‰å¼‚æ­¥æ‰§è¡Œç»“æŸï¼Œä¼šè¿”å›åˆ°ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚</p>\n<p>æ¯”å¦‚ï¼Œæˆ‘æƒ³ä¸­æ–­ä¸¤ç§’é’Ÿï¼Œè¿”å›ä¸€ä¸ªhello worldï¼ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">delayTwoSeconds</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"keyword\">await</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>( ( resolve , reject )=&gt;&#123;</div><div class=\"line\">        setTimeout( resolve.bind(<span class=\"literal\">null</span>,<span class=\"string\">'hello world!'</span>) , <span class=\"number\">2000</span> ) ;</div><div class=\"line\">    &#125; ) ;</div><div class=\"line\">    <span class=\"keyword\">return</span> result</div><div class=\"line\">&#125;</div><div class=\"line\">delayTwoSeconds().then( data=&gt;<span class=\"built_in\">console</span>.log( data ) ) ;  <span class=\"comment\">// 2måï¼Œæ§åˆ¶å°ï¼šhello world!</span></div></pre></td></tr></table></figure>\n<p>å½“æ‰§è¡Œçš„æ—¶å€™ï¼Œresultå¹¶ä¸ä¼šç«‹å³è¿”å›ï¼Œè€Œæ˜¯ç­‰å¾…2ç§’ï¼Œç„¶åè¿”å›ã€‚</p>\n<p>ç”¨asyncå‡½æ•°æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>\n<ul>\n<li>ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ‰§è¡Œè¿‡ç¨‹æ˜äº†ï¼Œé¿å…äº†å›è°ƒåµŒå¥—çš„ä»£ç </li>\n<li>å‡½æ•°çš„ä½œç”¨åŸŸå¾—ä»¥ä¿å­˜ï¼Œä¸å†ç”¨callback( data ) å‡½æ•°ä¼ å‚</li>\n<li>æ˜“äºé”™è¯¯çš„æ•è·</li>\n</ul>\n<p>ç¬¬ä¸‰ç‚¹,æ€ä¹ˆé”™è¯¯æ•è·ï¼Ÿå¹³å¸¸å¦‚æœå¼‚æ­¥å›è°ƒå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨callbackä¸­ï¼Œæ•è·é”™è¯¯ , å› ä¸ºå½“æ‰§è¡Œå¼‚æ­¥æ“ä½œçš„æ—¶å€™ï¼Œå¼‚æ­¥å‡½æ•°ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œjavascriptæ‰§è¡Œå…¶ä»–å†…å®¹çš„æ—¶å€™ï¼Œå‡½æ•°çš„èµ„æºä¼šè¢«åƒåœ¾å›æ”¶ï¼Œç­‰äº‹ä»¶æœºåˆ¶é€šçŸ¥å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼ŒåŸæ¥çš„èµ„æºæ—©å·²ä¸åœ¨ï¼Œæ‰€ä»¥å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œä¹Ÿæ˜¯åªèƒ½é€šè¿‡å‡½æ•°ä¼ å‚ã€‚å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> callback = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> error , data </span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>( error ) &#123; <span class=\"keyword\">throw</span> error ; &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>è€Œä½¿ç”¨asyncå‡½æ•°ï¼Œå› ä¸ºå‡½æ•°åªæ˜¯æš‚åœæ‰§è¡Œï¼Œé‡Œé¢çš„å˜é‡å¹¶ä¸ä¼šè¢«å›æ”¶ï¼Œæ‰€ä»¥å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚</p>\n<p>koaåˆ©ç”¨äº†asyncçš„ç‰¹æ€§ï¼Œè®©åµŒå¥—ä¸­é—´ä»¶æ‰§è¡Œä¹‹åï¼Œä¸ç”¨é€šè¿‡ç»‘å®šå…¨å±€å˜é‡ï¼Œæˆ–è€…åœ¨<code>requestå¯¹è±¡</code>ä¸Šç»‘å®šå±æ€§æ¥ä¼ å‚äº†ï¼Œç›´æ¥åœ¨å‡½æ•°ä½“é‡Œé¢ç”¨ä¹‹å‰å®šä¹‰çš„å˜é‡ï¼Œæ–¹ä¾¿äº†å¾ˆå¤šã€‚koaçš„asyncè°ƒç”¨æœºåˆ¶çš„ä»‹ç»å®Œæ¯•ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨apiçš„è¯´æ˜ã€‚</p>\n<h3 id=\"Koaé…ç½®\"><a href=\"#Koaé…ç½®\" class=\"headerlink\" title=\"Koaé…ç½®\"></a>Koaé…ç½®</h3><p>koaçš„åº”ç”¨ç¨‹åºé…ç½®é»˜è®¤åœ¨appå®ä¾‹ä¸Šï¼Œç›®å‰æ”¯æŒ</p>\n<ul>\n<li>app.env é»˜è®¤ä¸º<code>NODE_ENV</code>ï¼Œå¦‚æœæ²¡æœ‰é…ç½®çš„è¯ï¼Œä¸º<code>&quot;development&quot;</code></li>\n<li>app.proxy å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œæ”¯æŒ X-Forwarded-Host</li>\n<li>app.subdomainOffset å­åŸŸååç§»é‡ï¼Œå±æ€§é»˜è®¤ä¸º2ï¼Œå¦‚åŸŸåâ€œtobi.ferrets.example.comâ€ æ‰§è¡Œï¼šctx.subdomains è¿”å›[â€œferretsâ€, â€œtobiâ€]ï¼Œå¦‚æœapp.subdomainOffsetè®¾ä¸º3ï¼Œåˆ™è¿”å›[â€œtobiâ€]ã€‚</li>\n</ul>\n<h3 id=\"app-listen-â€¦-ç›‘å¬ç«¯å£\"><a href=\"#app-listen-â€¦-ç›‘å¬ç«¯å£\" class=\"headerlink\" title=\"app.listen( â€¦ )ç›‘å¬ç«¯å£\"></a>app.listen( â€¦ )ç›‘å¬ç«¯å£</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Koa = <span class=\"built_in\">require</span>(<span class=\"string\">'koa'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> Koa();</div><div class=\"line\">app.listen(<span class=\"number\">3000</span>);  <span class=\"comment\">// å¯åŠ¨3000ç«¯å£</span></div><div class=\"line\"><span class=\"comment\">// ç­‰ä»·äº</span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> Koa = <span class=\"built_in\">require</span>(<span class=\"string\">'koa'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> Koa();</div><div class=\"line\">http.createServer(app.callback()).listen(<span class=\"number\">3000</span>);</div></pre></td></tr></table></figure>\n<p>è¿˜æ˜¯ä½¿ç”¨äº†nodeå†…ç½®çš„httpæ¨¡å—</p>\n<h3 id=\"app-callback\"><a href=\"#app-callback\" class=\"headerlink\" title=\"app.callback()\"></a>app.callback()</h3><p>æ‰§è¡Œè¿™ä¸ªå‡½æ•°è¿”å›çš„å‡½æ•°å¯ä»¥ç”¨äºå¤„ç†<code>http.createServer()</code>çš„è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªå›è°ƒå‡½æ•°å°†ä½ çš„koaåº”ç”¨æŒ‚è½½åœ¨expressæˆ–è€…Connectåº”ç”¨ä¸­ã€‚</p>\n<h3 id=\"app-use-middleWare\"><a href=\"#app-use-middleWare\" class=\"headerlink\" title=\"app.use(middleWare)\"></a>app.use(middleWare)</h3><p>koaä¸­è¿™ä¸ªæ–¹æ³•å¾ˆå¸¸ç”¨äº†ï¼Œå°†ç»™å®šçš„middleWareå½“ä½œä¸­é—´ä»¶åŠ è½½åˆ°åº”ç”¨ä¸­ã€‚<code>middleWare</code>æ¥å—ä¸¤ä¸ªå‚æ•°<code>ctx</code>å’Œ<code>next</code>,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„å›è°ƒã€‚</p>\n<h3 id=\"app-context\"><a href=\"#app-context\" class=\"headerlink\" title=\"app.context\"></a>app.context</h3><p><code>app.context</code>æ˜¯middleWareç¬¬ä¸€ä¸ªå‚æ•°ctxå®ä¾‹çš„åŸå‹ã€‚æƒ³è¦ç»™ctxæ·»åŠ å±æ€§ï¼Œå¯ä»¥ç›´æ¥ç¼–è¾‘app.contextã€‚å¯¹äºåœ¨åº”ç”¨ç¨‹åºä¸­ç»å¸¸ä½¿ç”¨çš„å±æ€§æˆ–è€…å‡½æ•°ï¼Œè¿™ä¸ªapiéå¸¸æœ‰ç”¨ã€‚ä¸è¿‡ä¸å»ºè®®è¿‡åº¦ä¾èµ–ï¼Œæ¯•ç«Ÿç±»ä¼¼å…¨å±€å˜é‡ï¼Œè€Œå…¨å±€å˜é‡æ˜¯evilçš„ğŸ˜ˆã€‚å®˜ç½‘ç»™çš„ä¾‹å­ï¼Œæ¯”å¦‚æ•°æ®åº“å®ä¾‹å¯ä»¥æŒ‚åœ¨åˆ°ctxä¸Šã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">app.context.db = db();</div><div class=\"line\">app.use(<span class=\"keyword\">async</span> (ctx) =&gt; &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(ctx.db);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"é”™è¯¯å¤„ç†\"><a href=\"#é”™è¯¯å¤„ç†\" class=\"headerlink\" title=\"é”™è¯¯å¤„ç†\"></a>é”™è¯¯å¤„ç†</h3><p>é»˜è®¤æ‰€æœ‰çš„é”™è¯¯éƒ½é€šè¿‡<code>stderr</code>è¾“å‡ºï¼Œå¦‚æœè®¾ç½®äº†<code>app.silent</code>ä¸ºtrueçš„è¯ï¼Œå°±ä¸è¾“å‡ºã€‚å½“err.statusæ˜¯404æˆ–è€…err.exposeç­‰äºtrueï¼Œåˆ™é»˜è®¤ä¸è¾“å‡ºã€‚å¦‚æœæƒ³è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘, å¯ä»¥å®šä¹‰ä¸€ä¸ªã€Œé”™è¯¯äº‹ä»¶ã€æ¥ç›‘å¬ Koa app ä¸­å‘ç”Ÿçš„é”™è¯¯ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">app.on(<span class=\"string\">'error'</span>, err =&gt;</div><div class=\"line\">  log.error(<span class=\"string\">'server error'</span>, err)</div><div class=\"line\">);</div></pre></td></tr></table></figure>\n<p>å½“ req/res å‘¨æœŸä¸­å‡ºç°ä»»ä½•é”™è¯¯ä¸”æ— æ³•å“åº”å®¢æˆ·ç«¯æ—¶ï¼ŒKoa ä¼šæŠŠ <code>Context</code>(ä¸Šä¸‹æ–‡) å®ä¾‹ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ error äº‹ä»¶ã€‚å½“é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ•°æ®è¿”å›å®¢æˆ·ç«¯ï¼Œkoaä¼šå“åº”500 å†…éƒ¨é”™è¯¯ç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”ä¼šè§¦å‘app-levelçš„<code>error</code>äº‹ä»¶ï¼Œå¯ä»¥ç”¨æ¥è®°å½•æ—¥å¿—ã€‚</p>\n<h2 id=\"Context\"><a href=\"#Context\" class=\"headerlink\" title=\"Context\"></a>Context</h2><p>ä¸€ä¸ªkoaçš„Contextå°è£…äº†nodeåŸç”Ÿçš„requestå’Œresponseå¯¹è±¡ï¼Œæä¾›äº†ä¸€äº›æ–¹ä¾¿çš„APIä¾›åº”ç”¨ç¨‹åºå¼€å‘ã€‚</p>\n<p>éšç€æ¯ä¸ªrequestè¯·æ±‚ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Contextï¼Œå½“ä¸­é—´ä»¶è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šè¢«ä¼šä¼ åˆ°ç»™æ¯ä¸ªä¸­é—´ä»¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">app.use(<span class=\"keyword\">async</span> (ctx, next) =&gt; &#123;</div><div class=\"line\">  ctx; <span class=\"comment\">// is the Context</span></div><div class=\"line\">  ctx.request; <span class=\"comment\">// is a koa Request</span></div><div class=\"line\">  ctx.response; <span class=\"comment\">// is a koa Response</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>ctxä¸­çš„å¾ˆå¤šè®¿é—®å™¨å’Œæ–¹æ³•ï¼Œç®€å•ä»£ç†äº†ctx.requestæˆ–è€…ctx.resposne ï¼Œå› ä¸ºæœ‰äº›é«˜é¢‘APIï¼Œç›´æ¥ä»£ç†äº†æ–¹ä¾¿ä½¿ç”¨ã€‚æ¯”å¦‚<code>ctx.type</code>å’Œ<code>ctx.length</code>ä»£ç†äº†responseå¯¹è±¡,<code>ctx.path</code>å’Œ<code>ctx.method</code>ä»£ç†äº†requestå¯¹è±¡ã€‚</p>\n<ul>\n<li><p>ctx.req nodeçš„requestå¯¹è±¡</p>\n</li>\n<li><p>ctx.res nodeçš„resposneå¯¹è±¡</p>\n<p>   é¿å¼€koaï¼Œè€Œç›´æ¥æ“ä½œnodeåº•å±‚çš„responseå¯¹è±¡è¦é¿å…ã€‚æ¯”å¦‚</p>\n<ul>\n<li>res.statusCode</li>\n<li>res.writeHead()</li>\n<li>res.write()</li>\n<li>res.end()</li>\n</ul>\n</li>\n<li><p>ctx.request koaçš„requestå¯¹è±¡</p>\n</li>\n<li><p>cox.response koaçš„responseå¯¹è±¡</p>\n</li>\n<li><p>ctx.state koaæ¨èæŒ‚è½½æ•°æ®çš„åœ°æ–¹ï¼Œæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ctx.state.user = <span class=\"keyword\">await</span> User.find(id) ;</div></pre></td></tr></table></figure>\n</li>\n<li><p>ctx.app åº”ç”¨ç¨‹åºå®ä¾‹</p>\n</li>\n<li><p>cox.throw è‡ªå®šä¹‰çŠ¶æ€ç å“åº”çš„æ–¹æ³•ã€‚æ¯”å¦‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">ctx.throw(403);</div><div class=\"line\">ctx.throw(&apos;name required&apos;, 400);</div><div class=\"line\">ctx.throw(400, &apos;name required&apos;);</div><div class=\"line\">ctx.throw(&apos;something exploded&apos;);</div></pre></td></tr></table></figure>\n</li>\n<li><p>cox.respond å¦‚ä¸æƒ³ä½¿ç”¨koaå†…ç½®çš„responseå¤„ç†æ–¹æ³•ï¼Œå¯ä»¥è®¾ç½®this.respond=falseï¼Œè·³è¿‡koaé’ˆå¯¹responseçš„é¢„å¤„ç†ï¼Œä½ å¯ä»¥è‡ªå·±è®¾ç½®responseå¯¹è±¡ã€‚ç®—æ˜¯ä¸€ç§hackæ–¹æ³•å§ï¼Œä¸€èˆ¬ä¸å¸¸ç”¨</p>\n<p>â€¦â€¦</p>\n</li>\n</ul>\n<h3 id=\"Request\"><a href=\"#Request\" class=\"headerlink\" title=\"Request\"></a>Request</h3><p>ç®€å•ä»‹ç»ä¸€ä¸‹koaçš„requestå¯¹è±¡ï¼Œä¸€äº›å¸¸ç”¨çš„API</p>\n<ul>\n<li>request.header è¯·æ±‚å¤´</li>\n<li>request.method è¯·æ±‚æ–¹æ³•</li>\n<li>request.length è¯·æ±‚å¤´çš„Context-Length</li>\n<li>request.originalUrl è·å–requestçš„originalUrl</li>\n<li>request.origin origin URLï¼ŒåŒ…æ‹¬ï¼Œprotocolå’Œhost</li>\n<li>request.path è¯·æ±‚è·¯å¾„</li>\n<li>request.querystring æŸ¥è¯¢å‚æ•° , ä¸åŒ…æ‹¬ï¼Ÿ</li>\n<li>request.search åŸå§‹çš„query stringï¼ŒåŒ…æ‹¬ï¼Ÿ</li>\n<li>request.query   ç»“æ„åŒ–äº†çš„æŸ¥è¯¢å‚æ•°</li>\n</ul>\n<p>â€¦.</p>\n<h3 id=\"Response\"><a href=\"#Response\" class=\"headerlink\" title=\"Response\"></a>Response</h3><p>ç®€å•ä»‹ç»ä¸€ä¸‹koaçš„responseå¯¹è±¡ï¼Œä¸€äº›å¸¸ç”¨çš„API</p>\n<ul>\n<li>response.header  å“åº”å¯¹è±¡</li>\n<li>response.status   å“åº”çŠ¶æ€ï¼Œé»˜è®¤æ— å€¼</li>\n<li>response.message  å“åº”æ¶ˆæ¯ï¼Œä¸€èˆ¬å’ŒçŠ¶æ€ç ä¸€èµ·è®¾ç½®</li>\n<li>response.length  è®¾ç½®å“åº”çš„å¤§å°</li>\n<li>response.body   è¿”å›å“åº”å†…å®¹</li>\n<li>response.get(field)   è·å–å“åº”çš„å¤´éƒ¨å­—æ®µ</li>\n<li>response.set(field,value)  è®¾ç½®å“åº”å¤´çš„å†…å®¹</li>\n<li>response.append(field,value)  è¿½åŠ é¢å¤–çš„å¤´éƒ¨å­—æ®µå†…å®¹</li>\n<li>response.redirect( url , [alt] )  é‡å®šå‘ï¼Œå¯ä»¥è‡ªå®šâ€™backâ€™ï¼Œèƒ½æä¾›Referreræ”¯æŒï¼Œæ²¡æœ‰æ—¶ï¼Œå¯ç”¨altæŒ‡å®š</li>\n<li>response.lastModified  å¦‚æœå“åº”å¤´éƒ¨åŒ…å«Last-Modifiedï¼Œåˆ™ç”¨Dateå¯¹è±¡è¿”å›</li>\n</ul>\n<p>â€¦..</p>\n<p>å…·ä½“APIå¯ä»¥æŸ¥çœ‹æœ¬æ–‡åé¢çš„å®˜ç½‘é“¾æ¥ã€‚</p>\n<p>æœ€åä»‹ç»ä¸€ä¸ªdebugæ¨¡å—çš„ä½¿ç”¨</p>\n<p>é€šå¸¸æˆ‘ä»¬å¼€å‘ç¯å¢ƒéœ€è¦ä½¿ç”¨consoleæ¥æ‰“å°è°ƒè¯•ä¸€äº›å†…å®¹ï¼Œä½†æ˜¯ç”Ÿäº§ç¯å¢ƒåˆä¸éœ€è¦è¿™äº›å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨debugæ¨¡å—ï¼Œdebugæ¨¡å—å¯ä»¥å¯¹logè¿›è¡Œåˆ†ç»„ï¼Œè€Œä¸”åªæœ‰è®¾ç½®äº†DEBUGçš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šè¾“å‡ºå†…å®¹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install debug</div></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥åœ¨ä»£ç ä¸­å¼•å…¥</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> debug = <span class=\"built_in\">require</span>(<span class=\"string\">'debug'</span>)(<span class=\"string\">'app'</span>);   <span class=\"comment\">// è¿™é‡Œè‡ªå®šç°å®å“ªä¸€å—DEBUGçš„å†…å®¹</span></div><div class=\"line\">app.use(<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"> ctx, next </span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> config = ctx.app ;</div><div class=\"line\">    debug(<span class=\"string\">'env: %s'</span>,config.env) ;</div><div class=\"line\">    ctx.body = config.env;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥å°±å¯ä»¥å¯åŠ¨äº†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">DEBUG=app node index.js</div></pre></td></tr></table></figure>\n<p>å‚è€ƒæ–‡æ¡£ï¼š</p>\n<p><a href=\"http://koajs.com/\" target=\"_blank\" rel=\"external\">Koa next generation web framework for node.js</a></p>\n<p><a href=\"http://es6.ruanyifeng.com/\" target=\"_blank\" rel=\"external\">ECMAScript 6 å…¥é—¨</a></p>\n"},{"title":"npm linkçš„ä½¿ç”¨","url":"http://www.maotingfeng.me/2017/01/16/npm-linkçš„ä½¿ç”¨/","content":"<h2 id=\"npm-linkçš„ä½¿ç”¨\"><a href=\"#npm-linkçš„ä½¿ç”¨\" class=\"headerlink\" title=\"npm linkçš„ä½¿ç”¨\"></a>npm linkçš„ä½¿ç”¨</h2><h6 id=\"ç®€å•ä½¿ç”¨\"><a href=\"#ç®€å•ä½¿ç”¨\" class=\"headerlink\" title=\"ç®€å•ä½¿ç”¨\"></a>ç®€å•ä½¿ç”¨</h6><p>npm linkåœ¨å¼€å‘å…¬å…±æ¨¡å—çš„æ—¶å€™å¾ˆæœ‰ç”¨ï¼Œå½“ä½ æœ¬åœ°å¼€å‘ä¸€ä¸ªå…¬å…±æ¨¡å—æ—¶ï¼Œåˆåœ¨è‡ªå·±çš„æœ¬åœ°é¡¹ç›®ç”¨åˆ°ï¼ŒåŸå§‹çš„åšæ³•å¯èƒ½æ˜¯ï¼ŒæŠŠå…¬å…±æ¨¡å—ï¼Œæ‹·è´åˆ°æœ¬åœ°é¡¹ç›®çš„node_modulesæ¨¡å—é‡Œï¼Œç„¶åæœ¬åœ°å¼€å‘çš„åŒæ—¶ï¼Œè°ƒè¯•å…¬å…±æ¨¡å—ï¼Œè¿™æ ·å­è™½ç„¶ç®€å•ä½†æ˜¯ä½æ•ˆã€‚</p>\n<p>npmçš„linkå‘½ä»¤æä¾›äº†ç®€å•é«˜æ•ˆçš„åŠæ³•ï¼Œåœ¨å…¬å…±æ¨¡å—ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ<code>npm link</code>å‘½ä»¤ï¼Œä¼šåœ¨å…¨å±€<code>node_modules</code>ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘æœ¬åœ°å…¬å…±æ¨¡å—çš„ç›®å½•ã€‚ç„¶ååœ¨æœ¬åœ°é¡¹ç›®ç›´æ¥requireè¿›æ¥å³å¯ï¼Œç³»ç»Ÿæœ€åä¼šæ‰¾åˆ°å…¨å±€ç›®å½•ä¸‹çš„å…¬å…±æ¨¡å—ã€‚</p>\n<p>ä¾‹1-1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">âœ  testlink npm link</div><div class=\"line\">npm WARN hello1@ No description</div><div class=\"line\">npm WARN hello1@ No repository field.</div><div class=\"line\">npm WARN hello1@ No license field.</div><div class=\"line\">/usr/local/lib/node_modules/testlink -&gt; /Users/[yourHomePath]/demo/testlink</div></pre></td></tr></table></figure>\n<h6 id=\"å¯æ‰§è¡Œè„šæœ¬çš„å¼€å‘\"><a href=\"#å¯æ‰§è¡Œè„šæœ¬çš„å¼€å‘\" class=\"headerlink\" title=\"å¯æ‰§è¡Œè„šæœ¬çš„å¼€å‘\"></a>å¯æ‰§è¡Œè„šæœ¬çš„å¼€å‘</h6><p>å¯æ‰§è¡Œè„šæœ¬å¯ä»¥æ–¹ä¾¿æ‰§è¡Œä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼Œå…å»æ‰‹åŠ¨é‡å¤æ€§çš„åŠ¨ä½œã€‚</p>\n<p>å¯æ‰§è¡Œè„šæœ¬sayHelloï¼š</p>\n<p>ä¾‹1-2</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/usr/bin/env node</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log( <span class=\"string\">'hello world!'</span> , process.argv[<span class=\"number\">2</span>] )</div></pre></td></tr></table></figure>\n<p>ç„¶åä¿®æ”¹sayHelloæ–‡ä»¶çš„æƒé™ï¼ˆè¯»å–rçš„æƒé™ç­‰äº4ï¼›å†™å…¥wçš„æƒé™ç­‰äº2ï¼›æ‰§è¡Œxçš„æƒé™ç­‰äº1ã€‚7ï¼ˆ4+2+1 | è¯»å–+å†™å…¥+æ‰§è¡Œï¼‰ï¼‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">chmod 755 sayHello</div></pre></td></tr></table></figure>\n<p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼ŒsayHelloå°±å¯ä»¥æ‰§è¡Œäº†</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./sayHello</div></pre></td></tr></table></figure>\n<p>è¿™ç§å½¢å¼ï¼Œéœ€è¦æ¯æ¬¡æ‰§è¡ŒsayHelloå‘½ä»¤éœ€è¦åŠ ä¸Šè·¯å¾„å‰ç¼€ã€‚æ›´åˆç†çš„åšæ³•æ˜¯ä½¿ç”¨binã€‚</p>\n<p>åœ¨å…¬å…±æ¨¡å—çš„package.jsonæ–‡ä»¶é‡ŒåŠ ä¸Šå¦‚ä¸‹ä»£ç </p>\n<p>ä¾‹1-3</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"testlink\"</span> ,</div><div class=\"line\">    <span class=\"string\">\"bin\"</span>: &#123;</div><div class=\"line\">        <span class=\"string\">\"hello\"</span> : <span class=\"string\">\"sayHello\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>nameæ‰§è¡Œå…¬å…±æ¨¡å—çš„åå­—ï¼Œbinæ‰§è¡Œéœ€è¦å…¨å±€åŠ å…¥çš„å¯æ‰§è¡Œå‘½ä»¤ã€‚binçš„é”®ï¼Œå…¨å±€æ‰§è¡Œçš„å‘½ä»¤åï¼Œé”®å€¼æ‰§è¡Œå…¨å±€å‘½ä»¤çš„å…·ä½“å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¾‹å¦‚<code>&quot;hello&quot;: &quot;./bin/sayHello&quot;</code>è¡¨ç¤ºå½“å‰ç›®å½•ä¸‹çš„binç›®å½•ï¼Œé‡Œé¢çš„sayHelloå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œåœ¨å…¬å…±æ¨¡å—çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œnpm linkå‘½ä»¤</p>\n<p>ä¾‹1-4</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">âœ  testlink npm link</div><div class=\"line\">npm WARN testlink@ No description</div><div class=\"line\">npm WARN testlink@ No repository field.</div><div class=\"line\">npm WARN testlink@ No license field.</div><div class=\"line\">/usr/local/bin/hello -&gt; /usr/local/lib/node_modules/testlink/sayHello</div><div class=\"line\">/usr/local/lib/node_modules/testlink -&gt; /Users/[yourHomePath]/demo/testlink</div></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹å‡ºhelloçš„å…¨å±€æ‰§è¡Œçš„å‘½ä»¤åï¼Œæ˜ å°„åˆ°äº†<code>/usr/local/lib/node_modules/testlink/sayHello</code>è¿™ä¸ªå…·ä½“çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆ æ³¨æ„âš ï¸ï¼Œå…¨å±€node_modulesä¸‹çš„testlinkç›®å½•æ˜¯ä¸ªç¬¦å·é“¾æ¥ï¼Œä½†æ˜¯è¯»å†™æ•ˆæœå’Œå…·ä½“æ–‡ä»¶è·¯å¾„ä¸€æ · ï¼‰ã€‚ç„¶å<code>/usr/local/lib/node_modules/testlink</code>å…¨å±€çš„æ¨¡å—(ç¬¦å·é“¾æ¥)ï¼Œæ˜ å°„åˆ°äº†å…·ä½“æœ¬åœ°çš„<code>/Users/[yourHomePath]/demo/testlink</code>å…¬å…±æ¨¡å—å¼€å‘ç›®å½•ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œæ‰§è¡ŒsayHelloå¯æ‰§è¡Œæ–‡ä»¶ä¸éœ€è¦åŠ ä¸Šè·¯å¾„å‰ç¼€äº†ï¼Œåœ¨ä»»ä½•ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ</p>\n<p>ä¾‹1-5</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">hello &apos;abc&apos;</div><div class=\"line\"># æ‰“å°å‡º</div><div class=\"line\">hello world! abc</div></pre></td></tr></table></figure>\n<p>ç°åœ¨æ¯”æ¯æ¬¡åŠ ç›®å½•å‰ç¼€æ–¹ä¾¿å¤šäº†ã€‚</p>\n<blockquote>\n<p>å‚è€ƒèµ„æ–™</p>\n<p>1ã€<a href=\"http://www.ruanyifeng.com/blog/2015/05/command-line-with-node.html\" target=\"_blank\" rel=\"external\">ã€ŠNode.js å‘½ä»¤è¡Œç¨‹åºå¼€å‘æ•™ç¨‹ã€‹</a></p>\n</blockquote>\n"},{"title":"Mathå¯¹è±¡","url":"http://www.maotingfeng.me/2017/01/16/Mathå¯¹è±¡/","content":"<h4 id=\"Mathå¯¹è±¡\"><a href=\"#Mathå¯¹è±¡\" class=\"headerlink\" title=\"Mathå¯¹è±¡\"></a>Mathå¯¹è±¡</h4><p>é™æ€å‡½æ•°</p>\n<ul>\n<li><p>Math.abs()</p>\n<p>è®¡ç®—ç»å¯¹å€¼ï¼Œå½“ä¸æ˜¯æ•°å­—æ—¶ï¼Œè¿”å›NaNã€‚</p>\n</li>\n<li><p>Math.acos()</p>\n<p>è®¡ç®—åä½™å¼¦å€¼ï¼Œå‚æ•°æ˜¯-1~1ä¹‹é—´çš„æ•°å­—</p>\n</li>\n<li><p>Math.asin()</p>\n<p>è®¡ç®—åæ­£å¼¦å€¼ï¼Œå‚æ•°æ˜¯-1~1ä¹‹é—´çš„æ•°å­—</p>\n</li>\n<li><p>Math.atan()</p>\n<p>è®¡ç®—åæ­£åˆ‡å€¼ï¼Œè¿”å›å€¼ä»‹äº-Ï€/2~Ï€/2å¼§åº¦ä¹‹é—´</p>\n</li>\n<li><p>Math.atan2()</p>\n<p>è®¡ç®—ä»xè½´åˆ°æŒ‡å®šç‚¹çš„è§’åº¦ï¼Œxè½´æ­£åŠè½´ä¸æŒ‡å®šç‚¹(x,y)ä¹‹é—´æ²¿é€†æ—¶é’ˆæ–¹å‘çš„å¤¹è§’ï¼Œå€¼ä»‹äº-Ï€~Ï€å¼§åº¦ä¹‹é—´ã€‚</p>\n</li>\n<li><p>Math.ceil()</p>\n<p>å¯¹ä¸€ä¸ªæ•°å­—å‘ä¸Šå–æ•´ï¼Œå¤§äºæˆ–ç­‰äºxçš„æœ€æ¥è¿‘çš„æ•°</p>\n</li>\n<li><p>Math.cos()</p>\n<p>è®¡ç®—ä½™å¼¦å€¼</p>\n</li>\n<li><p>Math.exp()</p>\n<p>è®¡ç®—e^xï¼Œeçš„xæ¬¡æ–¹</p>\n</li>\n<li><p>Math.floor()</p>\n<p>å¯¹ä¸€ä¸ªæ•°å­—å‘ä¸‹å–æ•´ï¼Œè¿”å›æœ€æ¥è¿‘å°äºæˆ–è€…ç­‰äºxçš„æ•´æ•°</p>\n</li>\n<li><p>Math.log()</p>\n<p>è®¡ç®—è‡ªç„¶å¯¹æ•°</p>\n</li>\n<li><p>Math.max()</p>\n<p>è¿”å›æœ€å¤§çš„å‚æ•°ï¼Œ0ä¸ªæˆ–è€…å¤šä¸ªå€¼ï¼›æ²¡æœ‰å‚æ•°å°†è¿”å›ï¼š-Infinity</p>\n</li>\n<li><p>Math.min()</p>\n<p>è¿”å›æœ€å°çš„å‚æ•°ï¼Œä»»æ„æ•°é‡çš„å‚æ•°ï¼›æ²¡æœ‰å‚æ•°å°†è¿”å›:Infinity</p>\n</li>\n<li><p>Math.pow()</p>\n<p>è®¡ç®—ä¹˜æ–¹x^y</p>\n</li>\n<li><p>Math.random()</p>\n<p> è¿”å›ä¸€ä¸ªä¼ªéšæœºæ•°</p>\n</li>\n<li><p>Math.round()</p>\n<p>å››èˆäº”å…¥</p>\n</li>\n<li><p>Math.sin()</p>\n<p>è®¡ç®—æ­£å¼¦å€¼</p>\n</li>\n<li><p>Math.sqrt()</p>\n<p>è®¡ç®—å¹³æ–¹æ ¹</p>\n</li>\n<li><p>Math.tan()</p>\n<p>è®¡ç®—æ­£åˆ‡å€¼</p>\n</li>\n</ul>\n<p>mathå¸¸é‡</p>\n<ul>\n<li><p>Math.E</p>\n<p>å¸¸é‡eï¼Œè‡ªç„¶å¯¹æ•°çš„åº•æ•°</p>\n</li>\n<li><p>Math.LN10</p>\n<p>10çš„è‡ªç„¶å¯¹æ•°</p>\n</li>\n<li><p>Math.LN2</p>\n<p>2çš„è‡ªç„¶å¯¹æ•°</p>\n</li>\n<li><p>Math.LOG10E</p>\n<p>eä»¥10ä¸ºåº•çš„å¯¹æ•°</p>\n</li>\n<li><p>Math.LOG2E</p>\n<p>eä»¥2ä¸ºåº•çš„å¯¹æ•°</p>\n</li>\n<li><p>Math.PI</p>\n<p>å¸¸é‡Ï€</p>\n</li>\n<li><p>Math.SQRT1_2</p>\n<p>2çš„å¹³æ–¹æ ¹çš„å€’æ•°</p>\n</li>\n<li><p>Math.SQRT2</p>\n<p>2çš„å¹³æ–¹æ ¹</p>\n</li>\n</ul>\n<blockquote>\n<p>å‚è€ƒèµ„æ–™</p>\n<p>ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹</p>\n</blockquote>\n"},{"title":"å½“display:table-cellçš„å…ƒç´ è®¾ç½®äº†position:absoluteå¤±æ•ˆçš„bug","url":"http://www.maotingfeng.me/2017/01/13/å½“display-table-cellçš„å…ƒç´ è®¾ç½®äº†position-absoluteå¤±æ•ˆçš„bug/","content":"<h2 id=\"å½“display-table-cellçš„å…ƒç´ è®¾ç½®äº†position-absoluteå¤±æ•ˆçš„bug\"><a href=\"#å½“display-table-cellçš„å…ƒç´ è®¾ç½®äº†position-absoluteå¤±æ•ˆçš„bug\" class=\"headerlink\" title=\"å½“display-table-cellçš„å…ƒç´ è®¾ç½®äº†position-absoluteå¤±æ•ˆçš„bug\"></a>å½“display-table-cellçš„å…ƒç´ è®¾ç½®äº†position-absoluteå¤±æ•ˆçš„bug</h2><p>é—®é¢˜å¤ç°ï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>01 Demo<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">            <span class=\"selector-id\">#banner</span> &#123;</div><div class=\"line\">              <span class=\"attribute\">position</span>: relative;</div><div class=\"line\">              <span class=\"attribute\">display</span>: table-cell;</div><div class=\"line\">              <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</div><div class=\"line\">              <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</div><div class=\"line\">              <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">              <span class=\"attribute\">text-align</span>: center;</div><div class=\"line\">              <span class=\"attribute\">vertical-align</span>: middle;</div><div class=\"line\">              <span class=\"attribute\">background-color</span>: <span class=\"number\">#f00</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"banner\"</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">width</span>=<span class=\"string\">\"50\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"50\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://lh3.googleusercontent.com/-aVJFt11BsXk/AAAAAAAAAAI/AAAAAAAAAAA/AKB_U8u7r4-EjGt5Fx6T-2ESqGLFt4xfxQ/s32-c-mo/photo.jpg\"</span>/&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>é¢„è§ˆæ•ˆæœï¼š</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/display-cell-relative.jpeg\" alt=\"display-cell-relative\"></p>\n<p>ä½†æ˜¯å½“æŠŠ<code>#banner</code>çš„postionå±æ€§è®¾ç½®æˆ<code>absolute</code>æ—¶ï¼Œdisplay:table-cellå°±å¤±æ•ˆäº†ï¼Œ#bannerå°±å˜å›äº†æ™®é€šçš„display:divå…ƒç´ äº†ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#banner</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: absolute;\t\t<span class=\"comment\">/*ä»relativeæ”¹æˆabsolute*/</span></div><div class=\"line\">  <span class=\"attribute\">display</span>: table-cell;</div><div class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</div><div class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</div><div class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">  <span class=\"attribute\">text-align</span>: center;</div><div class=\"line\">  <span class=\"attribute\">vertical-align</span>: middle;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f00</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>é¢„è§ˆæ•ˆæœ</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/display-cell-absolute.jpeg\" alt=\"display-cell-absolute\"></p>\n<p>åŸå› æ˜¯ï¼š</p>\n<blockquote>\n<p>The declaration <code>position: absolute</code> takes your element out from wherever it is and place it relative to innermost element that is not declared static. In no longer participate in the alignment of any other element, hence it no longer serve as table-cell (the declaration has no effect). </p>\n<p>å£°æ˜ä¸ºabsoluteå°†å…ƒç´ ä»ä»»ä½•ä½ç½®ç§»å‡ºï¼Œå¹¶å°†å…¶æ”¾ç½®ä¸ºç›¸å¯¹äºæœªå£°æ˜ä¸ºstaticçš„æœ€å†…å±‚å…ƒç´ ã€‚ ä¸å†å‚ä¸ä»»ä½•å…¶ä»–å…ƒç´ çš„å¯¹é½ï¼Œå› æ­¤å®ƒä¸å†ç”¨ä½œè¡¨æ ¼å•å…ƒæ ¼ï¼ˆå£°æ˜æ²¡æœ‰æ•ˆæœï¼‰[googleç¿»è¯‘]ã€‚ </p>\n</blockquote>\n<p>å°±æ˜¯åº”ç”¨positioin absoluteä¹‹åtable-cellçš„å±æ€§å°±ä¼šå¤±æ•ˆã€‚</p>\n<p>è§£å†³åŠæ³•ï¼š</p>\n<ul>\n<li>ä¹Ÿå°±åªèƒ½å†åŒ…è£¹ä¸€å±‚å…ƒç´ äº†ã€‚ä¸è¦æŠŠabsoluteåº”ç”¨åœ¨table-cellçš„å±æ€§ä¸Šï¼</li>\n<li>ä¸ç”¨table-cellçš„è¯ï¼Œç”¨css3çš„flexä¹Ÿèƒ½è§£å†³å‚ç›´å±…ä¸­çš„é—®é¢˜ï¼Œè€Œä¸”æ— absoluteçš„è¿™ä¸ªé—®é¢˜ã€‚<a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\" target=\"_blank\" rel=\"external\">Flex å¸ƒå±€æ•™ç¨‹</a></li>\n</ul>\n<p>çœ‹MDNä¸Šï¼Œå¯¹displayå±æ€§çš„å®šä¹‰å’Œå¯¹positionå±æ€§çš„å®šä¹‰æœªæ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚å°±ç”¨äº†stakoverflowä¸Šçš„è¿™ä¸ªç­”æ¡ˆã€‚</p>\n<blockquote>\n<p>å‚è€ƒèµ„æ–™ï¼š</p>\n<p>1ã€<a href=\"http://stackoverflow.com/questions/1608983/why-display-table-cell-is-broken-when-position-absolute\" target=\"_blank\" rel=\"external\">ã€Šwhy-display-table-cell-is-broken-when-position-absoluteã€‹</a></p>\n<p>2ã€<a href=\"https://davidwalsh.name/table-cell-position-absolute\" target=\"_blank\" rel=\"external\">ã€ŠTable Cell and Position Absoluteã€‹</a></p>\n<p>3ã€<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/display\" target=\"_blank\" rel=\"external\">ã€Šdisplay MDNã€‹</a></p>\n<p>4ã€<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/position\" target=\"_blank\" rel=\"external\">ã€Šposition MDNã€‹</a></p>\n</blockquote>\n"},{"title":"ä»“åº“æ’ä»¶å°å·¥å…·","url":"http://www.maotingfeng.me/2017/01/12/ä»“åº“æ’ä»¶å°å·¥å…·/","content":"<h3 id=\"ä»“åº“æ’ä»¶å°å·¥å…·\"><a href=\"#ä»“åº“æ’ä»¶å°å·¥å…·\" class=\"headerlink\" title=\"ä»“åº“æ’ä»¶å°å·¥å…·\"></a>ä»“åº“æ’ä»¶å°å·¥å…·</h3><ul>\n<li><p>Sylvester (<a href=\"http://sylvester.jcoglan.com/\" target=\"_blank\" rel=\"external\">å®˜ç½‘</a>)æ˜¯ä¸€ä¸ªå¯¹å‘é‡å’ŒçŸ©é˜µè¿›è¡Œæ•°å­¦è¿ç®—çš„javascript ç±»åº“ ï¼Œè€Œä¸éœ€è¦è¿›è¡Œå¤§é‡çš„å¾ªç¯ ã€‚ å®ƒèƒ½å¤Ÿå¯¹ä»»æ„ç»´åº¦çš„å‘é‡å’ŒçŸ©é˜µè¿›è¡Œæ¨¡å‹åŒ– ï¼Œä½¿ç”¨å®ƒ ï¼Œä½ å¯ä»¥æ ¹æ®æ•°å­¦å…¬å¼ ï¼Œå†™å‡ºç®€å•æ˜“è¯» ï¼Œé¢å‘å¯¹è±¡çš„ä»£ç  ã€‚ ä¾‹å¦‚ ï¼šä½ å¯ä»¥ä»¥è¿™ç§æ–¹å¼è¿›è¡Œå‘é‡ä¹˜æ³• ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> V1 = $V([<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>]);</div><div class=\"line\"><span class=\"keyword\">var</span> V2 = $V([<span class=\"number\">9</span>,<span class=\"number\">-3</span>,<span class=\"number\">0</span>]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> d = V1.dot(V2);</div><div class=\"line\"><span class=\"comment\">// d is 15</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> c = V1.cross(V2);</div><div class=\"line\"><span class=\"comment\">// c is the vector (15,45,-45)</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"JavaScripté”®ç›˜äº‹ä»¶","url":"http://www.maotingfeng.me/2017/01/12/JavaScripté”®ç›˜äº‹ä»¶/","content":"<h2 id=\"Javascripté”®ç›˜äº‹ä»¶\"><a href=\"#Javascripté”®ç›˜äº‹ä»¶\" class=\"headerlink\" title=\"Javascripté”®ç›˜äº‹ä»¶\"></a>Javascripté”®ç›˜äº‹ä»¶</h2><ul>\n<li><em>keydownå’Œkeyupäº‹ä»¶</em>ï¼ˆä½çº§äº‹ä»¶ï¼‰ï¼Œå½“ç”¨æˆ·åœ¨é”®ç›˜ä¸ŠæŒ‰ä¸‹æˆ–è€…é‡Šæ”¾æŒ‰é”®æ—¶ï¼Œä¼šå‘ç”Ÿkeydownå’Œkeyupäº‹ä»¶ã€‚å®ƒä»¬ç”±è¾…åŠ©é”®ã€åŠŸèƒ½é”®å’Œå­—æ¯é”®äº§ç”Ÿï¼Œå¦‚æœç”¨æˆ·æŒ‰é”®æ—¶é—´è¶³å¤Ÿé•¿ä¼šå¯¼è‡´å®ƒå¼€å§‹é‡å¤ï¼Œé‚£ä¹ˆkeyupäº‹ä»¶åˆ°è¾¾ä¹‹å‰ä¼šæ”¶åˆ°å¤šä¸ªkeydownäº‹ä»¶ã€‚<ul>\n<li>äº‹ä»¶å¯¹è±¡æœ‰ä¸ªæ•°å­—å±æ€§keyCodeï¼Œå¯¹äºå¯æ‰“å°å­—ç¬¦ï¼ŒkeyCodeå€¼æ—¶æŒ‰é”®ä¸Šå‡ºç°çš„å­—ç¬¦çš„Unicodeç¼–ç ã€‚å¯¹äºå­—æ¯é”®ï¼Œæ— è®ºæ˜¯å¦å¼€å¯å¤§å†™ï¼Œæ€»æ˜¯è¿”å›å¤§å†™çš„keyCodeï¼Œæ•°å­—é”®ç›˜ä¹Ÿä¸€æ ·ï¼Œå¯¹äºæ˜¯å¦æŒ‰ä¸‹shiftï¼Œè¿”å›çš„æ€»æ˜¯ä¸€æ ·çš„ã€‚</li>\n<li>äº‹ä»¶å¯¹è±¡æœ‰altKeyã€ctrKeyã€metaKeyã€shiftKeyå±æ€§ï¼Œå½“å¯¹åº”çš„è¾…åŠ©é”®è¢«æŒ‰ä¸‹ï¼Œå®ƒä»¬ä¼šè¢«è®¾ç½®ä¸ºtrueã€‚</li>\n<li>3çº§domäº‹ä»¶è‰æ¡ˆï¼Œå®šä¹‰äº†æ–°çš„äº‹ä»¶å¯¹è±¡å±æ€§keyï¼Œå®ƒä¼šä»¥å­—ç¬¦ä¸²çš„å½¢å¼åŒ…å«é”®åã€‚å¦‚æœæ˜¯å¯æ‰“å°å­—ç¬¦ï¼Œkeyå±æ€§ä»…ä»…æ˜¯è¿™ä¸ªæ‰“å°å­—ç¬¦ï¼Œå¦‚æœæ˜¯åŠŸèƒ½é”®ï¼Œåˆ™ä¼šç±»ä¼¼â€™F2â€™ã€â€™Homeâ€™ã€â€™Leftâ€™è¿™æ ·å­çš„å€¼ã€‚</li>\n</ul>\n</li>\n<li><em>keypressäº‹ä»¶</em>ï¼ˆè¾ƒé«˜çº§äº‹ä»¶ï¼‰,å®ƒè¡¨ç¤ºäº§ç”Ÿäº†ä¸€ä¸ªå¯æ‰“å°å­—ç¬¦ï¼Œè¡¨ç¤ºè¾“å…¥çš„å•ä¸ªå­—ç¬¦ï¼Œä»¥æ•°å­—Unicodeç¼–ç çš„å½¢å¼ï¼Œæ‰€ä»¥å¿…é¡»ç”¨String.fromCharCode()æŠŠå®ƒè½¬æ¢æˆå­—ç¬¦ä¸²ã€‚<ul>\n<li>å¤§å¤šæ•°æµè§ˆå™¨ï¼Œäº‹ä»¶å¯¹è±¡çš„keyCodeå±æ€§æŒ‡å®šäº†è¾“å…¥çš„å­—ç¬¦ç¼–ç ã€‚å¯ç”¨<code>var char = String.fromCharCode( event.keyCode )</code>è·å–å­—ç¬¦ã€‚ä½†æ˜¯firefoxä½¿ç”¨çš„æ˜¯charCodeå±æ€§ï¼Œè·å–å­—ç¬¦éœ€è¦<code>var char = String.fromCharCode( event.charCode )</code>ï¼Œè€Œä¸”åœ¨firefoxä¸­ï¼Œäº§ç”Ÿéæ‰“å°å­—ç¬¦æ—¶ä¹Ÿè§¦å‘keypressäº‹ä»¶ï¼ˆå¤§å¤šæ•°æµè§ˆå™¨åªæœ‰äº§ç”Ÿäº†å¯æ‰“å°å­—ç¬¦æ—¶ï¼Œè§¦å‘keypressäº‹ä»¶ï¼‰ï¼Œæ‰€ä»¥ä¸ºäº†åŒºåˆ†è¿™ç§æƒ…å†µï¼Œå¯ç”¨å­˜åœ¨charCodeå±æ€§ï¼Œä½†æ˜¯å€¼ä¸º0åšæ£€æµ‹ã€‚</li>\n</ul>\n</li>\n<li><em>textinputäº‹ä»¶</em>ï¼ˆé«˜çº§äº‹ä»¶ï¼‰,3çº§DOMäº‹ä»¶è§„èŒƒè‰æ¡ˆå®šä¹‰ï¼Œä¸ç®¡æ¥æºï¼ˆä¾‹å¦‚ï¼šé”®ç›˜ã€é»è´´ã€æˆ–æ‹–æ”¾å½¢å¼çš„æ•°æ®ä¼ è¾“ã€äºšæ´²è¯­è¨€è¾“å…¥æ³•ã€å£°éŸ³æˆ–æ‰‹å†™è¯†åˆ«ç³»ç»Ÿï¼‰ï¼Œæ— è®ºä½•æ—¶ç”¨æˆ·è¾“å…¥æ–‡æœ¬æ—¶ï¼Œéƒ½ä¼šè§¦å‘ã€‚textinputäº‹ä»¶å°šæœªå¾—åˆ°æ”¯æŒï¼Œä½†Webkitæµè§ˆå™¨æ”¯æŒéå¸¸ç±»ä¼¼çš„<em>textInput</em>äº‹ä»¶ã€‚è§„èŒƒçš„textinputäº‹ä»¶å’ŒWebkitçš„textInputäº‹ä»¶éƒ½æœ‰ç›¸ä¼¼çš„äº‹ä»¶å¯¹è±¡ï¼š<ul>\n<li>äº‹ä»¶å¯¹è±¡æœ‰ä¸€ä¸ªdataå±æ€§ï¼Œç”¨äºä¿å­˜è¾“å…¥çš„æ–‡æœ¬ã€‚</li>\n<li>äº‹ä»¶å¯¹è±¡çš„inputMethodå±æ€§ï¼Œç”¨äºæŒ‡å®šè¾“å…¥æºï¼Œä¸è¿‡å°šæœªå®ç°ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>å¯é€šè¿‡å–æ¶ˆtextinputã€textInputã€å’Œkeypressäº‹ä»¶æ¥é˜»æ­¢å­—ç¬¦çš„è¾“å…¥ã€‚ä¸€ä¸ªä¾‹å­ï¼Œç”¨æ¥è¿‡æ»¤ç”¨æˆ·è¾“å…¥</p>\n<p>ä¾‹1-1:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\">*InputFilter.jsï¼šä¸å”çªåœ°è¿‡æ»¤ï¼œinputï¼å…ƒç´ çš„é”®ç›˜è¾“å…¥</div><div class=\"line\">*</div><div class=\"line\">*è¿™ä¸ªæ¨¡å—æŸ¥æ‰¾æ–‡æ¡£ä¸­æ‹¥æœ‰\"data-allowed-chars\"å±æ€§çš„æ‰€æœ‰ï¼œinput type=\"text\"ï¼å…ƒç´ </div><div class=\"line\">*å®ƒä¸ºæ‰€æœ‰è¿™ç±»å…ƒç´ éƒ½æ³¨å†Œkeypressã€textInputå’Œtextinputäº‹ä»¶å¤„ç†ç¨‹åºï¼Œ</div><div class=\"line\">â€œ*æ¥é™åˆ¶ç”¨æˆ·åªèƒ½è¾“å…¥å‡ºç°åœ¨è®¸å¯å±æ€§å€¼ä¸­çš„å­—ç¬¦</div><div class=\"line\">*å¦‚æœï¼œinputï¼å…ƒç´ ä¹Ÿæœ‰ä¸€ä¸ª\"data-messageid\"å±æ€§ï¼Œ</div><div class=\"line\">*é‚£ä¹ˆè®¤ä¸ºè¿™ä¸ªå€¼æ˜¯å¦ä¸€ä¸ªæ–‡æ¡£å…ƒç´ çš„id</div><div class=\"line\">*å¦‚æœç”¨æˆ·è¾“å…¥äº†ä¸å…è®¸çš„å­—ç¬¦ï¼Œé‚£ä¹ˆä¼šæ˜¾ç¤ºæ¶ˆæ¯å…ƒç´ </div><div class=\"line\">*å¦‚æœç”¨æˆ·è¾“å…¥äº†å…è®¸çš„å­—ç¬¦ï¼Œé‚£ä¹ˆä¼šéšè—æ¶ˆæ¯å…ƒç´ </div><div class=\"line\">*è¿™ä¸ªä¿¡æ¯idå…ƒç´ ç”¨äºå‘ç”¨æˆ·è¯´æ˜æ‹’ç»è¾“å…¥çš„åŸå› </div><div class=\"line\">*å®ƒé€šå¸¸åº”è¯¥ç”±CSSæ§åˆ¶æ ·å¼ï¼Œæ‰€ä»¥å®ƒå¼€å§‹ä¸å¯è§</div><div class=\"line\">*</div><div class=\"line\">*ä¸‹é¢æ˜¯ä½¿ç”¨è¿™ä¸ªæ¨¡å—çš„HTMLä»£ç ç¤ºä¾‹</div><div class=\"line\">*é‚®æ”¿ç¼–ç ï¼šï¼œinput id=\"zip\"type=\"text\"</div><div class=\"line\">*data-allowed-chars=\"0123456789\"data-messageid=\"zipwarn\"ï¼</div><div class=\"line\">*ï¼œspan id=\"zipwarn\"style=\"color:red;visibility:hidden\"ï¼åªæ”¯æŒæ•°å­—ï¼œ/spanï¼</div><div class=\"line\">*</div><div class=\"line\">*è¿™ä¸ªæ¨¡å—ç›¸å½“åœ°ä¸å”çªï¼Œå®ƒæ²¡æœ‰å®šä¹‰å…¨å±€å‘½åç©ºé—´ä¸­çš„ä»»ä½•ç¬¦å·</div><div class=\"line\">*/</div><div class=\"line\">whenReady(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">//å½“æ–‡æ¡£åŠ è½½å®Œæ¯•æ—¶ï¼Œè¿è¡Œè¿™ä¸ªå‡½æ•°</span></div><div class=\"line\">    <span class=\"comment\">//æŸ¥æ‰¾æ‰€æœ‰ï¼œinputï¼å…ƒç´ </span></div><div class=\"line\">    <span class=\"keyword\">var</span> inputelts = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">\"input\"</span>); <span class=\"comment\">//éå†å®ƒä»¬</span></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; iï¼œ inputelts.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> elt = inputelts[i]; <span class=\"comment\">//è·³è¿‡ä¸æ˜¯æ–‡æœ¬åŸŸæˆ–æ²¡æœ‰data-allowed-charså±æ€§çš„å…ƒç´ </span></div><div class=\"line\">        <span class=\"keyword\">if</span> (elt.type != <span class=\"string\">\"text\"</span> || !elt.getAttribute(<span class=\"string\">\"data-allowed-chars\"</span>))</div><div class=\"line\">            <span class=\"keyword\">continue</span>; </div><div class=\"line\">        <span class=\"comment\">//åœ¨inputå…ƒç´ ä¸Šæ³¨å†Œäº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•°</span></div><div class=\"line\">        <span class=\"comment\">//ä¼ ç»Ÿçš„keypressäº‹ä»¶å¤„ç†ç¨‹åºèƒ½å¤Ÿåœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ</span></div><div class=\"line\">        <span class=\"comment\">//textInputï¼ˆæ··åˆå¤§å°å†™ï¼‰åœ¨2010å¹´åSafariå’ŒChromeæ”¯æŒ</span></div><div class=\"line\">        <span class=\"comment\">//textinputï¼ˆå°å†™ï¼‰æ˜¯3çº§DOMäº‹ä»¶è§„èŒƒè‰æ¡ˆä¸­çš„ç‰ˆæœ¬</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (elt.addEventListener) &#123;</div><div class=\"line\">            elt.addEventListener(<span class=\"string\">\"keypress\"</span>, filter, <span class=\"literal\">false</span>);</div><div class=\"line\">            elt.addEventListener(<span class=\"string\">\"textInput\"</span>, filter, <span class=\"literal\">false</span>);</div><div class=\"line\">            elt.addEventListener(<span class=\"string\">\"textinput\"</span>, filter, <span class=\"literal\">false</span>);</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">//ä¸æ”¯æŒaddEventListener()çš„IEä¹Ÿä¸ä¼šæ”¯æŒtextinput</span></div><div class=\"line\">            elt.attachEvent(<span class=\"string\">\"onkeypress\"</span>, filter);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">//è¿™æ˜¯ç”¨äºè¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„keypressã€textInputå’Œtextinputäº‹ä»¶å¤„ç†ç¨‹åº</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">filter</span>(<span class=\"params\">event</span>) </span>&#123; <span class=\"comment\">//è·å–äº‹ä»¶å¯¹è±¡å’Œç›®æ ‡å…ƒç´ å¯¹è±¡</span></div><div class=\"line\">        <span class=\"keyword\">var</span> e = event || <span class=\"built_in\">window</span>.event; <span class=\"comment\">//æ ‡å‡†æˆ–IEæ¨¡å‹</span></div><div class=\"line\">        <span class=\"keyword\">var</span> target = e.target || e.srcElement; <span class=\"comment\">//æ ‡å‡†æˆ–IEæ¨¡å‹</span></div><div class=\"line\">        <span class=\"keyword\">var</span> text = <span class=\"literal\">null</span>; <span class=\"comment\">//è¾“å…¥çš„æ–‡æœ¬</span></div><div class=\"line\">        <span class=\"comment\">//è·å–è¾“å…¥çš„å­—ç¬¦æˆ–æ–‡æœ¬</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (e.type === <span class=\"string\">\"textinput\"</span> || e.type === <span class=\"string\">\"textInput\"</span>) text = e.data;</div><div class=\"line\">        <span class=\"keyword\">else</span> &#123; <span class=\"comment\">//è¿™æ˜¯ä¼ ç»Ÿçš„keypressäº‹ä»¶</span></div><div class=\"line\">            <span class=\"comment\">//å¯¹äºå¯æ‰“å°é”®çš„keypressäº‹ä»¶ï¼ŒFirefoxä½¿ç”¨charCode</span></div><div class=\"line\">            <span class=\"keyword\">var</span> code = e.charCode || e.keyCode; <span class=\"comment\">//å¦‚æœæŒ‰ä¸‹çš„æ˜¯ä»»ä½•å½¢å¼çš„åŠŸèƒ½é”®ï¼Œä¸è¦è¿‡æ»¤å®ƒ</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (codeï¼œ <span class=\"number\">32</span> || <span class=\"comment\">//ASCIIæ§åˆ¶å­—ç¬¦</span></div><div class=\"line\">                e.charCode == <span class=\"number\">0</span> || <span class=\"comment\">//åŠŸèƒ½é”®ï¼ˆä»…æŒ‡Firefoxï¼‰</span></div><div class=\"line\">                e.ctrlKey || e.altKey) <span class=\"comment\">//æŒ‰ä¸‹è¾…åŠ©é”®</span></div><div class=\"line\">                <span class=\"keyword\">return</span>; <span class=\"comment\">//ä¸è¿‡æ»¤è¿™ä¸ªäº‹ä»¶</span></div><div class=\"line\">            <span class=\"comment\">//æŠŠå­—ç¬¦ç¼–ç è½¬åŒ–ä¸ºå­—ç¬¦ä¸²</span></div><div class=\"line\">            <span class=\"keyword\">var</span> text = <span class=\"built_in\">String</span>.fromCharCode(code);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">//ç°åœ¨éœ€è¦ä»inputå…ƒç´ ä¸­å¯»æ‰¾æ‰€éœ€ä¿¡æ¯</span></div><div class=\"line\">        <span class=\"keyword\">var</span> allowed = target.getAttribute(<span class=\"string\">\"data-allowed-chars\"</span>); <span class=\"comment\">//åˆæ³•å­—ç¬¦</span></div><div class=\"line\">        <span class=\"keyword\">var</span> messageid = target.getAttribute(<span class=\"string\">\"data-messageid\"</span>); <span class=\"comment\">//ä¿¡æ¯å…ƒç´ id</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (messageid) <span class=\"comment\">//å¦‚æœå­˜åœ¨æ¶ˆæ¯å…ƒç´ idï¼Œé‚£ä¹ˆè·å–è¿™ä¸ªå…ƒç´ </span></div><div class=\"line\">            <span class=\"keyword\">var</span> messageElement = <span class=\"built_in\">document</span>.getElementById(messageid); <span class=\"comment\">//éå†è¾“å…¥æ–‡æœ¬ä¸­çš„å­—ç¬¦</span></div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; iï¼œ text.length; i++) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> c = text.charAt(i);</div><div class=\"line\">            <span class=\"keyword\">if</span> (allowed.indexOf(c) == <span class=\"number\">-1</span>) &#123; <span class=\"comment\">//è¿™æ˜¯ä¸å…è®¸çš„å­—ç¬¦å—ï¼Ÿ</span></div><div class=\"line\">                <span class=\"comment\">//å¦‚æœå­˜åœ¨ä¸åˆæ³•å­—ç¬¦ï¼Œæ˜¾ç¤ºæ¶ˆæ¯å…ƒç´ </span></div><div class=\"line\">                <span class=\"keyword\">if</span> (messageElement) messageElement.style.visibility = <span class=\"string\">\"visible\"</span>; <span class=\"comment\">//å–æ¶ˆé»˜è®¤è¡Œä¸ºï¼Œæ‰€æœ‰ä¸ä¼šæ’å…¥æ–‡æœ¬</span></div><div class=\"line\">                <span class=\"keyword\">if</span> (e.preventDefault) e.preventDefault();</div><div class=\"line\">                <span class=\"keyword\">if</span> (e.returnValue) e.returnValue = <span class=\"literal\">false</span>;</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">//å¦‚æœæ‰€æœ‰çš„å­—ç¬¦éƒ½åˆæ³•ï¼Œéšè—å­˜åœ¨çš„æ¶ˆæ¯å…ƒç´ </span></div><div class=\"line\">        <span class=\"keyword\">if</span> (messageElement) messageElement.style.visibility = <span class=\"string\">\"hidden\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>keypresså’Œtextinputäº‹ä»¶æ˜¯åœ¨æ–°è¾“å…¥çš„æ–‡æœ¬çœŸæ­£æ’å…¥åˆ°èšç„¦çš„æ–‡æ¡£å…ƒç´ å‰è§¦å‘ï¼Œæ‰€ä»¥è¿™äº›äº‹ä»¶å¤„ç†ç¨‹åºèƒ½å¤Ÿå–æ¶ˆäº‹ä»¶å’Œç»„ç»‡æ–‡æœ¬æ’å…¥ã€‚</p>\n<ul>\n<li><p>æµè§ˆå™¨ä¹Ÿå®ç°äº†åœ¨æ–‡æœ¬æ’å…¥åˆ°å…ƒç´ åæ‰è§¦å‘çš„inputäº‹ä»¶ç±»å‹<em>input</em>ã€‚è™½ç„¶è¿™äº›äº‹ä»¶ä¸èƒ½å–æ¶ˆï¼Œä¸èƒ½æŒ‡å®šäº‹ä»¶å¯¹è±¡ä¸­çš„æœ€æ–°æ–‡æœ¬ï¼Œä½†å®ƒä»¬èƒ½ä»¥æŸç§å½¢å¼æä¾›å…ƒç´ æ–‡æœ¬å†…å®¹å‘ç”Ÿæ”¹å˜çš„é€šçŸ¥ã€‚ä¾‹å¦‚ï¼Œæƒ³ç¡®ä¿è¾“å…¥æ¡†ä¸­è¾“å…¥çš„ä»»ä½•æ–‡æœ¬éƒ½æ˜¯å¤§å†™çš„ï¼Œå¯ä»¥ï¼Œä¾‹1-2ï¼š<code>å§“æ°ï¼šï¼œinput type=&quot;text&quot;oninput=&quot;this.value=this.value.toUpperCase();&quot;ï¼</code></p>\n<ul>\n<li><p>html5æ ‡å‡†åŒ–äº†inputï¼Œé™¤IEå¤–çš„æµè§ˆå™¨éƒ½æ”¯æŒå®ƒã€‚åœ¨IEä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸æ ‡å‡†çš„<em>propertychange</em>äº‹ä»¶æ£€æµ‹æ–‡æœ¬è¾“å…¥å…ƒç´ çš„valueå±æ€§æ”¹å˜æ¥å®ç°ç›¸ä¼¼çš„æ•ˆæœã€‚</p>\n<p>ä½¿ç”¨propertychangeäº‹ä»¶æ¢æµ‹æ–‡æœ¬è¾“å…¥</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">forceToUpperCase</span>(<span class=\"params\">element</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> element === <span class=\"string\">\"string\"</span>) element = <span class=\"built_in\">document</span>.getElementById(element);</div><div class=\"line\">    element.oninput = upcase;</div><div class=\"line\">    element.onpropertychange = upcaseOnPropertyChange; <span class=\"comment\">//ç®€æ˜“æ¡ˆä¾‹ï¼šç”¨äºinputäº‹ä»¶çš„å¤„ç†ç¨‹åº</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upcase</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.value = <span class=\"keyword\">this</span>.value.toUpperCase();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">//ç–‘éš¾æ¡ˆä¾‹ï¼šç”¨äºpropertychangeäº‹ä»¶çš„å¤„ç†ç¨‹åº</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upcaseOnPropertyChange</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> e = event || <span class=\"built_in\">window</span>.event;                  <span class=\"comment\">//å¦‚æœvalueå±æ€§å‘ç”Ÿæ”¹å˜</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (e.propertyName === <span class=\"string\">\"value\"</span>) &#123;               <span class=\"comment\">//ç§»é™¤onpropertychangeå¤„ç†ç¨‹åºï¼Œé¿å…å¾ªç¯è°ƒç”¨</span></div><div class=\"line\">            <span class=\"keyword\">this</span>.onpropertychange = <span class=\"literal\">null</span>;               <span class=\"comment\">//æŠŠå€¼éƒ½å˜æˆå¤§å†™</span></div><div class=\"line\">            <span class=\"keyword\">this</span>.value = <span class=\"keyword\">this</span>.value.toUpperCase();      <span class=\"comment\">//ç„¶åæ¢å¤åŸæ¥çš„propertychangeå¤„ç†ç¨‹åº</span></div><div class=\"line\">            <span class=\"keyword\">this</span>.onpropertychange = upcaseOnPropertyChange;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>â€‹</p>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>å‚è€ƒèµ„æ–™ï¼š</p>\n<p>ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹ç¬¬å…­ç‰ˆ p670</p>\n<p><a href=\"http://www.quirksmode.org/dom/events/keys.html\" target=\"_blank\" rel=\"external\">keydown, keypress, keyup</a></p>\n<p><a href=\"http://www.cnblogs.com/owenChen/p/3215421.html\" target=\"_blank\" rel=\"external\">ä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•æ—¶å¯¹é”®ç›˜äº‹ä»¶çš„å¤„ç†</a></p>\n</blockquote>\n"},{"title":"JavaScriptå­—ç¬¦ä¸²æ“ä½œ","url":"http://www.maotingfeng.me/2017/01/12/JavaScriptå­—ç¬¦ä¸²æ“ä½œ/","content":"<h2 id=\"JavaScriptå­—ç¬¦ä¸²æ“ä½œ\"><a href=\"#JavaScriptå­—ç¬¦ä¸²æ“ä½œ\" class=\"headerlink\" title=\"JavaScriptå­—ç¬¦ä¸²æ“ä½œ\"></a>JavaScriptå­—ç¬¦ä¸²æ“ä½œ</h2><p>å±æ€§</p>\n<ul>\n<li><em>length</em>è¿”å›å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°</li>\n</ul>\n<p>æ–¹æ³•</p>\n<ul>\n<li><p>charAt()*å–å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŒ‡å®šä½ç½®çš„å­—ç¬¦</p>\n</li>\n<li><p><em>charCodeAt()</em>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŒ‡å®šä½ç½®çš„å­—ç¬¦çš„ç¼–ç </p>\n</li>\n<li><p><em>concat()</em>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</p>\n</li>\n<li><p><em>indexOf()</em>å’Œ<em>lastIndexOf()</em>åœ¨æŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­å¯»æ‰¾ä¸€ä¸ªå­—ç¬¦æˆ–è€…å­ä¸²ï¼Œè¿”å›å…¶ç´¢å¼•å€¼</p>\n</li>\n<li><p><em>localeCompare()</em>ä½¿ç”¨æœ¬åœ°å®šä¹‰çš„é¡ºåºæ¯”è¾ƒå­—ç¬¦ä¸²</p>\n</li>\n<li><p><em>match()</em>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰§è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œ</p>\n</li>\n<li><p><em>replace()</em>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰§è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œ</p>\n</li>\n<li><p><em>search()</em>åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾åŒ¹é…æŸä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„å­ä¸²</p>\n</li>\n<li><p><em>split()</em>åœ¨æŒ‡å®šçš„åˆ†éš”å­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼å¤„æ–­å¼€ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²ä¸ºç”±å­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„</p>\n</li>\n<li><p><del><em>substr()</em>æå–å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­ä¸²</del>ï¼Œè¿™ä¸ªæ–¹æ³•ä¸å†æ˜¯ECMAScriptçš„æ ‡å‡†ï¼Œå› æ­¤å·²å¼ƒç”¨ã€‚</p>\n<ul>\n<li><p>string.substr(start,length) </p>\n<p>startè¡¨ç¤ºå­ä¸²çš„å¼€å§‹ä½ç½®ï¼Œå¦‚æœæ˜¯è´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºä»å°¾éƒ¨å¼€å§‹è®¡ç®—ï¼Œ-1è¡¨ç¤ºæœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ-2è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ã€‚</p>\n<p>lengthè¡¨ç¤ºè¯¥å­ä¸²ä¸­çš„å­—ç¬¦æ•°ï¼Œå¦‚æœçœç•¥ï¼Œåˆ™å­ä¸²ä¼šåŒ…å«ä»å¼€å§‹ä½ç½®åˆ°å­—ç¬¦ä¸²ç»“æŸçš„æ‰€æœ‰å­—ç¬¦ã€‚</p>\n</li>\n<li><p>åœ¨IEä¸­ä¼ å…¥è´Ÿçš„startä¸ä¼šæ­£å¸¸å·¥ä½œï¼Œå®ƒä»¬ä¸æ˜¯ä»stringçš„å°¾éƒ¨å¼€å§‹è®¡ç®—å­—ç¬¦ä½ç½®ï¼Œè€Œæ˜¯ä»ä½ç½®0å¼€å§‹</p>\n</li>\n</ul>\n</li>\n<li><p><em>slice()</em>è¿”å›å­—ç¬¦ä¸²çš„ä¸€ä¸ªåˆ‡ç‰‡æˆ–å­ä¸²</p>\n<ul>\n<li>string.slice( start , end )<ul>\n<li>startåˆ‡ç‰‡å¼€å§‹çš„å­—ç¬¦ä¸²ç´¢å¼•ï¼Œå¦‚æœä¸ºè´Ÿæ•°ï¼Œåˆ™ä»å­—ç¬¦ä¸²çš„å°¾éƒ¨å¼€å§‹è®¡ç®—ã€‚-1è¡¨ç¤ºæœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ-2è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li>\n<li>endç´§è·Ÿç€åˆ‡ç‰‡ç»“å°¾çš„å­—ç¬¦ä¸²ç´¢å¼•(ä¸åŒ…å«endä½ç½®)ï¼Œå¦‚æœä¸ºè´Ÿæ•°ï¼Œåˆ™ä»å­—ç¬¦ä¸²çš„å°¾éƒ¨å¼€å§‹è®¡ç®—ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåˆ™åˆ‡ç‰‡å°†åŒ…æ‹¬ä»startåˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾çš„æ‰€æœ‰å­—ç¬¦ã€‚</li>\n<li>IE4ä¸­startä¸ºè´Ÿæ•°å°†å‡ºç°é”™è¯¯ï¼ˆåç»­ç‰ˆæœ¬æ— è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œå®ƒä»0çš„ä½ç½®å¼€å§‹è®¡ç®—ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><em>substring()</em>è¿”å›å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­ä¸²ã€‚</p>\n<ul>\n<li><p>string.substring( from , to )</p>\n<ul>\n<li>fromï¼Œä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºè¦æå–çš„å­ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨stringä¸­çš„ä½ç½®ã€‚</li>\n<li>toï¼Œä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œè¦æå–å­ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦çš„ä½ç½®å¤§1ï¼Œå¦‚æœçœç•¥ï¼Œåˆ™è¿”å›çš„å­ä¸²å°†æŒç»­åˆ°stringçš„ç»“å°¾ã€‚</li>\n<li>è¿”å›å­ä¸²é•¿åº¦æ€»æ˜¯ç­‰äºto - from ã€‚</li>\n<li>å¦‚æœfromç­‰äºtoï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸º0ã€‚</li>\n<li>å¦‚æœfromæ¯”toå¤§ï¼Œè¿™ä¸ªæ–¹æ³•å°†å…ˆäº¤æ¢ä¸¤ä¸ªå‚æ•°çš„å€¼ï¼Œç„¶åè¿”å›å®ƒä»¬ä¹‹é—´çš„å­ä¸²ã€‚</li>\n<li>String.slice()å’Œéæ ‡å‡†çš„String.substr()ä¹Ÿèƒ½ä»å­—ç¬¦ä¸²ä¸­æå–å­ä¸²ï¼Œä½†æ˜¯å’Œå®ƒä»¬ä¸åŒçš„æ˜¯ï¼ŒString.substring()ä¸æ¥å—è´Ÿå‚æ•°ã€‚</li>\n</ul>\n<p>â€‹</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>é™æ€æ–¹æ³•</p>\n<ul>\n<li><em>String.fromCharCode()</em>ä½¿ç”¨å­—ç¬¦ç¼–ç åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²</li>\n</ul>\n<blockquote>\n<p>å‚è€ƒèµ„æ–™ï¼šã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹ç¬¬å…­ç‰ˆ p1034</p>\n</blockquote>\n"},{"title":"JavaScriptæ•°ç»„æ“ä½œ","url":"http://www.maotingfeng.me/2017/01/12/JavaScriptæ•°ç»„æ“ä½œ/","content":"<h2 id=\"JavaScriptæ•°ç»„æ“ä½œ\"><a href=\"#JavaScriptæ•°ç»„æ“ä½œ\" class=\"headerlink\" title=\"JavaScriptæ•°ç»„æ“ä½œ\"></a>JavaScriptæ•°ç»„æ“ä½œ</h2><ul>\n<li><p><em>join()</em> æ–¹æ³•å°†æ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¹¶è¿æ¥åœ¨ä¸€èµ·ï¼Œè¿”å›æœ€åç”Ÿæˆçš„å­—ç¬¦ä¸²ã€‚å¯ä»¥æŒ‡å®šä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ä¸²åœ¨ç”Ÿæˆçš„å­—ç¬¦ä¸²ä¸­æ¥åˆ†éš”æ•°ç»„çš„å„ä¸ªå…ƒç´ ï¼Œ<strong>å¦‚æœä¸æŒ‡å®šåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä½¿ç”¨è‹±æ–‡é€—å·</strong>ã€‚ä¸€èˆ¬é…åˆString.split()æ–¹æ³•çš„æ“ä½œã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = [ <span class=\"number\">1</span> , <span class=\"number\">2</span>, <span class=\"number\">3</span> ] ;</div><div class=\"line\">a.join() ;\t<span class=\"comment\">// \"1,2,3\"</span></div></pre></td></tr></table></figure>\n</li>\n<li><p><em>reverse()</em>æ–¹æ³•å°†æ•°ç»„ä¸­çš„å…ƒç´ é¢ å€’æ’åºï¼Œè¿”å›é€†åºçš„æ•°ç»„ï¼Œä¸åˆ›å»ºæ–°æ•°ç»„ï¼Œåœ¨åŸæœ‰çš„æ•°ç»„ä¸Šé€†åºã€‚</p>\n</li>\n<li><p><em>sort()</em>æ–¹æ³•å°†æ•°ç»„çš„å…ƒç´ æ’åºï¼Œå¹¶è¿”å›æ’åºåçš„æ•°ç»„ï¼Œä¸åˆ›å»ºæ–°æ•°ç»„ï¼Œåœ¨åŸæœ‰çš„æ•°ç»„ä¸Šæ’åºã€‚å½“ä¸å¸¦å‚æ•°è°ƒç”¨sort()æ—¶ï¼Œæ•°ç»„å…ƒç´ ä»¥<strong>å­—æ¯é¡ºåºæ’åº</strong>ï¼Œå¦‚æœæ•°ç»„åŒ…å«undefinedå…ƒç´ ï¼Œå®ƒä»¬ä¼šè¢«æ’åˆ°æ•°ç»„çš„å°¾éƒ¨ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = [ <span class=\"number\">33</span> , <span class=\"number\">4</span> , <span class=\"number\">1111</span> , <span class=\"number\">222</span> ] ;</div><div class=\"line\">a.sort( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a,b</span>)</span>&#123; <span class=\"keyword\">return</span> a - b ; &#125; )\t<span class=\"comment\">// a = [4, 33, 222, 1111]</span></div></pre></td></tr></table></figure>\n</li>\n<li><p><em>concat()</em>æ–¹æ³•åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå®ƒçš„å…ƒç´ åŒ…æ‹¬è°ƒç”¨concat()çš„åŸå§‹æ•°ç»„çš„å…ƒç´ å’Œconcat()çš„æ¯ä¸ªå‚æ•°ã€‚å¦‚æœè¿™äº›å‚æ•°ä¸­çš„ä»»ä½•ä¸€ä¸ªè‡ªèº«æ˜¯æ•°ç»„ï¼Œåˆ™è¿æ¥çš„æ˜¯æ•°ç»„çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯æ•°ç»„æœ¬èº«ã€‚ä½†è¦æ³¨æ„ï¼Œconcat()ä¸ä¼šé€’å½’æ‰å¹³åŒ–çš„æ•°ç»„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> ] ;</div><div class=\"line\">a.concat( <span class=\"number\">4</span> , <span class=\"number\">5</span> ) ; \t<span class=\"comment\">// [ 1 , 2 , 3 , 4 ,5 ]</span></div><div class=\"line\"><span class=\"keyword\">var</span> b = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> ,<span class=\"number\">3</span> ] ;</div><div class=\"line\">b.concat( [ <span class=\"number\">4</span> , <span class=\"number\">5</span> ] ) ; <span class=\"comment\">// [ 1 , 2 , 3 , 4 , 5]</span></div><div class=\"line\"><span class=\"keyword\">var</span> c = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> ]</div><div class=\"line\">c.concat( [ <span class=\"number\">4</span> , [ <span class=\"number\">5</span> ] ] ) ;\t<span class=\"comment\">// [ 1 , 2 , 3 , 4 , [ 5 ] ]</span></div></pre></td></tr></table></figure>\n</li>\n<li><p><em>slice()</em>æ–¹æ³•è¿”å›æŒ‡å®šæ•°ç»„çš„ä¸€ä¸ªç‰‡æ®µæˆ–å€æ•°ç»„ï¼Œè¿”å›æ–°æ•°ç»„ã€‚å®ƒçš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æŒ‡å®šäº†ç‰‡æ®µçš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚è¿”å›çš„æ•°ç»„åŒ…å«ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„ä½ç½®å’Œåˆ°ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä¸åŒ…å«ç¬¬äºŒä¸ªå‚æ•°ï¼‰æŒ‡å®šçš„ä½ç½®ä¹‹é—´çš„æ•°ç»„å…ƒç´ ã€‚</p>\n<ul>\n<li>å¦‚æœæŒ‡å®šä¸€ä¸ªå‚æ•°ï¼Œè¿”å›çš„æ•°ç»„åŒ…å«ä»å¼€å§‹ä½ç½®åˆ°æ•°ç»„ç»“å°¾çš„æ‰€æœ‰å…ƒç´ ã€‚</li>\n<li>å¦‚æœå‚æ•°ä¸­å‡ºç°è´Ÿæ•°ï¼Œå®ƒè¡¨ç¤ºç›¸å¯¹äºæ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®ã€‚-1æŒ‡å®šäº†æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ-3å€’æ•°ç¬¬ä¸‰ä¸ªå…ƒç´ ã€‚</li>\n<li>å¦‚æœä¸æŒ‡å®šå¼€å§‹ä½ç½®ï¼Œé»˜è®¤ä»0å¼€å§‹</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> , <span class=\"number\">4</span> , <span class=\"number\">5</span> ] ;</div><div class=\"line\">a.slice( <span class=\"number\">0</span> , <span class=\"number\">3</span> ) ; \t<span class=\"comment\">// [ 1 , 2 , 3 ]</span></div><div class=\"line\">a.slice( <span class=\"number\">-3</span> , <span class=\"number\">-2</span> ) ; <span class=\"comment\">// [ 3 ]</span></div><div class=\"line\">a.slice() \t\t\t<span class=\"comment\">// [ 1 , 2 , 3 , 4 , 5 ]</span></div></pre></td></tr></table></figure>\n</li>\n<li><p><em>splice()</em>æ–¹æ³•åœ¨æ•°ç»„ä¸­æ’å…¥æˆ–åˆ é™¤å…ƒç´ çš„é€šç”¨æ–¹æ³•ï¼ŒåŸæœ‰çš„æ•°ç»„ç›¸åº”çš„è¢«ä¿®æ”¹ï¼Œè¿”å›è¢«åˆ é™¤å…ƒç´ çš„æ–°æ•°ç»„ã€‚</p>\n<ul>\n<li><p>ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†æ’å…¥ï¼ˆæˆ–åˆ é™¤ï¼‰çš„èµ·å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†åº”è¯¥ä»æ•°ç»„ä¸­åˆ é™¤çš„å…ƒç´ çš„ä¸ªæ•°ã€‚å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»èµ·å§‹åˆ°æ•°ç»„ç»“å°¾çš„æ‰€æœ‰å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚å¦‚æœæ²¡æœ‰è¢«åˆ é™¤çš„å…ƒç´ ï¼Œå°±è¿”å›ç©ºæ•°ç»„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> , <span class=\"number\">4</span> , <span class=\"number\">5</span> , <span class=\"number\">6</span> , <span class=\"number\">7</span> , <span class=\"number\">8</span> ];</div><div class=\"line\">a.splice( <span class=\"number\">4</span> ) ;\t<span class=\"comment\">// è¿”å›[ 5 , 6 , 7 , 8 ];aæ˜¯[ 1 , 2 , 3 , 4 ]</span></div><div class=\"line\"><span class=\"keyword\">var</span> b = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> , <span class=\"number\">4</span> , <span class=\"number\">5</span> , <span class=\"number\">6</span> , <span class=\"number\">7</span> , <span class=\"number\">8</span> ];</div><div class=\"line\">b.splice( <span class=\"number\">4</span> , <span class=\"number\">2</span> ) ;\t<span class=\"comment\">// è¿”å›[ 5 , 6 ];bæ˜¯[ 1 , 2 , 3 , 4 , 7 , 8 ]</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>å‰ä¸¤ä¸ªå‚æ•°æŒ‡å®šäº†éœ€è¦åˆ é™¤çš„æ•°ç»„å…ƒç´ ï¼Œåé¢çš„ä»»æ„ä¸ªå‚æ•°æŒ‡å®šäº†éœ€è¦æ’å…¥åˆ°æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œä»ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„ä½ç½®å¼€å§‹æ’å…¥ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> , <span class=\"number\">4</span> , <span class=\"number\">5</span> ] ;</div><div class=\"line\">a.splice( <span class=\"number\">2</span> , <span class=\"number\">2</span> , <span class=\"string\">'a'</span> , <span class=\"string\">'b'</span> , [ <span class=\"string\">'c'</span> ] ) ; <span class=\"comment\">// [ 1 , 2 , 'a' , 'b' , [ 'c' ] , 5 ]</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p><em>push()</em>å’Œ<em>pop()</em>æ–¹æ³•å…è®¸å°†æ•°ç»„å½“ä½œæ ˆæ¥ä½¿ç”¨ï¼Œéƒ½æ˜¯ä¿®æ”¹åŸæœ‰çš„æ•°ç»„ã€‚</p>\n<ul>\n<li>push()æ–¹æ³•ï¼Œåœ¨æ•°ç»„çš„å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶ä¸”è¿”å›æ•°ç»„çš„æ–°é•¿åº¦ã€‚</li>\n<li>pop()æ–¹æ³•ç›¸åï¼Œå®ƒåˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”è¿”å›å®ƒåˆ é™¤çš„å€¼ã€‚</li>\n</ul>\n</li>\n<li><p><em>unshift()</em>å’Œshift()æ–¹æ³•ï¼Œåœ¨æ•°ç»„çš„å¤´éƒ¨è¿›è¡Œå…ƒç´ çš„æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</p>\n<ul>\n<li>unshift()åœ¨æ•°ç»„çš„å¤´éƒ¨æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œè¿”å›æ•°ç»„çš„æ–°é•¿åº¦ã€‚å¤šä¸ªå‚æ•°æ—¶ï¼Œæ’å…¥çš„å…ƒç´ é¡ºåºå’Œå‚æ•°é¡ºåºä¸€è‡´ã€‚</li>\n<li>shift()åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶ä¸”å°†å…¶è¿”å›ã€‚</li>\n</ul>\n</li>\n<li><p><em>toString()</em>å’Œ<em>toLocaleString()</em>æ–¹æ³•ï¼Œå°†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼ˆå¦‚æœ‰å¿…è¦ï¼Œå°†è°ƒç”¨å…ƒç´ çš„toString()æ–¹æ³•ï¼‰ï¼Œå¹¶ä¸”è¾“å‡ºç”¨é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²åˆ—è¡¨ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> ].toString() <span class=\"comment\">// \"1,2,3\"</span></div><div class=\"line\">[ <span class=\"string\">'a'</span> , <span class=\"string\">'b'</span> , <span class=\"string\">'c'</span> ].toString() <span class=\"comment\">// \"a,b,c\"</span></div><div class=\"line\">[ <span class=\"number\">1</span> , [ <span class=\"number\">2</span> , <span class=\"string\">'c'</span> ] ].toString() <span class=\"comment\">// \"1,2,c\"</span></div><div class=\"line\"><span class=\"comment\">// è¿™é‡Œå’Œä¸ä½¿ç”¨å‚æ•°çš„join()æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ä¸€è‡´</span></div></pre></td></tr></table></figure>\n<ul>\n<li>toLocaleString()æ˜¯toString()æ–¹æ³•çš„æœ¬åœ°åŒ–ç‰ˆæœ¬ï¼Œå®ƒè°ƒç”¨å…ƒç´ çš„toLocaleString()æ–¹æ³•å°†æ¯ä¸ªæ•°ç»„å…ƒç´ è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨æœ¬åœ°åŒ–çš„ï¼ˆæˆ–è€…è‡ªå®šä¹‰å®ç°çš„ï¼‰åˆ†éš”ç¬¦å°†è¿™äº›å­—ç¬¦ä¸²è¿æ¥èµ·æ¥ç”Ÿæˆæœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// ä¸åŒçš„åŒºåŸŸè®¾ç½®å’Œè¯­è¨€è®¾ç½®ï¼Œæ‰§è¡Œçš„è¾“å‡ºç»“æœå¯èƒ½ä¸åŒã€‚</span></div><div class=\"line\">[ <span class=\"number\">1</span> , [ <span class=\"number\">2</span> , <span class=\"string\">'c'</span> ] ].toLocaleString() <span class=\"comment\">// \"1,2,c\"</span></div><div class=\"line\">[ <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() ].toLocaleString()\t\t <span class=\"comment\">// \"2017/1/11 ä¸Šåˆ10:31:37\"</span></div><div class=\"line\">[ <span class=\"number\">15.26440</span> ].toLocaleString()\t\t <span class=\"comment\">// \"15.264\"</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"ECMAScript5ä¸­æ•°ç»„çš„æ–¹æ³•\"><a href=\"#ECMAScript5ä¸­æ•°ç»„çš„æ–¹æ³•\" class=\"headerlink\" title=\"ECMAScript5ä¸­æ•°ç»„çš„æ–¹æ³•\"></a>ECMAScript5ä¸­æ•°ç»„çš„æ–¹æ³•</h4><ul>\n<li><p><em>forEach()</em>æ–¹æ³•ä»å¤´è‡³å°¾éå†æ•°ç»„ï¼Œä¸ºæ¯ä¸ªå…ƒç´ è°ƒç”¨æŒ‡å®šçš„å‡½æ•°ã€‚</p>\n</li>\n<li><p><em>map()</em>æ–¹æ³•å°†è°ƒç”¨çš„æ¯ä¸ªå…ƒç´ ä¼ é€’ç»™æŒ‡å®šçš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«è¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚</p>\n</li>\n<li><p><em>filter()</em>æ–¹æ³•è¿”å›çš„æ•°ç»„å…ƒç´ æ˜¯è°ƒç”¨çš„æ•°ç»„çš„ä¸€ä¸ªå­é›†ï¼Œfilter()ä¼šè·³è¿‡ç¨€ç–æ•°ç»„ä¸­ç¼ºå°‘çš„å…ƒç´ ï¼Œå®ƒçš„è¿”å›æ•°ç»„æ€»æ˜¯ç¨ å¯†çš„ã€‚</p>\n</li>\n<li><p><em>every()</em>å’Œ<em>some()</em>æ–¹æ³•æ˜¯æ•°ç»„çš„é€»è¾‘åˆ¤å®šï¼šå®ƒä»¬å¯¹æ•°ç»„å…ƒç´ åº”ç”¨æŒ‡å®šçš„å‡½æ•°è¿›è¡Œåˆ¤å®šï¼Œè¿”å›trueå’Œfalseã€‚</p>\n<ul>\n<li><p>every()æ–¹æ³•é’ˆå¯¹æ‰€æœ‰å…ƒç´ è°ƒç”¨åˆ¤å®šå‡½æ•°ï¼Œéƒ½è¿”å›trueæ—¶ï¼Œå®ƒæ‰è¿”å›trueã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> , <span class=\"number\">4</span> , <span class=\"number\">5</span> ] ;</div><div class=\"line\">a.every( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>)</span>&#123; <span class=\"keyword\">return</span> x &lt; <span class=\"number\">10</span> ; &#125; )\t<span class=\"comment\">// true</span></div><div class=\"line\">a.every( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>)</span>&#123; <span class=\"keyword\">return</span> x % <span class=\"number\">2</span> === <span class=\"number\">0</span> ; &#125; )\t<span class=\"comment\">// false</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>some()æ–¹æ³•å½“æ•°ç»„ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ è°ƒç”¨åˆ¤å®šå‡½æ•°è¿”å›trueæ—¶ï¼Œå®ƒå°±è¿”å›trueï¼›å¦åˆ™è¿”å›falseã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = [ <span class=\"number\">1</span> , <span class=\"number\">2</span> , <span class=\"number\">3</span> , <span class=\"number\">4</span> , <span class=\"number\">5</span> ] ;</div><div class=\"line\">a.some( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>)</span>&#123; <span class=\"keyword\">return</span> x % <span class=\"number\">2</span> === <span class=\"number\">0</span> ; &#125; )\t<span class=\"comment\">// true</span></div><div class=\"line\">a.some( <span class=\"built_in\">isNaN</span> )\t\t\t\t\t\t\t\t\t<span class=\"comment\">// false</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>åœ¨ç©ºæ•°ç»„ä¸Šè°ƒç”¨æ—¶ï¼Œevery()è¿”å›trueï¼Œsome()è¿”å›falseã€‚</p>\n</li>\n<li><p>every()åˆ¤å®šå‡½æ•°ç¬¬ä¸€æ¬¡è¿”å›falseæ—¶ï¼Œä¼šç«‹å³ç»ˆæ­¢éå†ï¼Œè¿”å›falseï¼›some()åˆ¤å®šå‡½æ•°ç¬¬ä¸€æ¬¡è¿”å›trueï¼Œä¼šç«‹å³ç»ˆæ­¢éå†ï¼Œè¿”å›trueã€‚</p>\n</li>\n</ul>\n</li>\n<li><p><em>reduce()</em>å’Œ<em>reduceRight()</em>æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„å‡½æ•°å°†æ•°ç»„è¿›è¡Œç»„åˆã€‚</p>\n</li>\n<li><p><em>indexOf()</em>å’Œ<em>lastIndexOf()</em>æœç´¢æ•´ä¸ªæ•°ç»„ä¸­å…·ä½“ç»™å®šå€¼çš„å…ƒç´ ï¼Œè¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±è¿”å›-1ã€‚</p>\n<ul>\n<li>indexOf()ä»å¤´è‡³å°¾æœç´¢ï¼Œè€ŒlastIndexOf()åˆ™åå‘æœç´¢ã€‚</li>\n</ul>\n</li>\n</ul>\n"},{"title":"jsè·å–ç»‘å®šåˆ°æŸå…ƒç´ ä¸Šçš„äº‹ä»¶","url":"http://www.maotingfeng.me/2017/01/09/jsè·å–ç»‘å®šåˆ°æŸå…ƒç´ ä¸Šçš„äº‹ä»¶/","content":"<h2 id=\"jsè·å–ç»‘å®šåˆ°æŸå…ƒç´ ä¸Šçš„äº‹ä»¶\"><a href=\"#jsè·å–ç»‘å®šåˆ°æŸå…ƒç´ ä¸Šçš„äº‹ä»¶\" class=\"headerlink\" title=\"jsè·å–ç»‘å®šåˆ°æŸå…ƒç´ ä¸Šçš„äº‹ä»¶\"></a>jsè·å–ç»‘å®šåˆ°æŸå…ƒç´ ä¸Šçš„äº‹ä»¶</h2><p>1ã€å¦‚æœç»‘å®šåœ¨äº†å…ƒç´ çš„äº‹ä»¶å±æ€§ä¸Šï¼Œåˆ™å¯ä»¥è·å–åˆ°ã€‚</p>\n<p>ä¾‹1-1:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> div = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'div'</span>) ;</div><div class=\"line\"><span class=\"comment\">// ç»‘å®š</span></div><div class=\"line\">div.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; <span class=\"built_in\">console</span>.log( <span class=\"string\">'ç‚¹å‡»äº†div'</span> ); &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// è·å–ç»‘å®š</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log( <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'div'</span>).onclick ) ;</div><div class=\"line\"><span class=\"comment\">// æ‰“å°å‡ºï¼š function () &#123; console.log('ç‚¹å‡»äº†div'); &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å¦‚æœæœªå®šä¹‰onclickçš„å±æ€§äº‹ä»¶ï¼Œåˆ™æ‰“å°å‡ºï¼šnull</span></div></pre></td></tr></table></figure>\n<p>2ã€å¦‚æœæ˜¯ç”¨<code>addEventListener</code>ç»‘å®šçš„äº‹ä»¶ï¼Œåˆ™æ˜¯è·å–ä¸äº†å·²ç»ç»‘å®šçš„äº‹ä»¶çš„ã€‚</p>\n<p>â€‹    - ä¸è¿‡chromeçš„æ§åˆ¶å°å¯ä»¥æ‹¿åˆ°</p>\n<p>â€‹    <code>getEventListeners( ele )</code>å¯ä»¥è¿”å›eleå…ƒç´ å·²ç»‘å®šäº‹ä»¶çš„å¯¹è±¡åˆ—è¡¨ã€‚ä»…é™è°ƒè¯•æ¨¡å¼çš„consoleé‡Œé¢ä½¿ç”¨ï¼Œä»£ç é‡Œè·‘æ˜¯ä¸è¡Œçš„ã€‚æ‰€ä»¥å¯¹å¼€å‘å¹¶æ²¡æœ‰ä»€ä¹ˆå¸®åŠ©ã€‚</p>\n<p>â€‹    - æ§åˆ¶é¢æ¿çš„<code>Elements</code>é¢æ¿å³ä¾§çš„<code>Event Listeners</code>å­é¢æ¿é‡Œé¢æœ‰é€‰ä¸­å…ƒç´ çš„å·²ç»‘å®šçš„äº‹ä»¶åˆ—è¡¨ã€‚</p>\n<p>â€‹    - ä¹‹å‰DOM 3äº‹ä»¶æ¨¡å‹ä¸Šæœ‰ä¸ªææ¡ˆï¼Œå»ºè®®åœ¨å…ƒç´ ä¸Šæ·»åŠ ä¸€ä¸ª<code>eventListenerList</code>å±æ€§æ¥ä¿å­˜å·²ç»ç»‘å®šè¿‡çš„äº‹ä»¶ï¼Œä½†æ˜¯è²Œä¼¼æ²¡æœ‰é€šè¿‡ã€‚æ‰€ä»¥<code>addEventListener</code>ç»‘å®šçš„äº‹ä»¶ï¼Œæƒ³è¦è·å–å·²ç»ç»‘å®šçš„äº‹ä»¶å¤„ç†å™¨ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•ç›´æ¥çš„æœºåˆ¶è·å–çš„ã€‚</p>\n<p>3ã€å¦‚æœå®åœ¨æƒ³çŸ¥é“æŸä¸ªå…ƒç´ ç»‘å®šè¿‡å“ªäº›äº‹ä»¶ï¼Œåªèƒ½è‡ªå·±å®ç°ä¸€ä¸ªç±»ä¼¼çš„ç²¾ç®€ç‰ˆçš„ç¼“å­˜æœºåˆ¶äº†ã€‚ç»‘å®šè¿‡çš„æ ‡è®°ä¸€ä¸‹ï¼Œå­˜åœ¨å…¨å±€å˜é‡é‡Œï¼Œå­˜åœ¨å¯¹åº”çš„å…ƒç´ ä¸Šç­‰ç­‰ã€‚å¯¹åº”äºæŸäº›å…·ä½“åœºæ™¯ï¼Œå¯ä»¥å…ˆ<code>removeEventListener</code>ç„¶å<code>addEventListener</code>ï¼Œä¸è¿‡å±€é™æ€§å¾ˆå¤§ã€‚</p>\n<p>4ã€å¸¸ç”¨ç±»åº“ä¸€èˆ¬éƒ½å°è£…äº†å¸¸ç”¨çš„äº‹ä»¶æ“ä½œï¼Œç»‘å®šï¼Œè§£ç»‘ä¹‹ç±»çš„ï¼›ä¸€èˆ¬éƒ½ä¼šç¼“å­˜å·²ç»ç»‘å®šçš„äº‹ä»¶ï¼Œæ‰€ä»¥ä»å®ƒé‡Œé¢å¯ä»¥æ‹¿åˆ°æŸä¸ªå…ƒç´ å·²ç»ç»‘å®šçš„äº‹ä»¶ã€‚</p>\n<p>æ¯”å¦‚jquery</p>\n<p>ä¾‹1-2:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> clickEvents = $( ele ).data(<span class=\"string\">\"events\"</span>).click;</div><div class=\"line\">jQuery.each(clickEvents, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, handlerObj</span>) </span>&#123;</div><div class=\"line\">    alert(handlerObj.handler) <span class=\"comment\">// alerts \"function() &#123; alert('clicked!') &#125;\"</span></div><div class=\"line\">    <span class=\"comment\">// also available: handlerObj.type, handlerObj.namespace</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>5ã€å¼€å‘æ¨¡å¼çš„è°ƒè¯•é˜¶æ®µï¼Œä½ å¯ä»¥è¯•è¯•ï¼š<a href=\"http://www.sprymedia.co.uk/article/Visual+Event+2\" target=\"_blank\" rel=\"external\">visual event</a></p>\n<p>ä¸­æ–‡ç®€ä»‹ï¼š<a href=\"http://web.jobbole.com/82503/\" target=\"_blank\" rel=\"external\">ã€ŠVisual Event ï¼šå¿«é€ŸæŸ¥çœ‹ DOM ä¸Šç»‘å®šçš„ JS äº‹ä»¶ã€‹</a></p>\n<blockquote>\n<p>å‚è€ƒèµ„æ–™ğŸ”—</p>\n<p>1ã€<a href=\"http://stackoverflow.com/questions/446892/how-to-find-event-listeners-on-a-dom-node-when-debugging-or-from-the-javascript\" target=\"_blank\" rel=\"external\">How to find event listeners on a DOM node when debugging or from the JavaScript code?</a></p>\n<p>2ã€<a href=\"https://segmentfault.com/q/1010000006829568\" target=\"_blank\" rel=\"external\">js æœ‰æ²¡æœ‰åŠæ³• åˆ¤æ–­ä¸€ä¸ªdomå…ƒç´ æ˜¯å¦å·²ç»ç»‘å®šäº†æŸä¸ªäº‹ä»¶ï¼Ÿï¼Ÿ</a></p>\n</blockquote>\n"},{"title":"jsæ—¥æœŸå¯¹è±¡çš„å°æŠ€å·§","url":"http://www.maotingfeng.me/2017/01/05/jsæ—¥æœŸå¯¹è±¡çš„å°æŠ€å·§/","content":"<h3 id=\"jsæ—¥æœŸå¯¹è±¡çš„å°æŠ€å·§\"><a href=\"#jsæ—¥æœŸå¯¹è±¡çš„å°æŠ€å·§\" class=\"headerlink\" title=\"jsæ—¥æœŸå¯¹è±¡çš„å°æŠ€å·§\"></a>jsæ—¥æœŸå¯¹è±¡çš„å°æŠ€å·§</h3><ol>\n<li><p>è·å–æ¯ä¸ªæœˆæœ‰å¤šå°‘å¤©</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> days_per_month = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>( year , month , <span class=\"number\">0</span> ) ; \t<span class=\"comment\">// æœ€åä¸€ä½ç­‰äº0å³å¯</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>æ¯æœˆçš„ç¬¬ä¸€å¤©æ˜¯å‘¨å‡ </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> day_of_month = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>( year , month , <span class=\"number\">1</span>).getDay() ;\t<span class=\"comment\">// å°±æ˜¯æ™®é€šè·å–æ˜ŸæœŸæ•°</span></div></pre></td></tr></table></figure>\n<p>â€‹</p>\n</li>\n</ol>\n"},{"title":"jså¸¸ç”¨å·¥å…·å‡½æ•°","url":"http://www.maotingfeng.me/2017/01/03/jså¸¸ç”¨å·¥å…·å‡½æ•°/","content":"<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// å¸¸ç”¨æ­£åˆ™æ ¡éªŒ</span></div><div class=\"line\"><span class=\"keyword\">var</span> hrjia = &#123;</div><div class=\"line\">    check: &#123;</div><div class=\"line\">        isPhone: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> ua = navigator.userAgent.toLowerCase(),</div><div class=\"line\">                reg = <span class=\"regexp\">/iPhone|iPad|Android|ucweb|windows\\s+mobile|Windows\\s+Phone/i</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> reg.test(ua)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isIE6: <span class=\"built_in\">window</span>.VBArray &amp;&amp; !<span class=\"built_in\">window</span>.XMLHttpRequest,</div><div class=\"line\">        isNick: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">str</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> nickReg = <span class=\"regexp\">/^[\\u4e00-\\u9fa5A-Za-z0-9-_]+$/</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> nickReg.test(str)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isEmail: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">str</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> emailReg = <span class=\"regexp\">/^[a-z0-9][\\w\\.]*@([a-z0-9][a-z0-9-]*\\.)+[a-z]&#123;2,5&#125;$/i</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> emailReg.test(str)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isMobile: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">str</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> mobileReg = <span class=\"regexp\">/^1[345678][0-9]&#123;9&#125;$/</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> mobileReg.test(str)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isTelephone: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">str</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> phoneReg = <span class=\"regexp\">/^0\\d&#123;2,3&#125;-\\d&#123;5,9&#125;$/</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> phoneReg.test(str)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isUrl: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">str</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> urlReg = <span class=\"regexp\">/^http:\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w-.\\/?%&amp;=]*)?$/</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> urlReg.test(str)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isNum: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">str</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> numReg = <span class=\"regexp\">/^[0-9]\\d*$/</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> numReg.test(str)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isFloatNum: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">str</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> floatReg = <span class=\"regexp\">/^(-?\\d+)(\\.\\d+)?$/</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> floatReg.test(str)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isDate: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">str</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> dateReg = <span class=\"regexp\">/^((((1[6-9]|[2-9]\\d)\\d&#123;2&#125;)-(0?[13578]|1[02])-(0?[1-9]|[12]\\d|3[01]))|(((1[6-9]|[2-9]\\d)\\d&#123;2&#125;)-(0?[13456789]|1[012])-(0?[1-9]|[12]\\d|30))|(((1[6-9]|[2-9]\\d)\\d&#123;2&#125;)-0?2-(0?[1-9]|1\\d|2[0-8]))|(((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))-0?2-29-))$/</span>;</div><div class=\"line\">            <span class=\"keyword\">return</span> dateReg.test(str)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        isAnimate: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">style</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> prefix = [<span class=\"string\">\"webkit\"</span>, <span class=\"string\">\"Moz\"</span>, <span class=\"string\">\"ms\"</span>, <span class=\"string\">\"o\"</span>],</div><div class=\"line\">                i, humpString = [],</div><div class=\"line\">                htmlStyle = <span class=\"built_in\">document</span>.documentElement.style,</div><div class=\"line\">                _toHumb = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">string</span>) </span>&#123;</div><div class=\"line\">                    <span class=\"keyword\">return</span> string.replace(<span class=\"regexp\">/-(\\w)/g</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$0, $1</span>) </span>&#123;</div><div class=\"line\">                        <span class=\"keyword\">return</span> $<span class=\"number\">1.</span>toUpperCase()</div><div class=\"line\">                    &#125;)</div><div class=\"line\">                &#125;;</div><div class=\"line\">            <span class=\"keyword\">for</span> (i <span class=\"keyword\">in</span> prefix) &#123;</div><div class=\"line\">                humpString.push(_toHumb(prefix[i] + <span class=\"string\">\"-\"</span> + style))</div><div class=\"line\">            &#125;</div><div class=\"line\">            humpString.push(_toHumb(style));</div><div class=\"line\">            <span class=\"keyword\">for</span> (i <span class=\"keyword\">in</span> humpString) &#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (humpString[i] <span class=\"keyword\">in</span> htmlStyle) &#123;</div><div class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">// å·¥å…·ç±»</span></div><div class=\"line\">    tools: &#123;</div><div class=\"line\">        <span class=\"comment\">// è·å–urlçš„å‚æ•°</span></div><div class=\"line\">        getUrlParams: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> url = location.href,</div><div class=\"line\">                value = <span class=\"literal\">null</span>,</div><div class=\"line\">                index = url.indexOf(<span class=\"string\">\"?\"</span>);</div><div class=\"line\">            <span class=\"keyword\">if</span> (index &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                <span class=\"keyword\">if</span>( name )&#123;</div><div class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span> ;</div><div class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">                    <span class=\"keyword\">return</span> &#123;&#125; ;</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                <span class=\"keyword\">var</span> paramstr = url.substring(index + <span class=\"number\">1</span>),</div><div class=\"line\">                    obj = &#123;&#125;,</div><div class=\"line\">                    arrParams = paramstr.split(<span class=\"string\">\"&amp;\"</span>);</div><div class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arrParams.length; i++) &#123;</div><div class=\"line\">                    <span class=\"keyword\">var</span> tmp = arrParams[i].split(<span class=\"string\">\"=\"</span>);</div><div class=\"line\">                    obj[tmp[<span class=\"number\">0</span>]] = tmp[<span class=\"number\">1</span>] ? <span class=\"built_in\">decodeURIComponent</span>( tmp[<span class=\"number\">1</span>] ) : <span class=\"literal\">undefined</span> ;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">if</span> (name) &#123;</div><div class=\"line\">                    <span class=\"keyword\">return</span> obj[name]</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                    <span class=\"keyword\">return</span> obj</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; ,</div><div class=\"line\">        <span class=\"comment\">// è·å–urlçš„èŠ‚ç‚¹éƒ¨åˆ†  http://www.hrjia.com/hr/resume/HR1028131626713</span></div><div class=\"line\">        <span class=\"comment\">// æ‰§è¡Œä¹‹åè¿”å› [\"www.hrjia.com\", \"hr\", \"resume\", \"HR1028131626713\"]</span></div><div class=\"line\">        getUrlTree: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">index</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> urlNode = location.href.replace(<span class=\"regexp\">/http:\\/\\//i</span>, <span class=\"string\">\"\"</span>).replace(<span class=\"regexp\">/\\?.*/i</span>, <span class=\"string\">\"\"</span>).split(<span class=\"string\">\"/\"</span>),</div><div class=\"line\">                length = urlNode.length;</div><div class=\"line\">            <span class=\"keyword\">if</span> (index == <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> urlNode</div><div class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> index &lt; <span class=\"number\">0</span> ? urlNode[length + index] : urlNode[index]</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">  \t<span class=\"comment\">// å‰ç¼€è¡¥é½   function addZero(str,length)&#123;return new Array(length - str.length + 1).join(\"0\") + str;&#125;</span></div><div class=\"line\">    pad:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num, n</span>) </span>&#123;  </div><div class=\"line\">      <span class=\"keyword\">var</span> len = num.toString().length;  </div><div class=\"line\">      <span class=\"keyword\">while</span>(len &lt; n) &#123;  </div><div class=\"line\">          num = <span class=\"string\">\"0\"</span> + num;  </div><div class=\"line\">          len++;  </div><div class=\"line\">      &#125;  </div><div class=\"line\">      <span class=\"keyword\">return</span> num;  </div><div class=\"line\">  &#125; ,</div><div class=\"line\">    padNumber: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num, fill</span>) </span>&#123;  <span class=\"comment\">/* å­—ç¬¦è‡ªåŠ¨è¡¥å…¨ */</span></div><div class=\"line\">      <span class=\"comment\">//æ”¹è‡ªï¼šhttp://segmentfault.com/q/1010000002607221</span></div><div class=\"line\">      <span class=\"keyword\">var</span> len = (<span class=\"string\">''</span> + num).length;</div><div class=\"line\">      <span class=\"keyword\">return</span> (<span class=\"built_in\">Array</span>(</div><div class=\"line\">      fill &gt; len ? fill - len + <span class=\"number\">1</span> || <span class=\"number\">0</span> : <span class=\"number\">0</span></div><div class=\"line\">      ).join(<span class=\"number\">0</span>) + num);</div><div class=\"line\">    &#125; ,</div><div class=\"line\">  \t<span class=\"comment\">/* uuidç”Ÿæˆå™¨ */</span></div><div class=\"line\">    UUID: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">      <span class=\"keyword\">var</span> uuid = <span class=\"string\">'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'</span>.replace(<span class=\"regexp\">/[xy]/g</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">c</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> r = (d + <span class=\"built_in\">Math</span>.random()*<span class=\"number\">16</span>)%<span class=\"number\">16</span> | <span class=\"number\">0</span>;</div><div class=\"line\">        d = <span class=\"built_in\">Math</span>.floor(d/<span class=\"number\">16</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> (c==<span class=\"string\">'x'</span> ? r : (r&amp;<span class=\"number\">0x7</span>|<span class=\"number\">0x8</span>)).toString(<span class=\"number\">16</span>);</div><div class=\"line\">      &#125;);</div><div class=\"line\">      <span class=\"keyword\">return</span> uuid;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">/* åˆ¤æ–­æ˜¯å¦æ˜¯æœ‰æ•ˆçš„æ—¥æœŸå¯¹è±¡ */</span></div><div class=\"line\">    isDateObj: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">o</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;&#125;.toString.call(o) === <span class=\"string\">\"[object Date]\"</span> &amp;&amp; o.toString() !== <span class=\"string\">'Invalid Date'</span> &amp;&amp; !<span class=\"built_in\">isNaN</span>(o);</div><div class=\"line\">    &#125; ,</div><div class=\"line\">  <span class=\"comment\">/* æ ¡éªŒæ—¥æœŸæ ¼å¼ */</span></div><div class=\"line\">  checkDate: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> date </span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">/* å¹´æœˆæ—¥ æ ¼å¼yyyy-MM-ddæˆ–yyyy-M-d -/.åˆ†å‰² */</span></div><div class=\"line\">    <span class=\"keyword\">var</span> dateReg = <span class=\"regexp\">/^(?:(?!0000)[0-9]&#123;4&#125;([-/.]?)(?:(?:0?[1-9]|1[0-2])\\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\\1(?:29|30)|(?:0?[13578]|1[02])\\1(?:31))|(?:[0-9]&#123;2&#125;(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\\2(?:29))$/</span>;</div><div class=\"line\">    <span class=\"comment\">/* å¹´æœˆæ—¥ æ ¼å¼yyyy-MM-dd HH:mm:ss -/.åˆ†å‰² */</span></div><div class=\"line\">    <span class=\"keyword\">var</span> dateTimeReg = <span class=\"regexp\">/^(?:(?!0000)[0-9]&#123;4&#125;([-/.]?)(?:(?:0?[1-9]|1[0-2])\\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\\1(?:29|30)|(?:0?[13578]|1[02])\\1(?:31))|(?:[0-9]&#123;2&#125;(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\\2(?:29))\\s+([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span>( date.indexOf(<span class=\"string\">':'</span>) &lt; <span class=\"number\">0</span> )&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> dateReg.test( date ) ;</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> dateTimeReg.test( date ) ;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n"},{"title":"reactå­¦ä¹ ä¸¤å¼ å›¾","url":"http://www.maotingfeng.me/2017/01/03/reactå­¦ä¹ ä¸¤å¼ å›¾/","content":"<h3 id=\"Reactå­¦ä¹ ä¸¤å¼ å›¾\"><a href=\"#Reactå­¦ä¹ ä¸¤å¼ å›¾\" class=\"headerlink\" title=\"Reactå­¦ä¹ ä¸¤å¼ å›¾\"></a>Reactå­¦ä¹ ä¸¤å¼ å›¾</h3><p><img src=\"http://oco9w3mgp.bkt.clouddn.com/react-lifyCycle.png\" alt=\"react-lifecycle\"></p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/react-lifyCycle2.png\" alt=\"react-lifycycle2\"></p>\n<p>1ã€<a href=\"https://segmentfault.com/a/1190000003691119\" target=\"_blank\" rel=\"external\">reactç”Ÿå‘½å‘¨æœŸReact Component Lifecycle(segmentfault)</a></p>\n<p>2ã€<a href=\"http://www.oschina.net/translate/performance-engineering-with-react\" target=\"_blank\" rel=\"external\">React çš„æ€§èƒ½å·¥ç¨‹ Performance Engineering with React ç¿»è¯‘</a></p>\n"},{"title":"å…‰æ ‡å¯¹è±¡æ“ä½œçš„æ–¹æ³•æ•´ç†","url":"http://www.maotingfeng.me/2017/01/03/å…‰æ ‡å¯¹è±¡æ“ä½œçš„æ–¹æ³•æ•´ç†/","content":"<h3 id=\"å…‰æ ‡å¯¹è±¡æ“ä½œçš„æ–¹æ³•æ•´ç†\"><a href=\"#å…‰æ ‡å¯¹è±¡æ“ä½œçš„æ–¹æ³•æ•´ç†\" class=\"headerlink\" title=\"å…‰æ ‡å¯¹è±¡æ“ä½œçš„æ–¹æ³•æ•´ç†\"></a>å…‰æ ‡å¯¹è±¡æ“ä½œçš„æ–¹æ³•æ•´ç†</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> _Range = &#123;</div><div class=\"line\">    getRange: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> sel ;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"built_in\">window</span>.getSelection) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span> ;</div><div class=\"line\">        &#125;</div><div class=\"line\">        sel = <span class=\"built_in\">window</span>.getSelection();</div><div class=\"line\">        <span class=\"keyword\">if</span> (sel.rangeCount &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> sel.getRangeAt(<span class=\"number\">0</span>);</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span> ;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">//è·å–å…‰æ ‡ä½ç½®å‡½æ•° ä¸é€‚åˆcontenteditableå…ƒç´ ï¼Œé€‚ç”¨input</span></div><div class=\"line\">    getCursortPosition: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">ctrl</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> CaretPos = <span class=\"number\">0</span>;                                                   <span class=\"comment\">// IE Support</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.selection) &#123;</div><div class=\"line\">            ctrl.focus ();</div><div class=\"line\">            <span class=\"keyword\">var</span> Sel = <span class=\"built_in\">document</span>.selection.createRange ();</div><div class=\"line\">            Sel.moveStart (<span class=\"string\">'character'</span>, -ctrl.value.length);</div><div class=\"line\">            CaretPos = Sel.text.length;</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (ctrl.selectionStart || ctrl.selectionStart == <span class=\"string\">'0'</span>)        <span class=\"comment\">// Firefox support</span></div><div class=\"line\">            CaretPos = ctrl.selectionStart ;</div><div class=\"line\">        <span class=\"keyword\">return</span> (CaretPos);</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">// è®¾ç½®å…‰æ ‡ä½ç½®å‡½æ•° ä¸é€‚åˆcontenteditableå…ƒç´ ï¼Œé€‚åˆinput</span></div><div class=\"line\">    setInputCaretPosition(ctrl, pos)&#123;</div><div class=\"line\">        <span class=\"keyword\">debugger</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span>(ctrl.setSelectionRange) &#123;</div><div class=\"line\">            ctrl.focus();</div><div class=\"line\">            ctrl.setSelectionRange( pos , pos ) ;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (ctrl.createTextRange) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> range = ctrl.createTextRange();</div><div class=\"line\">            range.collapse(<span class=\"literal\">true</span>);</div><div class=\"line\">            range.moveEnd(<span class=\"string\">'character'</span>, pos);</div><div class=\"line\">            range.moveStart(<span class=\"string\">'character'</span>, pos);</div><div class=\"line\">            range.select();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"comment\">// å…‰æ ‡çš„ä½ç½®,å…‰æ ‡çš„å­—ç¬¦åç§»é‡ é€‚åˆcontenteditableå…ƒç´ ï¼Œä¸é€‚åˆinput</span></div><div class=\"line\">    getCaretCharacterOffsetWithin: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> element , current_range </span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> caretOffset = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> doc = element.ownerDocument || element.document;</div><div class=\"line\">        <span class=\"keyword\">var</span> win = doc.defaultView || doc.parentWindow;</div><div class=\"line\">        <span class=\"keyword\">var</span> sel;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> win.getSelection != <span class=\"string\">\"undefined\"</span>) &#123;</div><div class=\"line\">            sel = win.getSelection();</div><div class=\"line\">            <span class=\"keyword\">if</span> (sel.rangeCount &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                <span class=\"keyword\">var</span> range = current_range ? current_range : win.getSelection().getRangeAt(<span class=\"number\">0</span>) ;</div><div class=\"line\">                <span class=\"keyword\">var</span> preCaretRange = range.cloneRange();</div><div class=\"line\">                preCaretRange.selectNodeContents(element);</div><div class=\"line\">                preCaretRange.setEnd(range.endContainer, range.endOffset);</div><div class=\"line\">                caretOffset = preCaretRange.toString().length;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((sel = doc.selection) &amp;&amp; sel.type != <span class=\"string\">\"Control\"</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> textRange = sel.createRange();</div><div class=\"line\">            <span class=\"keyword\">var</span> preCaretTextRange = doc.body.createTextRange();</div><div class=\"line\">            preCaretTextRange.moveToElementText(element);</div><div class=\"line\">            preCaretTextRange.setEndPoint(<span class=\"string\">\"EndToEnd\"</span>, textRange);</div><div class=\"line\">            caretOffset = preCaretTextRange.text.length;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> caretOffset;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">// è®¾ç½®å…‰æ ‡ä½ç½®å‡½æ•°  é€‚åˆcontenteditableå…ƒç´  , ä¸é€‚åˆinput</span></div><div class=\"line\">    setCaretPosition: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"> node , textNode , caret </span>)</span>&#123;</div><div class=\"line\">        node.focus();</div><div class=\"line\">        <span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange();</div><div class=\"line\"></div><div class=\"line\">        range.setStart(textNode, caret);</div><div class=\"line\">        range.setEnd(textNode, caret);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> sel = <span class=\"built_in\">window</span>.getSelection();</div><div class=\"line\">        sel.removeAllRanges();</div><div class=\"line\">        sel.addRange(range);</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">// å…‰æ ‡çš„åƒç´ ä½ç½®  é€‚åˆcontenteditableå…ƒç´  , ä¸é€‚åˆinput</span></div><div class=\"line\">    getCursorOffset: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    <span class=\"comment\">// ä¹Ÿå¯ä»¥ç›´æ¥ï¼Œrange.getBoundingClientRect()  ä¸è¿‡æˆ‘é‡åˆ°è¿‡bug,æ¨èè¿™ä¸ªæ–¹æ³•ã€‚</span></div><div class=\"line\">        <span class=\"keyword\">var</span> clonedRange, offset, range, rect, shadowCaret;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.getSelection &amp;&amp; (range = <span class=\"keyword\">this</span>.getRange())) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (range.endOffset - <span class=\"number\">1</span> &gt; <span class=\"number\">0</span> &amp;&amp; range.endContainer !== <span class=\"keyword\">this</span>.domInputor) &#123;</div><div class=\"line\">                clonedRange = range.cloneRange();</div><div class=\"line\">                clonedRange.setStart(range.endContainer, range.endOffset - <span class=\"number\">1</span>);</div><div class=\"line\">                clonedRange.setEnd(range.endContainer, range.endOffset);</div><div class=\"line\">                rect = clonedRange.getBoundingClientRect();</div><div class=\"line\">                offset = &#123;</div><div class=\"line\">                    height: rect.height,</div><div class=\"line\">                    left: rect.left + rect.width,</div><div class=\"line\">                    top: rect.top</div><div class=\"line\">                &#125;;</div><div class=\"line\">                clonedRange.detach();</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">if</span> (!offset || (offset != <span class=\"literal\">null</span> ? offset.height : <span class=\"keyword\">void</span> <span class=\"number\">0</span>) === <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                clonedRange = range.cloneRange();</div><div class=\"line\">                shadowCaret = <span class=\"built_in\">document</span>.createTextNode(<span class=\"string\">\"|\"</span>);</div><div class=\"line\">                clonedRange.insertNode(shadowCaret);</div><div class=\"line\">                clonedRange.selectNode(shadowCaret);</div><div class=\"line\">                rect = clonedRange.getBoundingClientRect();</div><div class=\"line\">                offset = &#123;</div><div class=\"line\">                    height: rect.height,</div><div class=\"line\">                    left: rect.left,</div><div class=\"line\">                    top: rect.top</div><div class=\"line\">                &#125;;</div><div class=\"line\">                shadowCaret.parentNode.removeChild(shadowCaret);</div><div class=\"line\">                clonedRange.detach();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> offset;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">// è·å–å…‰æ ‡æ‰€åœ¨çš„å…ƒç´   é€‚åˆcontenteditableå…ƒç´  , ä¸é€‚åˆinput</span></div><div class=\"line\">    getSelectionStart: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.getSelection().anchorNode ;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">// è®¾ç½®å…‰æ ‡è·³è½¬æœ€å é€‚åˆcontenteditableå…ƒç´  , ä¸é€‚åˆinput</span></div><div class=\"line\">    moveToEnd : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> obj </span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.getSelection) &#123;  <span class=\"comment\">//ie11 10 9 ff safari</span></div><div class=\"line\">            obj.focus();            <span class=\"comment\">//è§£å†³ffä¸è·å–ç„¦ç‚¹æ— æ³•å®šä½é—®é¢˜</span></div><div class=\"line\">            <span class=\"keyword\">var</span> range = <span class=\"built_in\">window</span>.getSelection();  <span class=\"comment\">//åˆ›å»ºrange</span></div><div class=\"line\">            range.selectAllChildren(obj);       <span class=\"comment\">//range é€‰æ‹©objä¸‹æ‰€æœ‰å­å†…å®¹</span></div><div class=\"line\">            range.collapseToEnd();              <span class=\"comment\">//å…‰æ ‡ç§»è‡³æœ€å</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.selection) &#123;          <span class=\"comment\">//ie10 9 8 7 6 5</span></div><div class=\"line\">            <span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.selection.createRange();   <span class=\"comment\">//åˆ›å»ºé€‰æ‹©å¯¹è±¡</span></div><div class=\"line\">            <span class=\"comment\">//var range = document.body.createTextRange();</span></div><div class=\"line\">            range.moveToElementText(obj);                   <span class=\"comment\">//rangeå®šä½åˆ°obj</span></div><div class=\"line\">            range.collapse(<span class=\"literal\">false</span>);                          <span class=\"comment\">//å…‰æ ‡ç§»è‡³æœ€å</span></div><div class=\"line\">            range.select();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    <span class=\"comment\">// å…‰æ ‡å¤„æ’å…¥å†…å®¹ é€‚åˆcontenteditableå…ƒç´  , ä¸é€‚åˆinput</span></div><div class=\"line\">    insertHtmlAtCurrent: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> html , current_range </span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> sel, range;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.getSelection) &#123;</div><div class=\"line\">            sel = current_range ? current_range : <span class=\"built_in\">window</span>.getSelection() ;</div><div class=\"line\">            <span class=\"keyword\">if</span> (sel.getRangeAt &amp;&amp; sel.rangeCount) &#123;</div><div class=\"line\">                range = sel.getRangeAt(<span class=\"number\">0</span>);</div><div class=\"line\">                range.deleteContents();</div><div class=\"line\">                <span class=\"keyword\">var</span> el = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"div\"</span>);</div><div class=\"line\">                el.innerHTML = html;</div><div class=\"line\">                <span class=\"keyword\">var</span> frag = <span class=\"built_in\">document</span>.createDocumentFragment(),</div><div class=\"line\">                    node, lastNode;</div><div class=\"line\">                <span class=\"keyword\">while</span> ((node = el.firstChild)) &#123;</div><div class=\"line\">                    lastNode = frag.appendChild(node);</div><div class=\"line\">                &#125;</div><div class=\"line\">                range.insertNode(frag);</div><div class=\"line\">                <span class=\"keyword\">if</span> (lastNode) &#123;</div><div class=\"line\">                    range = range.cloneRange();</div><div class=\"line\">                    range.setStartAfter(lastNode);</div><div class=\"line\">                    range.collapse(<span class=\"literal\">true</span>);</div><div class=\"line\">                    sel.removeAllRanges();</div><div class=\"line\">                    sel.addRange(range);</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.selection &amp;&amp; <span class=\"built_in\">document</span>.selection.type != <span class=\"string\">\"Control\"</span>) &#123;</div><div class=\"line\">            <span class=\"built_in\">document</span>.selection.createRange().pasteHTML(html);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>å‚è€ƒç½‘ç«™ï¼š</p>\n<p>1ã€<a href=\"http://js8.in/2010/01/29/javascript%E8%8E%B7%E5%8F%96%E5%85%89%E6%A0%87%E4%BD%8D%E7%BD%AE%E4%BB%A5%E5%8F%8A%E8%AE%BE%E7%BD%AE%E5%85%89%E6%A0%87%E4%BD%8D%E7%BD%AE/\" target=\"_blank\" rel=\"external\">ä¸‰æ°´æ¸… javascriptè·å–å…‰æ ‡ä½ç½®ä»¥åŠè®¾ç½®å…‰æ ‡ä½ç½®</a></p>\n<p>2ã€<a href=\"http://www.html-js.com/article/2621\" target=\"_blank\" rel=\"external\">RangeåŠTextRangeç†è§£åŠåŒºåˆ«</a> è¿™ç¯‡æ–‡ç« æ’ç‰ˆå‡Œä¹±ï¼Œå¦‚æœéœ€è¦æ“ä½œTextRangeä¹‹ç±»çš„å¯ä»¥çœ‹çœ‹ã€‚</p>\n<p>3ã€<a href=\"https://imys.net/20161125/cursor-offset-at-input.html\" target=\"_blank\" rel=\"external\">JavaScript è·å–è¾“å…¥æ—¶çš„å…‰æ ‡ä½ç½®åŠåœºæ™¯é—®é¢˜</a> è¿™ç¯‡å¼ºçƒˆæ¨èï¼Œè´¨é‡å¾ˆé«˜ã€‚</p>\n<p>4ã€<a href=\"http://www.zhangxinxu.com/wordpress/2011/04/js-range-html%E6%96%87%E6%A1%A3%E6%96%87%E5%AD%97%E5%86%85%E5%AE%B9%E9%80%89%E4%B8%AD%E3%80%81%E5%BA%93%E5%8F%8A%E5%BA%94%E7%94%A8%E4%BB%8B%E7%BB%8D/\" target=\"_blank\" rel=\"external\">JS Range HTMLæ–‡æ¡£/æ–‡å­—å†…å®¹é€‰ä¸­ã€åº“åŠåº”ç”¨ä»‹ç»</a></p>\n<p>5ã€<a href=\"https://segmentfault.com/a/1190000005869372\" target=\"_blank\" rel=\"external\">htmlå…ƒç´ contenteditableå±æ€§å¦‚ä½•å®šä½å…‰æ ‡å’Œè®¾ç½®å…‰æ ‡</a>ä¸€ä¸ªä¾‹å­ã€‚</p>\n<p>6ã€<a href=\"http://www.jb51.net/article/94012.htm\" target=\"_blank\" rel=\"external\">textarea jså®ç°çš„å…‰æ ‡ä½ç½®å·¥å…·å‡½æ•°</a>è¿™ä¸ªä¹Ÿå¥½å‡Œä¹±ï¼Œä¸è¿‡ä»¥ä¸Šçœ‹å®Œåº”è¯¥èƒ½æœ‰è§£å†³æ–¹æ¡ˆäº†ã€‚å¦‚æœå¯¹äºæ“ä½œtextarea inputéœ€æ±‚å¤§çš„å¯ä»¥çœ‹è¿™ç¯‡ã€‚</p>\n</blockquote>\n"},{"title":"Rangeå¯¹è±¡è¯¦è§£","url":"http://www.maotingfeng.me/2017/01/01/Rangeå¯¹è±¡è¯¦è§£/","content":"<p>Rangeå¯¹è±¡è¯¦è§£</p>\n<ol>\n<li>ä»€ä¹ˆæ˜¯<code>Range</code>å¯¹è±¡ï¼Ÿ</li>\n</ol>\n<p>Rangeè¡¨ç¤ºHTMLæ–‡æ¡£çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•ç‚¹å¼€å§‹å’Œç»“æŸï¼Œæœ€å¸¸è§çš„Rangeå°±æ˜¯ç”¨æˆ·é€‰æ‹©çš„ä¸€æ®µæ–‡æœ¬ã€‚é€šè¿‡Rangeå¯¹è±¡ï¼Œä½ å¯ä»¥æ‰¾åˆ°å¼€å§‹ç‚¹å’Œç»“æŸç‚¹ï¼Œä½ å¯ä»¥å¤åˆ¶æˆ–è€…åˆ é™¤å®ƒï¼Œæˆ–è€…æ›¿æ¢æˆå¦ä¸€æ®µæ–‡æœ¬ï¼Œç”šè‡³æ˜¯ä¸€æ®µHTMLä»£ç ã€‚</p>\n<p>è·å–<code>Range</code>å¯¹è±¡æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>\n<ul>\n<li><p>document.createRange æ–¹æ³•</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange();</div></pre></td></tr></table></figure>\n</li>\n<li><p><code>Selection</code>å¯¹è±¡çš„<code>getRangeAt</code>æ–¹æ³•</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;\t\t\t<span class=\"comment\">// è·å–ç”¨æˆ·é€‰ä¸­çš„å†…å®¹Selectionå¯¹è±¡</span></div><div class=\"line\"><span class=\"keyword\">var</span> range = selection.getRangeAt( <span class=\"number\">0</span> ) ;\t\t\t<span class=\"comment\">// ä»Selectionå¯¹è±¡è·å–Rangeå¯¹è±¡</span></div></pre></td></tr></table></figure>\n</li>\n<li><p><code>Range</code>çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª<code>Range</code>å¯¹è±¡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"keyword\">new</span> Range() ;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹<code>Range</code>å¯¹è±¡(å®ä¾‹)çš„å±æ€§ï¼š</p>\n<ol>\n<li><p><code>Range.collapsed</code> åªè¯»ï¼Œè¿”å›ä¸€ä¸ªåˆ¤æ–­å½“å‰<code>Range</code>å¯¹è±¡çš„èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®æ˜¯å¦ç›¸åŒçš„å¸ƒå°”å€¼ã€‚</p>\n<p>ä¾‹1-1:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;    <span class=\"comment\">// Selectionå¯¹è±¡</span></div><div class=\"line\"><span class=\"keyword\">var</span> range = selection.getRangeAt( <span class=\"number\">0</span> ) ;    <span class=\"comment\">// W3C Rangeå¯¹è±¡</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log( range.collapsed ) ;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/range-collapsed.png\" alt=\"range-collapsed\"></p>\n<p>å½“é€‰ä¸­â€™å¹´åº•â€™äºŒå­—çš„æ—¶å€™ï¼Œèµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ä¸åŒï¼Œè¿”å›falseï¼›å½“å…‰æ ‡åœ¨â€™å¹´åº•â€™ä¹‹åï¼Œèµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ç›¸åŒï¼Œcollapsedè¿”å›trueã€‚</p>\n</li>\n<li><p><code>commonAncestorContainer</code>åªè¯»ï¼Œè¿”å›åŒ…å«<code>startContainer</code>å’Œ<code>endContainer</code>çš„æœ€æ·±çš„èŠ‚ç‚¹</p>\n<p>ä¸€èˆ¬ä¸ºæ–‡æœ¬èŠ‚ç‚¹ï¼Œæ¯”å¦‚é€‰ä¸­â€™å¹´åº•â€™ï¼Œè¿”å›çš„æ˜¯åŒ…å«â€™å¹´åº•â€™çš„é‚£ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚</p>\n<p>æ³¨æ„âš ï¸ï¼šè¿”å›çš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œæ˜¯åŒ…å«å¹´åº•äºŒå­—çš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œâ€™æ¯åˆ°å¹´åº•â€¦â€™æ•´æ®µéƒ½æ˜¯é‚£ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚å¦‚æœ<code>Range</code>å¯¹è±¡è·¨æ ‡ç­¾ï¼Œ<code>&lt;p&gt;æ¯åˆ°å¹´åº•,å¾ˆå¤šæ–°é—»&lt;/p&gt;&lt;span&gt;æ¯”å¦‚æ´å¯Ÿå®‡å®™çš„&lt;/span&gt;</code>å½“é€‰ä¸­<code>å¾ˆå¤šæ–°é—»&lt;/p&gt;&lt;span&gt;æ¯”å¦‚</code>è¿™æ ·å­çš„æ–‡æœ¬ï¼Œè¿”å›çš„æœ€æ·±èŠ‚ç‚¹ä¸ºåŒ…å«<code>p</code>æ ‡ç­¾å’Œ<code>span</code>æ ‡ç­¾çš„å…±åŒçˆ¶æ ‡ç­¾ã€‚</p>\n</li>\n<li><p><code>startContainer</code>/<code>endContainer</code>åªè¯»ï¼Œè¿”å›<code>Range</code>å¯¹è±¡å¼€å§‹å’Œç»ˆæ­¢çš„èŠ‚ç‚¹å¯¹è±¡ã€‚</p>\n<p>ä¸€èˆ¬é€‰ä¸­æ–‡å­—ï¼Œè¿”å›çš„éƒ½æ˜¯æ–‡æœ¬èŠ‚ç‚¹</p>\n</li>\n<li><p><code>startOffset</code>/<code>endOffset</code>åªè¯»ï¼Œè¡¨ç¤ºRangeèµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®çš„æ•°å­—</p>\n<p>ä¾‹1-2:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;    <span class=\"comment\">// Selectionå¯¹è±¡</span></div><div class=\"line\"><span class=\"keyword\">var</span> range = selection.getRangeAt( <span class=\"number\">0</span> ) ;    <span class=\"comment\">// W3C Rangeå¯¹è±¡</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log( range.startOffset , range.endOffset )</div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/range-startoffset.jpeg\" alt=\"range-offsetStart\"></p>\n<p>â€‹    å½“<code>Range.collapsed</code>ä¸ºtrueæ˜¯ï¼ŒstartOffsetå’ŒendOffsetå€¼ç›¸ç­‰ã€‚</p>\n</li>\n</ol>\n<p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹<code>Range</code>å¯¹è±¡æ‹¥æœ‰çš„æ–¹æ³•ï¼š</p>\n<p>1ã€<code>Range.setStart()</code>/<code>Range.setEnd()</code>è®¾ç½®<code>Range</code>çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°Nodeå’Œoffsetï¼›å¦‚æœèµ·å§‹èŠ‚ç‚¹æ˜¯Text,Comment, or CDATASectionä¹‹ä¸€ï¼Œé‚£ä¹ˆoffsetæŒ‡çš„æ˜¯ä»èµ·å§‹èŠ‚ç‚¹ç®—èµ·çš„å­—ç¬¦çš„åç§»é‡ï¼Œå¯¹äºå…¶ä»–Nodeç±»å‹èŠ‚ç‚¹ï¼Œoffsetæ˜¯æŒ‡ä»èµ·å§‹èŠ‚ç‚¹å¼€å§‹ç®—èµ·å­èŠ‚ç‚¹çš„åç§»é‡[^2]ã€‚</p>\n<p>ä¾‹1-3:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;</div><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;\t\t\t\t\t\t\t\t\t</div><div class=\"line\"><span class=\"keyword\">var</span> startNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>].firstChild ;\t<span class=\"comment\">// è·å–æ–‡æœ¬èŠ‚ç‚¹</span></div><div class=\"line\"><span class=\"keyword\">var</span> startOffset = <span class=\"number\">1</span> ;</div><div class=\"line\"></div><div class=\"line\">range.setStart(startNode, startOffset) ;</div><div class=\"line\">range.setEnd(startNode, startOffset + <span class=\"number\">4</span> ) ;</div><div class=\"line\"></div><div class=\"line\">selection.removeAllRanges() ;</div><div class=\"line\">selection.addRange( range ) ;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/range-setStart.jpeg\" alt=\"range-setStart\"></p>\n<p>è®¾ç½®startOffsetä¸º1ï¼Œä»â€™æ¯â€™ç¬¬ä¸€ä¸ªå­—ç¬¦åå¼€å§‹ï¼Œè®¾ç½®endOffsetä¸ºï¼Œèµ·å§‹ä¹‹åçš„4ä¸ªå­—ç¬¦ï¼Œé€—å·ä¹‹åã€‚æœ€åé€šè¿‡<code>Selection</code>å¯¹è±¡çš„<code>removeAllRanges()</code>å’Œ<code>addRange()</code>æ–¹æ³•ï¼Œå»ºç«‹æ‹–è“<a href=\"è“åº•é»‘å­—çš„éƒ¨åˆ†ï¼Œå³é¼ æ ‡æ‹–åŠ¨ç»è¿‡æ–‡å­—ï¼Œäº§ç”Ÿçš„è“è‰²åº•è‰²çš„éƒ¨åˆ†\">^1</a>çš„æ–‡æœ¬é€‰åŒºã€‚<code>Selection</code>å¯¹è±¡çš„APIå¯ä»¥çœ‹MDNçš„æ–‡æ¡£ï¼Œè§ä¸‹é¢çš„å‚è€ƒèµ„æ–™è¶…é“¾æ¥ã€‚</p>\n<p>2ã€<code>Range.setStartBefore()</code>/<code>Range.setStartAfter()</code>/<code>Range.setEndBefore()</code>/<code>Range.setEndAfter()</code>ä»¥å…¶ä»–èŠ‚ç‚¹ä¹‹å‰ï¼Œä¹‹åä¸ºåŸºå‡†ï¼Œè®¾ç½®<code>Range</code>å¯¹è±¡çš„èµ·æ­¢ç‚¹ã€‚è¿™å››ä¸ªæ–¹æ³•å…±åŒæ¥å—ä¸€ä¸ªå‚æ•°,referenceNodeã€‚</p>\n<p>æ¯”å¦‚ï¼Œä½ æƒ³è¦é€‰ä¸­<code>&lt;p&gt;æ¯åˆ°å¹´åº•ï¼Œå¾ˆå¤šæ–°é—»æœºæ„éƒ½ä¼šè¯„é€‰å¹´åº¦æ–°é—»ã€‚å°ç¼–æ³¨æ„åˆ°ï¼Œä¹ ä¸»å¸­ä»Šå¹´è´ºè¯æåˆ°çš„å…·ä½“æˆå°±æ ¼å¤–å…³æ³¨ç§‘æŠ€å’Œåˆ›æ–°ã€‚&lt;/p&gt;</code>æ•´ä¸ª<code>p</code>æ ‡ç­¾çš„æ–‡æœ¬ï¼Œå¯ä»¥ï¼š</p>\n<p>ä¾‹1-4</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;</div><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> pTextNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>].firstChild ;</div><div class=\"line\"><span class=\"comment\">// è®¾ç½®setStartBeforeå’ŒsetEndAfterä¸ºå…±åŒçš„ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹å³å¯é€‰ä¸­è¿™ä¸ªæ ‡ç­¾çš„æ‰€æœ‰æ–‡æœ¬</span></div><div class=\"line\">range.setStartBefore( pTextNode ) ;</div><div class=\"line\">range.setEndAfter( pTextNode ) ;</div><div class=\"line\"></div><div class=\"line\">selection.removeAllRanges() ;</div><div class=\"line\">selection.addRange( range ) ;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/range-setStartBefore.jpeg\" alt=\"range-setStartBefore\"></p>\n<p>3ã€<code>Range.selectNode()</code>è®¾ç½®<code>Range</code>å¯¹è±¡åŒ…å«æŒ‡å®šçš„<code>Node</code>èŠ‚ç‚¹å’Œå®ƒçš„å†…å®¹ï¼Œå‚æ•°ä¸ºéœ€è¦é€‰ä¸­çš„Nodeï¼ŒreferenceNode;æ‰§è¡Œä¹‹åï¼Œ<code>Range</code>å¯¹è±¡çš„startContainerå’ŒendContainerä¸ºä¼ å…¥çš„referenceNodeçš„çˆ¶å…ƒç´ ã€‚</p>\n<p>4ã€<code>Range.selectNodeContents()</code>è®¾ç½®<code>Range</code>å¯¹è±¡åŒ…å«æŒ‡å®š<code>Node</code>èŠ‚ç‚¹çš„å†…å®¹ï¼Œä¾‹1-4çš„ä»£ç å¯æ”¹å†™æˆå¦‚ä¸‹ï¼š</p>\n<p>ä¾‹1-5:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;</div><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> pTextNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>] ;</div><div class=\"line\"><span class=\"comment\">// setStartBeforeå’ŒsetEndAfterå»æ‰ï¼Œæ¢æˆselectNodeContents</span></div><div class=\"line\">range.selectNodeContents( pTextNode ) ;</div><div class=\"line\"></div><div class=\"line\">selection.removeAllRanges() ;</div><div class=\"line\">selection.addRange( range ) ;</div></pre></td></tr></table></figure>\n<p>ç»†å¿ƒçš„ä½ å¯èƒ½å‘ç°ç¬¬ä¸‰è¡Œä»£ç ï¼Œæœ€åçš„è·å–çš„èŠ‚ç‚¹ä¸ä¸€æ ·äº†ï¼Œæœ‰<code>firstChild</code>çš„è·å–çš„æ˜¯textèŠ‚ç‚¹ï¼Œæ²¡æœ‰çš„ï¼Œè·å–çš„æ˜¯elementèŠ‚ç‚¹ã€‚<code>setStartBefore</code>ä¼ å…¥çš„å‚æ•°è‹¥æ˜¯ä¸€ä¸ªelementèŠ‚ç‚¹ï¼Œåˆ™<code>Range</code>å¯¹è±¡ä¼šåŒ…å«è¿™ä¸ªelementèŠ‚ç‚¹ï¼Œå› ä¸ºé€‰åŒºçš„å†…å®¹æ˜¯ä»elementèŠ‚ç‚¹ä¹‹å‰å¼€å§‹çš„ã€‚å€˜å¦‚ä¼ å…¥çš„æ˜¯elementèŠ‚ç‚¹ä¸‹é¢çš„textèŠ‚ç‚¹ï¼Œåˆ™<code>Range</code>å¯¹è±¡ä¸ä¼šåŒ…å«è¿™ä¸ªelementèŠ‚ç‚¹ï¼Œå•å•åªåŒ…å«textèŠ‚ç‚¹çš„å†…å®¹ã€‚</p>\n<p>è°ƒç”¨äº†<code>range.selectNodeContents</code>æ–¹æ³•ä¹‹åï¼š</p>\n<blockquote>\n<p>The parent <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node\" target=\"_blank\" rel=\"external\"><code>Node</code></a> of the start and end of the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Range\" target=\"_blank\" rel=\"external\"><code>Range</code></a> will be the reference node. The <code>startOffset</code> is 0, and the <code>endOffset</code> is the number of child <code>Nodes</code> or number of characters contained in the reference node.</p>\n</blockquote>\n<p>ç¿»è¯‘ä¸€ä¸‹ï¼Œæ„æ€å¤§æ¦‚ï¼š</p>\n<blockquote>\n<p><code>Range</code>å¯¹è±¡çš„å¼€å§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸ºä¼ å…¥çš„reference nodeï¼Œèµ·å§‹åç§»é‡ä¸º0ï¼Œç»“æŸåç§»é‡ä¸ºå­èŠ‚ç‚¹çš„ä¸ªæ•°[^2]æˆ–è€…reference nodeèŠ‚ç‚¹åŒ…å«çš„æ–‡æœ¬å­—ç¬¦æ•°ã€‚</p>\n</blockquote>\n<p>æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå½“æ‰§è¡Œä¸Šé¢çš„ä»£ç ä¹‹å:<code>console.log( range.startContainer === pTextNode , range.endContainer === pTextNode )</code></p>\n<p>æ‰“å°äº†ä¸€ä¸‹ï¼Œ<code>true true</code>ï¼Œç»“æœä¸¤ä¸ªéƒ½æ˜¯ä¸ºtrueã€‚æ­£ç¡®æ„æ€åº”è¯¥æ˜¯startContainerå’ŒendContaineréƒ½åº”è¯¥æ˜¯reference nodeï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„çˆ¶èŠ‚ç‚¹æ˜¯reference nodeã€‚è¿™ä¸ªå’Œ<code>Range.selectNode</code>çš„æ–¹æ³•å®ç°æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œ<code>Range.selectNode</code>æ‰§è¡Œå®Œä¹‹åï¼ŒstartContainerå’ŒendContainerä»£è¡¨çš„æ˜¯reference nodeçš„çˆ¶å…ƒç´ ã€‚</p>\n<p>4ã€<code>Range.collpase()</code>ç§»åŠ¨<code>Range</code>å¯¹è±¡çš„å¼€å§‹æˆ–è€…ç»“æŸèŠ‚ç‚¹ï¼Œåˆ°å¦å¤–ä¸€ä¸ªè¾¹ç•Œç‚¹ã€‚å³ï¼ŒæŠ˜å å¼€å§‹èŠ‚ç‚¹åˆ°ç»“æŸèŠ‚ç‚¹ï¼Œæˆ–è€…æŠ˜å ç»“æŸèŠ‚ç‚¹åˆ°å¼€å§‹èŠ‚ç‚¹ï¼Œè®©å¼€å§‹å’Œç»“æŸèŠ‚ç‚¹é‡åˆã€‚è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªå¸ƒå°”å€¼çš„å‚æ•°ï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™æŠ˜å ç»“æŸèŠ‚ç‚¹åˆ°å¼€å§‹èŠ‚ç‚¹ï¼Œfalseï¼ŒæŠ˜å å¼€å§‹èŠ‚ç‚¹åˆ°ç»“æŸèŠ‚ç‚¹ã€‚æŠ˜å ä¹‹åçš„<code>Range</code>å¯¹è±¡æ˜¯ç©ºçš„ï¼Œæ²¡æœ‰å†…å®¹ï¼Œåœ¨domæ ‘ä¸­æŒ‡å®šäº†ä¸€ä¸ªå•ä¸€çš„å…¥å£èŠ‚ç‚¹ã€‚åˆ¤æ–­ä¸€ä¸ª<code>Range</code>å¯¹è±¡æ˜¯å¦å·²ç»è¢«æŠ˜å è¿‡äº†ï¼Œå¯ä»¥æŸ¥çœ‹<code>Range.collapsed</code>å±æ€§ã€‚</p>\n<p>ä¾‹1-6:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;</div><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> pTextNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>].firstChild ;</div><div class=\"line\">range.selectNode( pTextNode ) ;</div><div class=\"line\"></div><div class=\"line\">range.collapse( <span class=\"literal\">false</span> ) ;</div><div class=\"line\"></div><div class=\"line\">selection.removeAllRanges() ;</div><div class=\"line\">selection.addRange( range ) ;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/range-collpased.jpeg\" alt=\"range-collpased\"></p>\n<p>å…‰æ ‡é€‰ä¸­äº†pTextNodeçš„å¥å·ä¹‹åçš„æœ€åä¸€éƒ¨åˆ†ã€‚</p>\n<p>ä»¥ä¸Šä¸ºå®šä½æ–¹æ³•ï¼Œä¸‹é¢ä»‹ç»ç¼–è¾‘æ–¹æ³•ï¼š</p>\n<p>5ã€<code>Range.cloneContents()</code>è¿”å›DocumentFragmentç±»å‹çš„<code>Range</code>ä¸­èŠ‚ç‚¹çš„æ–‡æ¡£ç‰‡æ®µã€‚äº‹ä»¶ç›‘å¬å™¨ä¸ä¼šè¢«å¤åˆ¶ï¼Œhtmlçš„å±æ€§ä¸­ç»‘å®šçš„äº‹ä»¶ä¼šè¢«å¤åˆ¶ï¼Œidä¹Ÿä¼šè¢«å¤åˆ¶ï¼Œæ‰€ä»¥å¤„ç†çš„æ—¶å€™è¦å°å¿ƒã€‚</p>\n<p>ä¾‹1-7:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;</div><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> pTextNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>] ;</div><div class=\"line\">range.selectNode( pTextNode ) ;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cloned = range.cloneContents() ;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild( cloned ) ;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/range-cloneContents.jpeg\" alt=\"range-cloneContents\"></p>\n<p>è¢«å¤åˆ¶å‡ºæ¥çš„èŠ‚ç‚¹å†…å®¹æ˜¯ï¼š<code>&lt;p&gt;æ¯åˆ°å¹´åº•ï¼Œå¾ˆå¤šæ–°é—»æœºæ„éƒ½ä¼šè¯„é€‰å¹´åº¦æ–°é—»ã€‚å°ç¼–æ³¨æ„åˆ°ï¼Œä¹ ä¸»å¸­ä»Šå¹´è´ºè¯æåˆ°çš„å…·ä½“æˆå°±æ ¼å¤–å…³æ³¨ç§‘æŠ€å’Œåˆ›æ–°ã€‚&lt;/p&gt;</code>åŒ…å«æ ‡ç­¾ã€‚</p>\n<p>6ã€<code>Range.deleteContents()</code>ä»æ–‡æ¡£ä¸­ç§»é™¤<code>Range</code>é€‰ä¸­çš„å†…å®¹ï¼Œæ— è¿”å›å€¼ã€‚</p>\n<p>7ã€<code>Range.extractContents()</code> æŠŠ<code>Range</code>çš„å†…å®¹ä»æ–‡æ¡£æ ‘ä¸­æå–åˆ°æ–‡æ¡£ç‰‡æ®µä¸­ã€‚è¿”å›çš„ä¹Ÿæ˜¯DocumentFragmentç±»å‹ã€‚</p>\n<p>ä¾‹1-8:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;</div><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> pTextNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>] ;</div><div class=\"line\">range.selectNode( pTextNode ) ;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> extracted = range.extractContents() ;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild( extracted ) ;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/clone-extractContents.jpeg\" alt=\"range-extractContents\"></p>\n<p>æ³¨æ„âš ï¸ï¼šå¦‚æœRangeå¯¹è±¡è·¨æ ‡ç­¾ï¼ŒextractContentsæ–¹æ³•ä¼šè¿”å›è¡¥é½åçš„æ ‡ç­¾ï¼Œæ¯”å¦‚<code>&lt;p&gt;abc&lt;/p&gt;&lt;span&gt;efg&lt;/span&gt;</code>å¦‚æœé€‰ä¸­<code>c&lt;/p&gt;&lt;span&gt;e</code>çš„è¯ï¼Œè¿”å›çš„çš„DocumentFragmentä¸­å†…å®¹æ˜¯ï¼š<code>&lt;p&gt;c&lt;/p&gt;&lt;span&gt;e&lt;/span&gt;</code>ã€‚</p>\n<p>8ã€<code>Range.insertNode()</code>åœ¨èµ·ç‚¹å¤„æ’å…¥èŠ‚ç‚¹ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼ŒnewNodeï¼Œè¦æ’å…¥çš„èŠ‚ç‚¹ã€‚</p>\n<p>ä¾‹1-9:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;         <span class=\"comment\">// Selectionå¯¹è±¡</span></div><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> pTextNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>] ;</div><div class=\"line\"></div><div class=\"line\">range.selectNode( pTextNode ) ;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> text = <span class=\"string\">'æˆ‘æ˜¯æ–°çš„å†…å®¹'</span> ,</div><div class=\"line\">    newNode = <span class=\"built_in\">document</span>.createTextNode( text ) ;</div><div class=\"line\">range.insertNode( newNode ) ;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">range.setStart( newNode , text.length ) ;</div><div class=\"line\">range.collapse( <span class=\"literal\">true</span> ) ;</div><div class=\"line\"></div><div class=\"line\">selection.removeAllRanges() ;</div><div class=\"line\">selection.addRange( range ) ;</div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/range-insertNode.jpeg\" alt=\"range-insertNode\"></p>\n<p>newNodeå¯ä»¥æ˜¯documentFragmentç±»å‹çš„èŠ‚ç‚¹ã€‚</p>\n<p>9ã€<code>Range.surroundContents</code>æ¥æ”¶ä¸€ä¸ªNodeç±»å‹çš„å‚æ•°newNodeã€‚æŠŠ<code>Range</code>å¯¹è±¡çš„å†…å®¹ç§»åŠ¨åˆ°newNodeä¸­ï¼Œå¹¶ä¸”ï¼Œå°†newNodeæ”¾å…¥å½“å‰<code>Range</code>å¯¹è±¡çš„å¼€å§‹ä½ç½®ã€‚åŒ…è£¹ä¹‹åï¼Œ<code>Range</code>å¯¹è±¡çš„è¾¹ç•Œåœ¨ä¹Ÿä¼šå—newNodeå½±å“ã€‚</p>\n<p>ä¾‹1-10:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> selection = <span class=\"built_in\">window</span>.getSelection() ;         <span class=\"comment\">// Selectionå¯¹è±¡</span></div><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> pTextNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>] ;</div><div class=\"line\">range.selectNode( pTextNode ) ;</div><div class=\"line\"></div><div class=\"line\">range.surroundContents( <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'div'</span>) ) ;\t<span class=\"comment\">// ç”¨divåŒ…è£¹pæ ‡ç­¾</span></div></pre></td></tr></table></figure>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/range-surroundContents.jpeg\" alt=\"range-surroundContents\"></p>\n<blockquote>\n<p>An exception will be thrown, however, if the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Range\" target=\"_blank\" rel=\"external\"><code>Range</code></a> splits a non-<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Text\" target=\"_blank\" rel=\"external\"><code>Text</code></a> node with only one of its boundary points. That is, unlike the alternative above, if there are partially selected nodes, they will not be cloned and instead the operation will fail.</p>\n<p>ä¹Ÿæœ‰ä¾‹å¤–æƒ…å†µ, å¦‚æœé€‰å®šçš„<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Range\" target=\"_blank\" rel=\"external\"><code>Range</code></a>åŒºåŸŸåŒ…å«ä»…æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ ‡ç­¾çš„<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Text\" target=\"_blank\" rel=\"external\"><code>Text</code></a>. é‚£æ ‡ç­¾å°†ä¸ä¼šè‡ªåŠ¨æˆå¯¹ç”Ÿæˆï¼Œæ“ä½œå°†å¤±è´¥.</p>\n</blockquote>\n<p>å…¶ä»–ä¸€äº›æ–¹æ³•:</p>\n<p>10ã€<code>Range.compareBoundaryPoints()</code>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯howï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>Range</code>ç±»å‹çš„sourceRangeï¼ŒæŒ‡ç¤ºå½“å‰<code>Range</code>çš„ç›¸åº”è¾¹ç•Œç‚¹æ˜¯å¦åˆ†åˆ«åœ¨sourceRangeçš„å¯¹åº”è¾¹ç•Œç‚¹ä¹‹å‰ï¼Œç­‰äºæˆ–è€…ä¹‹åã€‚è¿”å›ä¸€ä¸ªæ•°å­—ç±»å‹çš„å€¼ï¼Œ-1ï¼Œ0ï¼Œ1ã€‚å…·ä½“å‚æ•°é…ç½®ï¼Œè¯·ç§»æ­¥<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Range/compareBoundaryPoints\" target=\"_blank\" rel=\"external\">MDN Range.compareBoundaryPoints()</a></p>\n<p>ä¾‹1-11:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> range2 = <span class=\"built_in\">document</span>.createRange() ;</div><div class=\"line\"><span class=\"keyword\">var</span> pTextNode = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'p'</span> )[<span class=\"number\">0</span>] ;</div><div class=\"line\"><span class=\"keyword\">var</span> span = <span class=\"built_in\">document</span>.getElementsByTagName( <span class=\"string\">'span'</span> )[<span class=\"number\">0</span>] ;\t<span class=\"comment\">// span æ ‡ç­¾æ¯—é‚»pæ ‡ç­¾ä¹‹å</span></div><div class=\"line\"></div><div class=\"line\">range.selectNode( pTextNode ) ;</div><div class=\"line\">range2.selectNode( span ) ;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> compare = range2.compareBoundaryPoints( Range.END_TO_END , range ) ;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log( compare )\t<span class=\"comment\">// è¿”å› 1  è¯´æ˜range2çš„endç¡®å®åœ¨rangeçš„endä¹‹åã€‚</span></div></pre></td></tr></table></figure>\n<p>11ã€<code>Range.clone()</code>è¿”å›æ‹¥æœ‰å’ŒåŸ <code>Range</code> ç›¸åŒç«¯ç‚¹çš„å…‹éš† <code>Range</code> å¯¹è±¡ã€‚</p>\n<blockquote>\n<p>The returned clone is copied by value, not reference, so a change in either <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Range\" target=\"_blank\" rel=\"external\"><code>Range</code></a> does not affect the other.</p>\n<p>è¿”å›çš„cloneå¯¹è±¡æ‹·è´äº†å€¼ï¼Œä¸æ˜¯è¿”å›åŸæœ‰rangeçš„å¼•ç”¨ï¼Œæ‰€ä»¥æ”¹å˜å…¶ä¸­çš„ä¸€ä¸ªrangeä¸ä¼šå½±å“å¦å¤–ä¸€ä¸ªã€‚</p>\n</blockquote>\n<p>12ã€<code>Range.detach()</code>ä»ä½¿ç”¨çŠ¶æ€é‡Šæ”¾ <code>Range</code>ï¼Œæ­¤æ–¹æ³•ç”¨äºæ”¹å–„æ€§èƒ½ã€‚</p>\n<blockquote>\n<p>Subsequent attempts to use the detached range will result in a <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/DOMException\" target=\"_blank\" rel=\"external\"><code>DOMException</code></a> being thrown with an error code of <code>INVALID_STATE_ERR</code>.</p>\n<p>éšåå°è¯•ä½¿ç”¨å·²ç»é‡Šæ”¾çš„rangeä¼šæŠ›å‡ºä¸€ä¸ªDOMExceptionçš„å¼‚å¸¸ï¼Œé”™è¯¯çŠ¶æ€ç ï¼šINVALID_STATE_ERRã€‚</p>\n</blockquote>\n<p>13ã€<code>Range.toString()</code>æŠŠ<code>Range</code>å¯¹è±¡çš„å†…å®¹ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€‚<code>alert( Rangeå¯¹è±¡ )</code>é»˜è®¤è°ƒç”¨çš„å°±æ˜¯toStringæ–¹æ³•,å¼¹å‡ºé€‰ä¸­çš„å†…å®¹ã€‚</p>\n<p>è¿˜æœ‰ä¸€äº›å®éªŒæ€§çš„æ–¹æ³•ï¼Œä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼š</p>\n<p>14ã€<code>Range.getBoundingClientRect()</code>è¿”å›ä¸€ä¸ª <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ClientRect\" target=\"_blank\" rel=\"external\"><code>ClientRect</code></a> å¯¹è±¡ï¼Œè¯¥å¯¹è±¡é™å®šäº†é€‰å®šçš„æ–‡æ¡£å¯¹è±¡çš„å†…å®¹ï¼Œè¯¥æ–¹æ³•è¿”å›äº†ä¸€ä¸ªçŸ©å½¢ï¼Œè¿™ä¸ªçŸ©å½¢åŒ…å›´äº†è¯¥æ–‡æ¡£å¯¹è±¡ä¸­æ‰€æœ‰å…ƒç´ çš„è¾¹ç•ŒçŸ©å½¢é›†åˆã€‚</p>\n<blockquote>\n<p>This is method is useful for determining the viewport coordinates of the cursor or selection inside a text box. See <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\" target=\"_blank\" rel=\"external\"><code>Element.getBoundingClientRect()</code></a> for the details on the returned value.</p>\n</blockquote>\n<p>å½“æƒ³è·å–è§†å›¾çª—å£çš„åæ ‡ç³»æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•è¿˜æ˜¯æŒºæœ‰ç”¨çš„ã€‚è¿”å›å½“å‰<code>Range</code>çš„topï¼Œrightï¼Œbottomï¼Œleftï¼Œwidthï¼Œheightã€‚</p>\n<p>15ã€<code>Range.getClientRects()</code>è¿”å›ä¸€ç³»åˆ—åŒ…å«ClientReactå¯¹è±¡çš„listã€‚æ¯ä¸ªClientRectå¯¹è±¡ä»£è¡¨åœ¨å½“å‰<code>Range</code>å¯¹è±¡é‡Œçš„å…ƒç´ çš„ClientRectã€‚</p>\n<blockquote>\n<p>The <strong>Range.getClientRects()**</strong> **method returns a list of <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ClientRect\" target=\"_blank\" rel=\"external\"><code>ClientRect</code></a> objects representing the area of the screen occupied by the <a href=\"https://developer.mozilla.org/en/DOM/range\" target=\"_blank\" rel=\"external\">range</a>. This is created by aggregating the results of calls to <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects\" target=\"_blank\" rel=\"external\"><code>Element.getClientRects()</code></a> for all the elements in the range.</p>\n</blockquote>\n<p>16ã€å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š<code>Range.compareNode()</code>ã€<code>Range.comparePoint()</code>ã€<code>Range.createContextualFragment()</code>ã€<code>Range.intersectsNode()</code>ã€<code>Range.isPointInRange()</code>éƒ½æ˜¯Gecko å†…æ ¸çš„æ–¹æ³•ï¼Œå¯ç§»æ­¥<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Range\" target=\"_blank\" rel=\"external\">MDN Web Apiæ¥å£ Range</a></p>\n<p>[^2]: å½“rangeçš„å¼€å§‹èŠ‚ç‚¹æˆ–è€…ç»“æŸèŠ‚ç‚¹ä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹çš„æ—¶å€™ï¼Œåç§»é‡ä»£è¡¨æƒ³è¦é€‰ä¸­çš„å­èŠ‚ç‚¹ä¸ªæ•°çš„æ•°å­—ï¼Œä¸èƒ½è¶…è¿‡å­èŠ‚ç‚¹çš„é•¿åº¦,MDNä¸Šè§£é‡Šå¦‚ä¸‹ï¼šIf the endNode is a Node of type Text, Comment, or CDATASection, then endOffset is the number of characters from the start of endNode. For other Node types, endOffsetis the number of child nodes between the start of the endNode.</p>\n<blockquote>\n<p>å‚è€ƒèµ„æ–™</p>\n<p>1ã€<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Range\" target=\"_blank\" rel=\"external\">MDN Web Apiæ¥å£ Range</a></p>\n<p>2ã€<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Selection\" target=\"_blank\" rel=\"external\">MDN Web Apiæ¥å£ Selection</a></p>\n<p>2ã€<a href=\"https://imys.net/20161125/cursor-offset-at-input.html\" target=\"_blank\" rel=\"external\">JavaScript è·å–è¾“å…¥æ—¶çš„å…‰æ ‡ä½ç½®åŠåœºæ™¯é—®é¢˜</a></p>\n</blockquote>\n"},{"title":"macä¸‹sublime3å®‰è£…æ’ä»¶æŠ¥ThereAreNoPackagesAvailableForInstallationé”™è¯¯çš„è§£å†³åŠæ³•","url":"http://www.maotingfeng.me/2016/11/03/macä¸‹sublime3å®‰è£…æ’ä»¶æŠ¥ThereAreNoPackagesAvailableForInstallationé”™è¯¯çš„è§£å†³åŠæ³•/","content":"<p>è§£å†³æ–¹æ¡ˆå†…å®¹</p>\n<p><a href=\"https://segmentfault.com/a/1190000004119292\" target=\"_blank\" rel=\"external\">https://segmentfault.com/a/1190000004119292</a></p>\n"},{"title":"positionä¸ºrelativeçš„table-cellå’Œå…¶postionä¸ºabsoluteçš„å­å…ƒç´ å®šä½çš„bug","url":"http://www.maotingfeng.me/2016/10/31/positionä¸ºrelativeçš„table-cellå’Œå…¶postionä¸ºabsoluteçš„å­å…ƒç´ å®šä½çš„bug/","content":"<h2 id=\"positionä¸ºrelativeçš„table-cellå’Œå…¶postionä¸ºabsoluteçš„å­å…ƒç´ å®šä½çš„bug\"><a href=\"#positionä¸ºrelativeçš„table-cellå’Œå…¶postionä¸ºabsoluteçš„å­å…ƒç´ å®šä½çš„bug\" class=\"headerlink\" title=\"positionä¸ºrelativeçš„table-cellå’Œå…¶postionä¸ºabsoluteçš„å­å…ƒç´ å®šä½çš„bug\"></a>positionä¸ºrelativeçš„table-cellå’Œå…¶postionä¸ºabsoluteçš„å­å…ƒç´ å®šä½çš„bug</h2><p>è€ƒè™‘å¦‚ä¸‹å†…å®¹ï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">  <span class=\"selector-tag\">table</span> &#123; <span class=\"attribute\">margin</span>: <span class=\"number\">200px</span>; &#125;</div><div class=\"line\">  <span class=\"selector-class\">.td</span> &#123; <span class=\"attribute\">position</span>: relative; <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">background-color</span>: <span class=\"number\">#f00</span>; &#125;</div><div class=\"line\">  <span class=\"selector-class\">.absolute</span> &#123; <span class=\"attribute\">position</span>: absolute; <span class=\"attribute\">left</span>: -<span class=\"number\">20px</span>; <span class=\"attribute\">top</span>: <span class=\"number\">0</span>; &#125;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"td\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"absolute\"</span>&gt;</span>è¿™æ˜¯å†…å®¹<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>æœ¬è¯¥å¥½å¥½çš„æŒ‰ä¸‹é¢çš„æ˜¾ç¤ºï¼š</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/table-cell-absolute-bug01.jpeg\" alt=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/table-cell-absolute-bug01.jpeg\"></p>\n<p>å¯æ˜¯ï¼Œåœ¨firefox30ç‰ˆæœ¬ä¸€ä¸‹( chrome,ie8910ï¼Œopera38.0æ­£å¸¸ï¼Œè²Œä¼¼å°±ffæœ‰è¿™ä¸ªç—› )ï¼Œå°±æ˜¯ä¸‹é¢çš„æ ·å­äº†ï¼š</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/table-cell-absolute-bug02.jpeg\" alt=\"\"></p>\n<p>ä¸ºå•¥è¿™æ ·å­å‘¢ï¼Ÿ</p>\n<p>ç§»æ­¥ <a href=\"https://www.w3.org/TR/CSS21/visuren.html#choose-position\" target=\"_blank\" rel=\"external\">w3c</a></p>\n<blockquote>\n<p><strong>relative</strong></p>\n<p>The boxâ€™s position is calculated according to the <a href=\"https://www.w3.org/TR/CSS21/visuren.html#normal-flow\" target=\"_blank\" rel=\"external\">normal flow</a> (this is called the position in normal flow). Then the box is offset <a href=\"https://www.w3.org/TR/CSS21/visuren.html#relative-positioning\" target=\"_blank\" rel=\"external\">relative</a> to its normal position. When a box B is relatively positioned, the position of the following box is calculated as though B were not offset. The effect of â€˜position:relativeâ€™ on table-row-group, table-header-group, table-footer-group, table-row, table-column-group, table-column, <strong>table-cell</strong>, and table-caption elements is undefined.</p>\n</blockquote>\n<p>å¯ä»¥çœ‹å‡ºï¼Œtable-cellå±æ€§çš„å…ƒç´ å…¶relativeå±æ€§æ— æ•ˆã€‚</p>\n<p>è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ</p>\n<ul>\n<li>å¯ä»¥åœ¨tdé‡Œé¢æˆ–è€…table-cellå…ƒç´ çš„å†…éƒ¨æ’å…¥ä¸€ä¸ªdivï¼Œç„¶åå°†å…¶è®¾ç½®ä¸ºpostion relativeï¼Œä¸è¦ç›´æ¥åœ¨cellç±»çš„å…ƒç´ ä¸­ç›´æ¥è®¾ç½®position relativeã€‚</li>\n<li>å…·ä½“æ–¹æ³•å¯å‚è€ƒè¿™ä¸ªåšæ–‡é‡Œçš„å†…å®¹ï¼š<a href=\"https://davidwalsh.name/table-cell-position-absolute\" target=\"_blank\" rel=\"external\">table-cell-position-absolute</a></li>\n</ul>\n<p>å‚è€ƒ<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/position\" target=\"_blank\" rel=\"external\">ç«ç‹å¼€å‘è€…ç¤¾åŒº</a>:</p>\n<blockquote>\n<p>[1] ä» Firefox 30 èµ·ï¼ŒGecko å…è®¸ <tr>,<thead>,<tfoot>å…ƒç´ ä½¿ç”¨ <code>position: relative;</code> æ ·å¼ä»¥ä½œä¸ºç»å¯¹å®šä½å…ƒç´ çš„å®¹å™¨ã€‚å› æ­¤åœ¨è¡¨æ ¼å†…çš„ <code>position:absolute</code>å…ƒç´ åŒæ ·å¯ç›¸å¯¹äºè¿™äº›å…ƒç´ å®šä½ã€‚åœ¨å…¶å®ƒæµè§ˆå™¨ä¸æ—§ç‰ˆæœ¬ Firefox ä¸­ï¼Œå¯¹è¡¨æ ¼è¡Œæˆ–ä¸€ç»„è¡Œè®¾ç½® <code>position: relative</code>æ˜¯æ— æ•ˆçš„ã€‚Firefox é€šè¿‡åœ¨ JS æ§åˆ¶å°è¾“å‡ºå¯¹æ·»åŠ ç›¸å¯¹å®šä½çš„è¡¨æ ¼è¡Œæˆ–è¡Œç»„å…ƒç´ çš„å¦‚ä¸‹è­¦å‘Šä¿¡æ¯ï¼Œæ¥å¸®åŠ©å¼€å‘è€…è½¬ç§»åˆ°æ–°çš„æ ·å¼è¡Œä¸ºä¸Šï¼Œå¹¶æ£€æµ‹å¯èƒ½å­˜åœ¨çš„æ¸²æŸ“é—®é¢˜ï¼š</tfoot></thead></tr></p>\n<p>Relative positioning of table rows and row groups is now supported. This site may need to be updated because it may depend on this feature having no effect.</p>\n</blockquote>\n<p>ç«ç‹æ˜¯æ”¯æŒ<code>tr</code>è¿™ç±»æ ‡ç­¾çš„relativeï¼Œä¸è¿‡æµ‹è¯•äº†ä¸‹chromeè²Œä¼¼ä¸æ”¯æŒã€‚</p>\n<p>å®Œã€‚</p>\n"},{"title":"angularçš„ngRouteè¯¦è§£","url":"http://www.maotingfeng.me/2016/10/30/angularçš„ngRouteè¯¦è§£/","content":"<h1 id=\"angularçš„ngRouteè¯¦è§£\"><a href=\"#angularçš„ngRouteè¯¦è§£\" class=\"headerlink\" title=\"angularçš„ngRouteè¯¦è§£\"></a>angularçš„ngRouteè¯¦è§£</h1><p>â€‹    AngularJSçš„è·¯ç”±å…¶å®æ˜¯ä¸€ç§çº¯å‰ç«¯çš„è§£å†³æ–¹æ¡ˆã€‚ä¸åŒäºåç«¯çš„è·¯ç”±ï¼Œåç«¯çš„è·¯ç”±æ˜¯åŒ¹é…ä¸åŒçš„è·¯ç”±ï¼Œè¾“å‡ºä¸åŒçš„å†…å®¹ï¼Œæµè§ˆå™¨æ‹¿åˆ°å½“å‰è·¯ç”±çš„å†…å®¹ï¼Œç›´æ¥æ¸²æŸ“å±•ç¤ºã€‚AngularJSçš„è·¯ç”±ï¼Œå½“è¯·æ±‚äº†è¿™ä¸ªurlï¼Œæ ¹æ®å…¶è·¯ç”±åŒ¹é…è§„åˆ™ï¼Œæ¥åŒ¹é…å½“å‰çš„urlï¼Œç„¶åè¯·æ±‚æ¨¡ç‰ˆï¼Œç„¶åæŠŠæ•°æ®ç»“åˆæ¨¡ç‰ˆæ’å…¥åˆ°ng-viewä¸­å»ã€‚æ€»ç»“å°±æ˜¯ï¼Œå±€éƒ¨åˆ·æ–°ä½“ç°åœ¨urlçš„å˜æ›´ä¸Šã€‚urlå˜æ›´ï¼Œå°±å¯ä»¥è®°å½•åˆ°å†å²ä¸­å»äº†ï¼Œæ–¹ä¾¿ç”¨æˆ·æµè§ˆå†å²ï¼Œå›é€€æ“ä½œã€‚ç›¸å¯¹äºå•çº¯çš„ajaxå±€éƒ¨åˆ·æ–°ï¼Œä¼˜ç‚¹è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p>\n<h3 id=\"å®ä¾‹\"><a href=\"#å®ä¾‹\" class=\"headerlink\" title=\"å®ä¾‹\"></a>å®ä¾‹</h3><p>æ–‡ä»¶ç›®å½•ç»“æ„ï¼š</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/angular-route-files.jpeg\" alt=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/angular-route-files.jpeg\"></p>\n<p>index.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>angular ngRouteæµ‹è¯•<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://cdn.bootcss.com/angular.js/1.5.8/angular.min.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://cdn.bootcss.com/angular.js/1.5.8/angular-route.min.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">ng-app</span>=<span class=\"string\">\"routeApp\"</span> <span class=\"attr\">ng-controller</span>=<span class=\"string\">\"routeController\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Angular Route Demo<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#/home\"</span>&gt;</span>home<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#/post\"</span>&gt;</span>post<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#/about\"</span>&gt;</span>about<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">hr</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">ng-view</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/js/post.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/js/index.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>home.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘æ˜¯homeçš„å†…å®¹<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>about.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘æ˜¯aboutçš„å†…å®¹<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>post.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘æ˜¯postçš„å†…å®¹<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#/post/19\"</span>&gt;</span>è·³è½¬åˆ°idä¸º19å·çš„æ–‡ç« <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>post-id.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>è¿™æ˜¯post-idä¸­çš„å†…å®¹ï¼ŒåŠ¨æ€è·å–åˆ°çš„idå‚æ•°ä¸º:&#123;&#123;post_id&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>è¿è¡Œå¯çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š</p>\n<p><img src=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/angular-route-demo.jpeg\" alt=\"http://oco9w3mgp.bkt.clouddn.com/blog_images/angular-route-demo.jpeg\"></p>\n<p>å¯ä»¥çœ‹åˆ°<code>ng-view</code>æ ‡è¯†çš„å±æ€§å…ƒç´ ï¼Œè¢«<code>home.html</code>çš„å†…å®¹å¡«å……äº†ã€‚</p>\n<p>post.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">angular.module( <span class=\"string\">'Module.Post'</span> , [<span class=\"string\">'ngRoute'</span>] )</div><div class=\"line\">.config([<span class=\"string\">'$routeProvider'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$routeProvider</span>)</span>&#123;</div><div class=\"line\">    $routeProvider.when(<span class=\"string\">'/post'</span>,&#123;</div><div class=\"line\">        templateUrl: <span class=\"string\">'post.html'</span> ,</div><div class=\"line\">        controller: <span class=\"string\">'PostController'</span></div><div class=\"line\">    &#125;).when(<span class=\"string\">'/post/:post_id'</span>,&#123;</div><div class=\"line\">        templateUrl: <span class=\"string\">'post-id.html'</span> ,</div><div class=\"line\">        controller: <span class=\"string\">'PostIdController'</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;]).controller( <span class=\"string\">'PostController'</span> , [ <span class=\"string\">'$scope'</span> , <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> $scope </span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">&#125; ] ).controller( <span class=\"string\">'PostIdController'</span> , [ <span class=\"string\">'$scope'</span> , <span class=\"string\">'$routeParams'</span> , <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> $scope , $routeParams </span>)</span>&#123;</div><div class=\"line\">    $scope.post_id = <span class=\"string\">'$routeParams.post_id = '</span> + $routeParams.post_id + <span class=\"string\">'ã€‚'</span> ;</div><div class=\"line\">&#125; ] ) ;</div></pre></td></tr></table></figure>\n<p>index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">angular.module( <span class=\"string\">'routeApp'</span> , [<span class=\"string\">'ngRoute'</span>,<span class=\"string\">'Module.Post'</span>] )</div><div class=\"line\">.config([<span class=\"string\">'$routeProvider'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$routeProvider</span>)</span>&#123;</div><div class=\"line\">    $routeProvider.when(<span class=\"string\">'/home'</span>,&#123;</div><div class=\"line\">        templateUrl: <span class=\"string\">'home.html'</span> ,</div><div class=\"line\">        controller: <span class=\"string\">'HomeController'</span></div><div class=\"line\">    &#125;).when(<span class=\"string\">'/about'</span>,&#123;</div><div class=\"line\">        templateUrl: <span class=\"string\">'about.html'</span> ,</div><div class=\"line\">        controller: <span class=\"string\">'AboutController'</span> ,</div><div class=\"line\">        resolve: &#123;</div><div class=\"line\">            longTime: [ <span class=\"string\">'$q'</span> , <span class=\"string\">'$timeout'</span> , <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> $q , $timeout </span>)</span>&#123;</div><div class=\"line\">                <span class=\"keyword\">var</span> deferred = $q.defer() ;</div><div class=\"line\">                $timeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">                    deferred.resolve( <span class=\"string\">'è€—æ—¶3ç§’çš„æ“ä½œå®Œæˆäº†'</span> );</div><div class=\"line\">                &#125; , <span class=\"number\">3000</span> ) ;</div><div class=\"line\">                <span class=\"keyword\">return</span> deferred.promise ;</div><div class=\"line\">            &#125; ]</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;).otherwise(<span class=\"string\">'/home'</span>)</div><div class=\"line\">&#125;]).controller( <span class=\"string\">'routeController'</span> , [ <span class=\"string\">'$scope'</span> , <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> $scope </span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">&#125; ] ).controller( <span class=\"string\">'HomeController'</span> , [ <span class=\"string\">'$scope'</span> , <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> $scope </span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">&#125; ] ).controller( <span class=\"string\">'AboutController'</span> , [ <span class=\"string\">'$scope'</span> , <span class=\"string\">'longTime'</span> , <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> $scope , longTime </span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">// longTime == 'è€—æ—¶3ç§’çš„æ“ä½œå®Œæˆäº†'</span></div><div class=\"line\">&#125; ] ) ;</div></pre></td></tr></table></figure>\n<p>éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š</p>\n<ul>\n<li>moduleéœ€è¦å¯¼å…¥ngRouteæ¨¡å—</li>\n<li>$routeProviderçš„whenæ–¹æ³•ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯ç”±ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è·¯ç”±é…ç½®å‚æ•°ã€‚</li>\n<li>otherwiseç”¨äºé»˜è®¤çš„è·¯ç”±å‚æ•°ï¼Œç±»ä¼¼å¯¼è‡´404çš„è·¯ç”±ï¼Œéƒ½ä¼šè¢«é‡å®šå‘åˆ°è¿™ä¸ªé»˜è®¤çš„è·¯ç”±é‡Œã€‚</li>\n<li>æ¨è<code>post.js</code>ä¸­çš„å†™æ³•ï¼Œæ¨¡å—åŒ–è·¯ç”±ï¼Œè®²ç›¸å…³çš„è·¯ç”±å°è£…åˆ°ä¸€ä¸ªpost.jsä¸­ï¼Œç„¶åå…¶å®ƒæ¨¡å—å¯¼å…¥è¿™ä¸ªæ¨¡å—ã€‚</li>\n</ul>\n<h3 id=\"routeParams\"><a href=\"#routeParams\" class=\"headerlink\" title=\"$routeParams\"></a>$routeParams</h3><p>åœ¨<code>post.js</code>ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>$routeProvider</code>é…ç½®çš„ç¬¬äºŒä¸ªè·¯ç”±æ˜¯è¿™æ ·çš„<code>/post/:post_id</code>ã€‚è·¯ç”±ä¸­çš„<code>/:post_id</code>å…¶å®æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå®ƒå°†åŒ¹é…ç±»ä¼¼<code>/post/001</code>è¿™ç§urlï¼Œå…¶ä¸­<strong>001</strong>å°±æ˜¯è¿™ä¸ª<code>:post_id</code>çš„å€¼ã€‚æˆ‘ä»¬åœ¨è·¯ç”±å¯¹åº”çš„æ§åˆ¶å™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡<code>$routeParams</code>å‚æ•°æ¥è·å–è¿™ä¸ªurlå‚æ•°ã€‚</p>\n<h3 id=\"è·¯ç”±é…ç½®ä¸­çš„resolve\"><a href=\"#è·¯ç”±é…ç½®ä¸­çš„resolve\" class=\"headerlink\" title=\"è·¯ç”±é…ç½®ä¸­çš„resolve\"></a>è·¯ç”±é…ç½®ä¸­çš„resolve</h3><p>åœ¨é…ç½®è·¯ç”±æ—¶ï¼Œé…ç½®<code>resolve</code>é€‰é¡¹ã€‚é…ç½®<code>resolve</code>é€‰é¡¹æ„å‘³ç€ï¼Œåœ¨è¿›å…¥è¿™ä¸ªè·¯ç”±ä¹‹å‰å°±å¿…é¡»ç­‰å¾…<code>resolve</code>ä¸­çš„æ•°æ®è¿”å›ã€‚</p>\n<p>ä¸€èˆ¬ç”¨äºè¿›å…¥æŸä¸ªè·¯ç”±æ¯”è¾ƒè€—æ—¶ï¼Œæ¯”å¦‚æ–°é—»æ ‡é¢˜è¿›å…¥æ–°é—»è¯¦æƒ…ï¼Œæ–°é—»è¯¦æƒ…é¡µéœ€è¦ajaxè¯·æ±‚åå°ï¼Œåå°è¿”å›æ•°æ®ä¹‹å‰ï¼Œè¿™ä¸ªè·¯ç”±å…¶å®ä¸åº”è¯¥æ‰§è¡Œï¼Œè€Œæ˜¯åº”è¯¥ç­‰å¾…åå°å“åº”æ•°æ®ã€‚è¿™é‡Œä¸€ä¸ªåŠ ä¸€ä¸ªloading gifä¹‹ç±»çš„åŠ¨ç”»ã€‚å½“ajaxå®Œæˆä¹‹åï¼Œangularé€šè¿‡æ³¨å†Œresolveè¿”å›çš„promiseå¯¹è±¡çš„thenæ–¹æ³•ï¼Œå¾—çŸ¥æ•°æ®å·²ç»æ‹¿åˆ°äº†ï¼ŒæŠŠæ¨¡ç‰ˆå¡«å……åˆ°<code>ng-view</code>ä¸­ï¼Œç„¶åæ‰§è¡Œå¯¹åº”è·¯ç”±çš„æ§åˆ¶å™¨ã€‚æ•´ä¸ªè¿‡ç¨‹å®Œæˆ</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>\n<ul>\n<li>å¯ä»¥å°†resolveé…ç½®ä¸­çš„é”®ï¼Œæœ¬ä¾‹æ˜¯<code>AboutController</code>ä¸­çš„<code>longTime</code>é”®ï¼Œå¯ä»¥å°†å®ƒæ³¨å…¥å…¶æ§åˆ¶å™¨ä¸­ï¼Œç„¶åå°±å¯ä»¥æ‹¿åˆ°åå°è¿”å›çš„å€¼äº†ï¼Œæœ¬ä¾‹è¿”å›çš„æ˜¯ï¼š<code>&#39;è€—æ—¶3ç§’çš„æ“ä½œå®Œæˆäº†&#39;</code>ã€‚</li>\n</ul>\n"},{"title":"httpåè®®","url":"http://www.maotingfeng.me/2016/09/12/httpåè®®/","content":"<h3 id=\"ä»€ä¹ˆæ˜¯HTTPåè®®\"><a href=\"#ä»€ä¹ˆæ˜¯HTTPåè®®\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯HTTPåè®®\"></a>ä»€ä¹ˆæ˜¯HTTPåè®®</h3><hr>\n<p>åè®®æ˜¯æŒ‡è®¡ç®—æœºé€šä¿¡ç½‘ç»œä¸­ä¸¤å°è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šä¿¡æ‰€å¿…é¡»å…±åŒéµå®ˆçš„è§„å®šæˆ–è§„åˆ™ï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®(HTTP)æ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œå®ƒå…è®¸å°†è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€(HTML)æ–‡æ¡£ä»WebæœåŠ¡å™¨ä¼ é€åˆ°å®¢æˆ·ç«¯çš„æµè§ˆå™¨</p>\n<p>ç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯HTTP/1.1 ç‰ˆæœ¬</p>\n<h3 id=\"URLè¯¦è§£\"><a href=\"#URLè¯¦è§£\" class=\"headerlink\" title=\"URLè¯¦è§£\"></a>URLè¯¦è§£</h3><p>URL(Uniform Resource Locator) åœ°å€ç”¨äºæè¿°ä¸€ä¸ªç½‘ç»œä¸Šçš„èµ„æº,  åŸºæœ¬æ ¼å¼å¦‚ä¸‹:</p>\n<ul>\n<li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">schema://host[:port#]/path/.../[?query-string][#anchor]</div></pre></td></tr></table></figure>\n<p>â€‹    scheme               æŒ‡å®šåº•å±‚ä½¿ç”¨çš„åè®®(ä¾‹å¦‚ï¼šhttp, https, ftp)</p>\n<p>â€‹    host                     HTTPæœåŠ¡å™¨çš„IPåœ°å€æˆ–è€…åŸŸå</p>\n<p>â€‹    port#                   HTTPæœåŠ¡å™¨çš„é»˜è®¤ç«¯å£æ˜¯80ï¼Œè¿™ç§æƒ…å†µä¸‹ç«¯å£å·å¯ä»¥çœç•¥ã€‚å¦‚æœä½¿ç”¨äº†åˆ«çš„ç«¯å£ï¼Œå¿…é¡»æŒ‡æ˜</p>\n<p>â€‹    path                     è®¿é—®èµ„æºçš„è·¯å¾„</p>\n<p>â€‹    query-string       å‘é€ç»™httpæœåŠ¡å™¨çš„æ•°æ®</p>\n<p>â€‹    anchor                é”š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">http://www.mywebsite.com/sj/test/test.aspx?name=sviergn&amp;x=true#stuff</div><div class=\"line\"></div><div class=\"line\">Schema:                 http</div><div class=\"line\">host:                   www.mywebsite.com</div><div class=\"line\">path:                   /sj/test/test.aspx</div><div class=\"line\">Query String:           name=sviergn&amp;x=true</div><div class=\"line\">Anchor:                 stuff</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"HTTPåè®®æ˜¯æ— çŠ¶æ€çš„\"><a href=\"#HTTPåè®®æ˜¯æ— çŠ¶æ€çš„\" class=\"headerlink\" title=\"HTTPåè®®æ˜¯æ— çŠ¶æ€çš„\"></a>HTTPåè®®æ˜¯æ— çŠ¶æ€çš„</h3><p>httpåè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¿™æ¬¡è¯·æ±‚å’Œä¸Šæ¬¡è¯·æ±‚æ˜¯æ²¡æœ‰å¯¹åº”å…³ç³»ï¼Œå¯¹httpæœåŠ¡å™¨æ¥è¯´ï¼Œå®ƒå¹¶ä¸çŸ¥é“è¿™ä¸¤ä¸ªè¯·æ±‚æ¥è‡ªåŒä¸€ä¸ªå®¢æˆ·ç«¯ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ Webç¨‹åºå¼•å…¥äº†Cookieæœºåˆ¶æ¥ç»´æŠ¤çŠ¶æ€.</p>\n<h3 id=\"æ‰“å¼€ä¸€ä¸ªç½‘é¡µéœ€è¦æµè§ˆå™¨å‘é€å¾ˆå¤šæ¬¡Request\"><a href=\"#æ‰“å¼€ä¸€ä¸ªç½‘é¡µéœ€è¦æµè§ˆå™¨å‘é€å¾ˆå¤šæ¬¡Request\" class=\"headerlink\" title=\"æ‰“å¼€ä¸€ä¸ªç½‘é¡µéœ€è¦æµè§ˆå™¨å‘é€å¾ˆå¤šæ¬¡Request\"></a>æ‰“å¼€ä¸€ä¸ªç½‘é¡µéœ€è¦æµè§ˆå™¨å‘é€å¾ˆå¤šæ¬¡Request</h3><ol>\n<li>å½“ä½ åœ¨æµè§ˆå™¨è¾“å…¥URL <a href=\"http://www.cnblogs.com\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com</a> çš„æ—¶å€™ï¼Œæµè§ˆå™¨å‘é€ä¸€ä¸ªRequestå»è·å– <a href=\"http://www.cnblogs.com\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com</a> çš„html.  æœåŠ¡å™¨æŠŠResponseå‘é€å›ç»™æµè§ˆå™¨.</li>\n</ol>\n<ol>\n<li>æµè§ˆå™¨åˆ†æResponseä¸­çš„ HTMLï¼Œå‘ç°å…¶ä¸­å¼•ç”¨äº†å¾ˆå¤šå…¶ä»–æ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡ï¼ŒCSSæ–‡ä»¶ï¼ŒJSæ–‡ä»¶ã€‚</li>\n</ol>\n<ol>\n<li>æµè§ˆå™¨ä¼šè‡ªåŠ¨å†æ¬¡å‘é€Requestå»è·å–å›¾ç‰‡ï¼ŒCSSæ–‡ä»¶ï¼Œæˆ–è€…JSæ–‡ä»¶ã€‚</li>\n</ol>\n<ol>\n<li>ç­‰æ‰€æœ‰çš„æ–‡ä»¶éƒ½ä¸‹è½½æˆåŠŸåã€‚ ç½‘é¡µå°±è¢«æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</li>\n</ol>\n<h3 id=\"HTTPæ¶ˆæ¯çš„ç»“æ„\"><a href=\"#HTTPæ¶ˆæ¯çš„ç»“æ„\" class=\"headerlink\" title=\"HTTPæ¶ˆæ¯çš„ç»“æ„\"></a>HTTPæ¶ˆæ¯çš„ç»“æ„</h3><p>å…ˆçœ‹Request æ¶ˆæ¯çš„ç»“æ„,   Request æ¶ˆæ¯åˆ†ä¸º3éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†å«Request line, ç¬¬äºŒéƒ¨åˆ†å«Request header, ç¬¬ä¸‰éƒ¨åˆ†æ˜¯body. headerå’Œbodyä¹‹é—´æœ‰ä¸ªç©ºè¡Œï¼Œ ç»“æ„å¦‚ä¸‹å›¾:</p>\n<p><img src=\"http://pic002.cnblogs.com/images/2012/263119/2012020914293943.png\" alt=\"\"></p>\n<p>ç¬¬ä¸€è¡Œä¸­çš„Methodè¡¨ç¤ºè¯·æ±‚æ–¹æ³•,æ¯”å¦‚â€POSTâ€,â€GETâ€,  Path-to-resoureè¡¨ç¤ºè¯·æ±‚çš„èµ„æºï¼Œ Http/version-number è¡¨ç¤ºHTTPåè®®çš„ç‰ˆæœ¬å·ã€‚å½“ä½¿ç”¨çš„æ˜¯â€GETâ€ æ–¹æ³•çš„æ—¶å€™ï¼Œ bodyæ˜¯ä¸ºç©ºçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æ‰“å¼€åšå®¢å›­é¦–é¡µçš„request å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">GET http://www.cnblogs.com/ HTTP/1.1</div><div class=\"line\">Host: www.cnblogs.com</div></pre></td></tr></table></figure>\n<p>æŠ½è±¡çš„ä¸œè¥¿ï¼Œéš¾ä»¥ç†è§£ï¼Œè€æ„Ÿè§‰æ˜¯è™šçš„ï¼Œ æ‰€è°“çœ¼è§ä¸ºå®, å®é™…è§åˆ°çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬æ‰èƒ½ç†è§£å’Œè®°å¿†ã€‚ æˆ‘ä»¬ä»Šå¤©ç”¨Fiddlerï¼Œå®é™…çš„çœ‹çœ‹Requestå’ŒResponse.</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ‰“å¼€Fiddler æ•æ‰ä¸€ä¸ªåšå®¢å›­ç™»å½•çš„Request ç„¶ååˆ†æä¸‹å®ƒçš„ç»“æ„, åœ¨Inspectors tabä¸‹ä»¥Rawçš„æ–¹å¼å¯ä»¥çœ‹åˆ°å®Œæ•´çš„Requestçš„æ¶ˆæ¯ï¼Œå¦‚ä¸‹å›¾:</p>\n<p><img src=\"http://pic002.cnblogs.com/images/2012/263119/2012022009421183.png\" alt=\"\"></p>\n<p>æˆ‘ä»¬å†çœ‹Responseæ¶ˆæ¯çš„ç»“æ„, å’ŒRequestæ¶ˆæ¯çš„ç»“æ„åŸºæœ¬ä¸€æ ·ã€‚ åŒæ ·ä¹Ÿåˆ†ä¸ºä¸‰éƒ¨åˆ†,ç¬¬ä¸€éƒ¨åˆ†å«Response line, ç¬¬äºŒéƒ¨åˆ†å«Response headerï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯body. headerå’Œbodyä¹‹é—´ä¹Ÿæœ‰ä¸ªç©ºè¡Œ,  ç»“æ„å¦‚ä¸‹å›¾:</p>\n<p><img src=\"http://pic002.cnblogs.com/images/2012/263119/2012021309365350.png\" alt=\"\"></p>\n<p>HTTP/version-numberè¡¨ç¤ºHTTPåè®®çš„ç‰ˆæœ¬å·ï¼Œ  status-code å’Œmessage è¯·çœ‹ä¸‹èŠ‚çŠ¶æ€ä»£ç çš„è¯¦ç»†è§£é‡Š.</p>\n<p>æˆ‘ä»¬ç”¨Fiddler æ•æ‰ä¸€ä¸ªåšå®¢å›­é¦–é¡µçš„Responseç„¶ååˆ†æä¸‹å®ƒçš„ç»“æ„, åœ¨Inspectors tabä¸‹ä»¥Rawçš„æ–¹å¼å¯ä»¥çœ‹åˆ°å®Œæ•´çš„Responseçš„æ¶ˆæ¯ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://pic002.cnblogs.com/images/2012/263119/2012022009373182.png\" alt=\"\"></p>\n<h3 id=\"Getå’ŒPostæ–¹æ³•çš„åŒºåˆ«\"><a href=\"#Getå’ŒPostæ–¹æ³•çš„åŒºåˆ«\" class=\"headerlink\" title=\"Getå’ŒPostæ–¹æ³•çš„åŒºåˆ«\"></a>Getå’ŒPostæ–¹æ³•çš„åŒºåˆ«</h3><p>Httpåè®®å®šä¹‰äº†å¾ˆå¤šä¸æœåŠ¡å™¨äº¤äº’çš„æ–¹æ³•ï¼Œæœ€åŸºæœ¬çš„æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯GET,POST,PUT,DELETE. ä¸€ä¸ªURLåœ°å€ç”¨äºæè¿°ä¸€ä¸ªç½‘ç»œä¸Šçš„èµ„æºï¼Œè€ŒHTTPä¸­çš„GET, POST, PUT, DELETEå°±å¯¹åº”ç€å¯¹è¿™ä¸ªèµ„æºçš„æŸ¥ï¼Œæ”¹ï¼Œå¢ï¼Œåˆ 4ä¸ªæ“ä½œã€‚ æˆ‘ä»¬æœ€å¸¸è§çš„å°±æ˜¯GETå’ŒPOSTäº†ã€‚GETä¸€èˆ¬ç”¨äºè·å–/æŸ¥è¯¢èµ„æºä¿¡æ¯ï¼Œè€ŒPOSTä¸€èˆ¬ç”¨äºæ›´æ–°èµ„æºä¿¡æ¯.</p>\n<p>æˆ‘ä»¬çœ‹çœ‹GETå’ŒPOSTçš„åŒºåˆ«</p>\n<ol>\n<li>GETæäº¤çš„æ•°æ®ä¼šæ”¾åœ¨URLä¹‹åï¼Œä»¥?åˆ†å‰²URLå’Œä¼ è¾“æ•°æ®ï¼Œå‚æ•°ä¹‹é—´ä»¥&amp;ç›¸è¿ï¼Œå¦‚EditPosts.aspx?name=test1&amp;id=123456.  POSTæ–¹æ³•æ˜¯æŠŠæäº¤çš„æ•°æ®æ”¾åœ¨HTTPåŒ…çš„Bodyä¸­.</li>\n<li>GETæäº¤çš„æ•°æ®å¤§å°æœ‰é™åˆ¶ï¼ˆå› ä¸ºæµè§ˆå™¨å¯¹URLçš„é•¿åº¦æœ‰é™åˆ¶ï¼‰ï¼Œè€ŒPOSTæ–¹æ³•æäº¤çš„æ•°æ®æ²¡æœ‰é™åˆ¶.</li>\n<li>GETæ–¹å¼éœ€è¦ä½¿ç”¨Request.QueryStringæ¥å–å¾—å˜é‡çš„å€¼ï¼Œè€ŒPOSTæ–¹å¼é€šè¿‡Request.Formæ¥è·å–å˜é‡çš„å€¼ã€‚</li>\n<li>GETæ–¹å¼æäº¤æ•°æ®ï¼Œä¼šå¸¦æ¥å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œé€šè¿‡GETæ–¹å¼æäº¤æ•°æ®æ—¶ï¼Œç”¨æˆ·åå’Œå¯†ç å°†å‡ºç°åœ¨URLä¸Šï¼Œå¦‚æœé¡µé¢å¯ä»¥è¢«ç¼“å­˜æˆ–è€…å…¶ä»–äººå¯ä»¥è®¿é—®è¿™å°æœºå™¨ï¼Œå°±å¯ä»¥ä»å†å²è®°å½•è·å¾—è¯¥ç”¨æˆ·çš„è´¦å·å’Œå¯†ç .</li>\n</ol>\n<h3 id=\"çŠ¶æ€ç \"><a href=\"#çŠ¶æ€ç \" class=\"headerlink\" title=\"çŠ¶æ€ç \"></a>çŠ¶æ€ç </h3><p>Response æ¶ˆæ¯ä¸­çš„ç¬¬ä¸€è¡Œå«åšçŠ¶æ€è¡Œï¼Œç”±HTTPåè®®ç‰ˆæœ¬å·ï¼Œ çŠ¶æ€ç ï¼Œ çŠ¶æ€æ¶ˆæ¯ ä¸‰éƒ¨åˆ†ç»„æˆã€‚</p>\n<p>çŠ¶æ€ç ç”¨æ¥å‘Šè¯‰HTTPå®¢æˆ·ç«¯,HTTPæœåŠ¡å™¨æ˜¯å¦äº§ç”Ÿäº†é¢„æœŸçš„Response.</p>\n<p>HTTP/1.1ä¸­å®šä¹‰äº†5ç±»çŠ¶æ€ç ï¼Œ çŠ¶æ€ç ç”±ä¸‰ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«</p>\n<p>1XX  æç¤ºä¿¡æ¯ - è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ï¼Œç»§ç»­å¤„ç†</p>\n<p>2XX  æˆåŠŸ - è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ï¼Œç†è§£ï¼Œæ¥å—</p>\n<p>3XX  é‡å®šå‘ - è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„å¤„ç†</p>\n<p>4XX  å®¢æˆ·ç«¯é”™è¯¯ -  è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°</p>\n<p>5XX  æœåŠ¡å™¨ç«¯é”™è¯¯ -   æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚</p>\n<p>çœ‹çœ‹ä¸€äº›å¸¸è§çš„çŠ¶æ€ç </p>\n<p>200 OK</p>\n<p>æœ€å¸¸è§çš„å°±æ˜¯æˆåŠŸå“åº”çŠ¶æ€ç 200äº†ï¼Œ è¿™è¡¨æ˜è¯¥è¯·æ±‚è¢«æˆåŠŸåœ°å®Œæˆï¼Œæ‰€è¯·æ±‚çš„èµ„æºå‘é€å›å®¢æˆ·ç«¯</p>\n<p>302 Found</p>\n<p>é‡å®šå‘ï¼Œæ–°çš„URLä¼šåœ¨response ä¸­çš„Locationä¸­è¿”å›ï¼Œæµè§ˆå™¨å°†ä¼šè‡ªåŠ¨ä½¿ç”¨æ–°çš„URLå‘å‡ºæ–°çš„Request</p>\n<p>ä¾‹å¦‚åœ¨IEä¸­è¾“å…¥ï¼Œ <a href=\"http://www.google.com\" target=\"_blank\" rel=\"external\">http://www.google.com</a>. HTTPæœåŠ¡å™¨ä¼šè¿”å›302ï¼Œ IEå–åˆ°Responseä¸­Location headerçš„æ–°URL, åˆé‡æ–°å‘é€äº†ä¸€ä¸ªRequest.</p>\n<p><img src=\"http://pic002.cnblogs.com/images/2012/263119/2012021115280744.png\" alt=\"\"></p>\n<p>304 Not Modified</p>\n<p>ä»£è¡¨ä¸Šæ¬¡çš„æ–‡æ¡£å·²ç»è¢«ç¼“å­˜äº†ï¼Œ è¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œ</p>\n<p>400 Bad Request  å®¢æˆ·ç«¯è¯·æ±‚ä¸è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£</p>\n<p>403 Forbidden æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡</p>\n<p>404 Not Found</p>\n<p>è¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼ˆè¾“é”™äº†URLï¼‰</p>\n<p>500 Internal Server Error æœåŠ¡å™¨å‘ç”Ÿäº†ä¸å¯é¢„æœŸçš„é”™è¯¯</p>\n<p>503 Server Unavailable æœåŠ¡å™¨å½“å‰ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸€æ®µæ—¶é—´åå¯èƒ½æ¢å¤æ­£å¸¸</p>\n<h2 id=\"HTTP-Request-header\"><a href=\"#HTTP-Request-header\" class=\"headerlink\" title=\"HTTP Request header\"></a>HTTP Request header</h2><p><strong>If-Modified-Since</strong></p>\n<p>ä½œç”¨ï¼š æŠŠæµè§ˆå™¨ç«¯ç¼“å­˜é¡µé¢çš„æœ€åä¿®æ”¹æ—¶é—´å‘é€åˆ°æœåŠ¡å™¨å»ï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¿™ä¸ªæ—¶é—´ä¸æœåŠ¡å™¨ä¸Šå®é™…æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœæ—¶é—´ä¸€è‡´ï¼Œé‚£ä¹ˆè¿”å›304ï¼Œå®¢æˆ·ç«¯å°±ç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜æ–‡ä»¶ã€‚å¦‚æœæ—¶é—´ä¸ä¸€è‡´ï¼Œå°±ä¼šè¿”å›200å’Œæ–°çš„æ–‡ä»¶å†…å®¹ã€‚å®¢æˆ·ç«¯æ¥åˆ°ä¹‹åï¼Œä¼šä¸¢å¼ƒæ—§æ–‡ä»¶ï¼ŒæŠŠæ–°æ–‡ä»¶ç¼“å­˜èµ·æ¥ï¼Œå¹¶æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸­.</p>\n<p>ä¾‹å¦‚ï¼šIf-Modified-Since: Thu, 09 Feb 2012 09:07:57 GMT</p>\n<p><strong>If-None-Match</strong></p>\n<p>ä½œç”¨: If-None-Matchå’ŒETagä¸€èµ·å·¥ä½œï¼Œå·¥ä½œåŸç†æ˜¯åœ¨HTTP Responseä¸­æ·»åŠ ETagä¿¡æ¯ã€‚ å½“ç”¨æˆ·å†æ¬¡è¯·æ±‚è¯¥èµ„æºæ—¶ï¼Œå°†åœ¨HTTP Request ä¸­åŠ å…¥If-None-Matchä¿¡æ¯(ETagçš„å€¼)ã€‚å¦‚æœæœåŠ¡å™¨éªŒè¯èµ„æºçš„ETagæ²¡æœ‰æ”¹å˜ï¼ˆè¯¥èµ„æºæ²¡æœ‰æ›´æ–°ï¼‰ï¼Œå°†è¿”å›ä¸€ä¸ª304çŠ¶æ€å‘Šè¯‰å®¢æˆ·ç«¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜æ–‡ä»¶ã€‚å¦åˆ™å°†è¿”å›200çŠ¶æ€å’Œæ–°çš„èµ„æºå’ŒEtag.  ä½¿ç”¨è¿™æ ·çš„æœºåˆ¶å°†æé«˜ç½‘ç«™çš„æ€§èƒ½</p>\n<p>ä¾‹å¦‚: If-None-Match: â€œ03f2b33c0bfcc1:0â€</p>\n<p><strong>Pragma</strong></p>\n<p>ä½œç”¨ï¼š é˜²æ­¢é¡µé¢è¢«ç¼“å­˜ï¼Œ åœ¨HTTP/1.1ç‰ˆæœ¬ä¸­ï¼Œå®ƒå’ŒCache-Control:no-cacheä½œç”¨ä¸€æ¨¡ä¸€æ ·</p>\n<p>Pargmaåªæœ‰ä¸€ä¸ªç”¨æ³•ï¼Œ ä¾‹å¦‚ï¼š Pragma: no-cache</p>\n<p>æ³¨æ„: åœ¨HTTP/1.0ç‰ˆæœ¬ä¸­ï¼Œåªå®ç°äº†Pragema:no-cache, æ²¡æœ‰å®ç°Cache-Control</p>\n<p><strong>Cache-Control</strong></p>\n<p>ä½œç”¨: è¿™ä¸ªæ˜¯éå¸¸é‡è¦çš„è§„åˆ™ã€‚ è¿™ä¸ªç”¨æ¥æŒ‡å®šResponse-Requestéµå¾ªçš„ç¼“å­˜æœºåˆ¶ã€‚å„ä¸ªæŒ‡ä»¤å«ä¹‰å¦‚ä¸‹</p>\n<p>Cache-Control:Public   å¯ä»¥è¢«ä»»ä½•ç¼“å­˜æ‰€ç¼“å­˜</p>\n<p>Cache-Control:Private     å†…å®¹åªç¼“å­˜åˆ°ç§æœ‰ç¼“å­˜ä¸­</p>\n<p>Cache-Control:no-cache  æ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜</p>\n<p><strong>Accept</strong></p>\n<p>ä½œç”¨ï¼š æµè§ˆå™¨ç«¯å¯ä»¥æ¥å—çš„åª’ä½“ç±»å‹,</p>\n<p>ä¾‹å¦‚ï¼š  Accept: text/html  ä»£è¡¨æµè§ˆå™¨å¯ä»¥æ¥å—æœåŠ¡å™¨å›å‘çš„ç±»å‹ä¸º text/html  ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„htmlæ–‡æ¡£,</p>\n<p>å¦‚æœæœåŠ¡å™¨æ— æ³•è¿”å›text/htmlç±»å‹çš„æ•°æ®,æœåŠ¡å™¨åº”è¯¥è¿”å›ä¸€ä¸ª406é”™è¯¯(non acceptable)</p>\n<p>é€šé…ç¬¦ * ä»£è¡¨ä»»æ„ç±»å‹</p>\n<p>ä¾‹å¦‚  Accept: <em>/</em>  ä»£è¡¨æµè§ˆå™¨å¯ä»¥å¤„ç†æ‰€æœ‰ç±»å‹,(ä¸€èˆ¬æµè§ˆå™¨å‘ç»™æœåŠ¡å™¨éƒ½æ˜¯å‘è¿™ä¸ª)</p>\n<p><strong>Accept-Encoding</strong></p>\n<p>ä½œç”¨ï¼š æµè§ˆå™¨ç”³æ˜è‡ªå·±æ¥æ”¶çš„ç¼–ç æ–¹æ³•ï¼Œé€šå¸¸æŒ‡å®šå‹ç¼©æ–¹æ³•ï¼Œæ˜¯å¦æ”¯æŒå‹ç¼©ï¼Œæ”¯æŒä»€ä¹ˆå‹ç¼©æ–¹æ³•ï¼ˆgzipï¼Œdeflateï¼‰ï¼Œï¼ˆæ³¨æ„ï¼šè¿™ä¸æ˜¯åªå­—ç¬¦ç¼–ç ï¼‰;</p>\n<p>ä¾‹å¦‚ï¼š Accept-Encoding: gzip, deflate</p>\n<p><strong>Accept-Language</strong></p>\n<p>ä½œç”¨ï¼š æµè§ˆå™¨ç”³æ˜è‡ªå·±æ¥æ”¶çš„è¯­è¨€ã€‚ </p>\n<p>è¯­è¨€è·Ÿå­—ç¬¦é›†çš„åŒºåˆ«ï¼šä¸­æ–‡æ˜¯è¯­è¨€ï¼Œä¸­æ–‡æœ‰å¤šç§å­—ç¬¦é›†ï¼Œæ¯”å¦‚big5ï¼Œgb2312ï¼Œgbkç­‰ç­‰ï¼›</p>\n<p>ä¾‹å¦‚ï¼š Accept-Language: en-us</p>\n<p><strong>User-Agent</strong></p>\n<p>ä½œç”¨ï¼šå‘Šè¯‰HTTPæœåŠ¡å™¨ï¼Œ å®¢æˆ·ç«¯ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨çš„åç§°å’Œç‰ˆæœ¬.</p>\n<p>æˆ‘ä»¬ä¸Šç½‘ç™»é™†è®ºå›çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šçœ‹åˆ°ä¸€äº›æ¬¢è¿ä¿¡æ¯ï¼Œå…¶ä¸­åˆ—å‡ºäº†ä½ çš„æ“ä½œç³»ç»Ÿçš„åç§°å’Œç‰ˆæœ¬ï¼Œä½ æ‰€ä½¿ç”¨çš„æµè§ˆå™¨çš„åç§°å’Œç‰ˆæœ¬ï¼Œè¿™å¾€å¾€è®©å¾ˆå¤šäººæ„Ÿåˆ°å¾ˆç¥å¥‡ï¼Œå®é™…ä¸Šï¼ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºå°±æ˜¯ä»User-Agentè¿™ä¸ªè¯·æ±‚æŠ¥å¤´åŸŸä¸­è·å–åˆ°è¿™äº›ä¿¡æ¯User-Agentè¯·æ±‚æŠ¥å¤´åŸŸå…è®¸å®¢æˆ·ç«¯å°†å®ƒçš„æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨å’Œå…¶å®ƒå±æ€§å‘Šè¯‰æœåŠ¡å™¨ã€‚</p>\n<p>ä¾‹å¦‚ï¼š User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; CIBA; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; InfoPath.2; .NET4.0E)</p>\n<p><strong>Accept-Charset</strong></p>\n<p>ä½œç”¨ï¼šæµè§ˆå™¨ç”³æ˜è‡ªå·±æ¥æ”¶çš„å­—ç¬¦é›†ï¼Œè¿™å°±æ˜¯æœ¬æ–‡å‰é¢ä»‹ç»çš„å„ç§å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç ï¼Œå¦‚gb2312ï¼Œutf-8ï¼ˆé€šå¸¸æˆ‘ä»¬è¯´CharsetåŒ…æ‹¬äº†ç›¸åº”çš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆï¼‰ï¼›</p>\n<p><strong>Cookie</strong></p>\n<p>ä½œç”¨ï¼š æœ€é‡è¦çš„header, å°†cookieçš„å€¼å‘é€ç»™HTTP æœåŠ¡å™¨</p>\n<p><strong>Content-Length</strong></p>\n<p>ä½œç”¨ï¼šå‘é€ç»™HTTPæœåŠ¡å™¨æ•°æ®çš„é•¿åº¦ã€‚</p>\n<p>ä¾‹å¦‚ï¼š Content-Length: 38</p>\n<p><strong>Referer</strong></p>\n<p>ä½œç”¨ï¼š æä¾›äº†Requestçš„ä¸Šä¸‹æ–‡ä¿¡æ¯çš„æœåŠ¡å™¨ï¼Œå‘Šè¯‰æœåŠ¡å™¨æˆ‘æ˜¯ä»å“ªä¸ªé“¾æ¥è¿‡æ¥çš„ï¼Œæ¯”å¦‚ä»æˆ‘ä¸»é¡µä¸Šé“¾æ¥åˆ°ä¸€ä¸ªæœ‹å‹é‚£é‡Œï¼Œä»–çš„æœåŠ¡å™¨å°±èƒ½å¤Ÿä»HTTP Refererä¸­ç»Ÿè®¡å‡ºæ¯å¤©æœ‰å¤šå°‘ç”¨æˆ·ç‚¹å‡»æˆ‘ä¸»é¡µä¸Šçš„é“¾æ¥è®¿é—®ä»–çš„ç½‘ç«™ã€‚</p>\n<p>ä¾‹å¦‚: Referer:<a href=\"http://translate.google.cn/?hl=zh-cn&amp;tab=wT\" target=\"_blank\" rel=\"external\">http://translate.google.cn/?hl=zh-cn&amp;tab=wT</a></p>\n<p><strong>Connection</strong></p>\n<p>ä¾‹å¦‚ï¼šã€€Connection: keep-alive   å½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“HTTPæ•°æ®çš„TCPè¿æ¥ä¸ä¼šå…³é—­ï¼Œå¦‚æœå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿æ¥</p>\n<p>ä¾‹å¦‚ï¼š  Connection: close  ä»£è¡¨ä¸€ä¸ªRequestå®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“HTTPæ•°æ®çš„TCPè¿æ¥ä¼šå…³é—­ï¼Œ å½“å®¢æˆ·ç«¯å†æ¬¡å‘é€Requestï¼Œéœ€è¦é‡æ–°å»ºç«‹TCPè¿æ¥ã€‚</p>\n<p><strong>Host</strong></p>\n<p>ä½œç”¨: è¯·æ±‚æŠ¥å¤´åŸŸä¸»è¦ç”¨äºæŒ‡å®šè¢«è¯·æ±‚èµ„æºçš„Internetä¸»æœºå’Œç«¯å£å·ï¼Œå®ƒé€šå¸¸ä»HTTP URLä¸­æå–å‡ºæ¥çš„</p>\n<p>ä¾‹å¦‚: æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<a href=\"http://www.guet.edu.cn/index.html\" target=\"_blank\" rel=\"external\">http://www.guet.edu.cn/index.html</a></p>\n<p>æµè§ˆå™¨å‘é€çš„è¯·æ±‚æ¶ˆæ¯ä¸­ï¼Œå°±ä¼šåŒ…å«Hostè¯·æ±‚æŠ¥å¤´åŸŸï¼Œå¦‚ä¸‹ï¼š</p>\n<p>Hostï¼š<a href=\"http://www.guet.edu.cn\" target=\"_blank\" rel=\"external\">http://www.guet.edu.cn</a></p>\n<p>æ­¤å¤„ä½¿ç”¨ç¼ºçœç«¯å£å·80ï¼Œè‹¥æŒ‡å®šäº†ç«¯å£å·ï¼Œåˆ™å˜æˆï¼šHostï¼šæŒ‡å®šç«¯å£å·</p>\n<h2 id=\"HTTP-Response-header\"><a href=\"#HTTP-Response-header\" class=\"headerlink\" title=\"HTTP Response header\"></a>HTTP Response header</h2><p><strong>Date</strong></p>\n<p>ä½œç”¨:  ç”Ÿæˆæ¶ˆæ¯çš„å…·ä½“æ—¶é—´å’Œæ—¥æœŸ</p>\n<p>ä¾‹å¦‚ï¼šã€€Date: Sat, 11 Feb 2012 11:35:14 GMT </p>\n<p><strong>Expires</strong></p>\n<p>ä½œç”¨: æµè§ˆå™¨ä¼šåœ¨æŒ‡å®šè¿‡æœŸæ—¶é—´å†…ä½¿ç”¨æœ¬åœ°ç¼“å­˜</p>\n<p><strong>P3P</strong></p>\n<p>ä½œç”¨: ç”¨äºè·¨åŸŸè®¾ç½®Cookie, è¿™æ ·å¯ä»¥è§£å†³iframeè·¨åŸŸè®¿é—®cookieçš„é—®é¢˜</p>\n<p><strong>Set-Cookie</strong></p>\n<p>ä½œç”¨ï¼š éå¸¸é‡è¦çš„header, ç”¨äºæŠŠcookie å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œ æ¯ä¸€ä¸ªå†™å…¥cookieéƒ½ä¼šç”Ÿæˆä¸€ä¸ªSet-Cookie.</p>\n<p>ä¾‹å¦‚: Set-Cookie: sc=4c31523a; path=/; domain=.acookie.taobao.com</p>\n<p><strong>ETag</strong></p>\n<p>ä½œç”¨:  å’ŒIf-None-Match é…åˆä½¿ç”¨ã€‚ ï¼ˆå®ä¾‹è¯·çœ‹ä¸ŠèŠ‚ä¸­If-None-Matchçš„å®ä¾‹ï¼‰</p>\n<p>ä¾‹å¦‚: ETag: â€œ03f2b33c0bfcc1:0â€</p>\n<p><strong>Last-Modified</strong></p>\n<p>ä½œç”¨ï¼š ç”¨äºæŒ‡ç¤ºèµ„æºçš„æœ€åä¿®æ”¹æ—¥æœŸå’Œæ—¶é—´ã€‚ï¼ˆå®ä¾‹è¯·çœ‹ä¸ŠèŠ‚çš„If-Modified-Sinceçš„å®ä¾‹ï¼‰</p>\n<p>ä¾‹å¦‚: Last-Modified: Wed, 21 Dec 2011 09:09:10 GMT</p>\n<p><strong>Content-Type</strong></p>\n<p>ä½œç”¨ï¼šWEBæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨è‡ªå·±å“åº”çš„å¯¹è±¡çš„ç±»å‹å’Œå­—ç¬¦é›†ã€‚</p>\n<p>ä¾‹å¦‚:</p>\n<p>Content-Type: text/html; charset=utf-8</p>\n<p>Content-Type:text/html;charset=GB2312</p>\n<p>Content-Type: image/jpeg</p>\n<p><strong>Content-Length</strong></p>\n<p>æŒ‡æ˜å®ä½“æ­£æ–‡çš„é•¿åº¦ï¼Œä»¥å­—èŠ‚æ–¹å¼å­˜å‚¨çš„åè¿›åˆ¶æ•°å­—æ¥è¡¨ç¤ºã€‚åœ¨æ•°æ®ä¸‹è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒContent-Lengthçš„æ–¹å¼è¦é¢„å…ˆåœ¨æœåŠ¡å™¨ä¸­ç¼“å­˜æ‰€æœ‰æ•°æ®ï¼Œç„¶åæ‰€æœ‰æ•°æ®å†ä¸€è‚¡è„‘å„¿åœ°å‘ç»™å®¢æˆ·ç«¯ã€‚</p>\n<p>ä¾‹å¦‚: Content-Length: 19847</p>\n<p><strong>Content-Encoding</strong></p>\n<p>WEBæœåŠ¡å™¨è¡¨æ˜è‡ªå·±ä½¿ç”¨äº†ä»€ä¹ˆå‹ç¼©æ–¹æ³•ï¼ˆgzipï¼Œdeflateï¼‰å‹ç¼©å“åº”ä¸­çš„å¯¹è±¡ã€‚</p>\n<p>ä¾‹å¦‚ï¼šContent-Encodingï¼šgzip</p>\n<p><strong>Content-Language</strong></p>\n<p>ä½œç”¨ï¼š WEBæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨è‡ªå·±å“åº”çš„å¯¹è±¡çš„è¯­è¨€è€…</p>\n<p>ä¾‹å¦‚ï¼š Content-Language:data</p>\n<p><strong>Server</strong></p>\n<p>ä½œç”¨ï¼šæŒ‡æ˜HTTPæœåŠ¡å™¨çš„è½¯ä»¶ä¿¡æ¯</p>\n<p>ä¾‹å¦‚:Server: Microsoft-IIS/7.5</p>\n<p><strong>X-AspNet-Version</strong></p>\n<p>ä½œç”¨ï¼šå¦‚æœç½‘ç«™æ˜¯ç”¨ASP.NETå¼€å‘çš„ï¼Œè¿™ä¸ªheaderç”¨æ¥è¡¨ç¤ºASP.NETçš„ç‰ˆæœ¬</p>\n<p>ä¾‹å¦‚: X-AspNet-Version: 4.0.30319</p>\n<p><strong>X-Powered-By</strong></p>\n<p>ä½œç”¨ï¼šè¡¨ç¤ºç½‘ç«™æ˜¯ç”¨ä»€ä¹ˆæŠ€æœ¯å¼€å‘çš„</p>\n<p>ä¾‹å¦‚ï¼š X-Powered-By: ASP.NET</p>\n<p><strong>Connection</strong></p>\n<p>ä¾‹å¦‚ï¼šã€€Connection: keep-alive   å½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“HTTPæ•°æ®çš„TCPè¿æ¥ä¸ä¼šå…³é—­ï¼Œå¦‚æœå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿æ¥</p>\n<p>ä¾‹å¦‚ï¼š  Connection: close  ä»£è¡¨ä¸€ä¸ªRequestå®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“HTTPæ•°æ®çš„TCPè¿æ¥ä¼šå…³é—­ï¼Œ å½“å®¢æˆ·ç«¯å†æ¬¡å‘é€Requestï¼Œéœ€è¦é‡æ–°å»ºç«‹TCPè¿æ¥ã€‚</p>\n<p><strong>Location</strong></p>\n<p>ä½œç”¨ï¼š ç”¨äºé‡å®šå‘ä¸€ä¸ªæ–°çš„ä½ç½®, åŒ…å«æ–°çš„URLåœ°å€</p>\n<p> å®ä¾‹è¯·çœ‹304çŠ¶æ€å®ä¾‹</p>\n<h3 id=\"HTTPåè®®æ˜¯æ— çŠ¶æ€çš„å’ŒConnection-keep-aliveçš„åŒºåˆ«\"><a href=\"#HTTPåè®®æ˜¯æ— çŠ¶æ€çš„å’ŒConnection-keep-aliveçš„åŒºåˆ«\" class=\"headerlink\" title=\"HTTPåè®®æ˜¯æ— çŠ¶æ€çš„å’ŒConnection: keep-aliveçš„åŒºåˆ«\"></a>HTTPåè®®æ˜¯æ— çŠ¶æ€çš„å’ŒConnection: keep-aliveçš„åŒºåˆ«</h3><p>æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼ŒæœåŠ¡å™¨ä¸çŸ¥é“å®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚ä»å¦ä¸€æ–¹é¢è®²ï¼Œæ‰“å¼€ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µå’Œä½ ä¹‹å‰æ‰“å¼€è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»</p>\n<p>HTTPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„é¢å‘è¿æ¥çš„åè®®ï¼Œæ— çŠ¶æ€ä¸ä»£è¡¨HTTPä¸èƒ½ä¿æŒTCPè¿æ¥ï¼Œæ›´ä¸èƒ½ä»£è¡¨HTTPä½¿ç”¨çš„æ˜¯UDPåè®®ï¼ˆæ— è¿æ¥ï¼‰</p>\n<p>ä»HTTP/1.1èµ·ï¼Œé»˜è®¤éƒ½å¼€å¯äº†Keep-Aliveï¼Œä¿æŒè¿æ¥ç‰¹æ€§ï¼Œç®€å•åœ°è¯´ï¼Œå½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“HTTPæ•°æ®çš„TCPè¿æ¥ä¸ä¼šå…³é—­ï¼Œå¦‚æœå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿æ¥</p>\n<p> Keep-Aliveä¸ä¼šæ°¸ä¹…ä¿æŒè¿æ¥ï¼Œå®ƒæœ‰ä¸€ä¸ªä¿æŒæ—¶é—´ï¼Œå¯ä»¥åœ¨ä¸åŒçš„æœåŠ¡å™¨è½¯ä»¶ï¼ˆå¦‚Apacheï¼‰ä¸­è®¾å®šè¿™ä¸ªæ—¶é—´</p>\n<blockquote>\n<p>åŸåšåœ°å€ï¼š<a href=\"http://www.cnblogs.com/TankXiao/archive/2012/02/13/2342672.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/TankXiao/archive/2012/02/13/2342672.html</a></p>\n</blockquote>\n"},{"title":"jsçš„åƒåœ¾å›æ”¶æœºåˆ¶","url":"http://www.maotingfeng.me/2016/09/11/jsçš„åƒåœ¾å›æ”¶æœºåˆ¶/","content":"<h2 id=\"jsçš„åƒåœ¾å›æ”¶æœºåˆ¶-Garbage-Collecation\"><a href=\"#jsçš„åƒåœ¾å›æ”¶æœºåˆ¶-Garbage-Collecation\" class=\"headerlink\" title=\"jsçš„åƒåœ¾å›æ”¶æœºåˆ¶(Garbage Collecation)\"></a>jsçš„åƒåœ¾å›æ”¶æœºåˆ¶(Garbage Collecation)</h2><p>å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼šå±€éƒ¨å˜é‡åªåœ¨å‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å­˜åœ¨ã€‚è€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šä¸ºå±€éƒ¨å˜é‡åœ¨æ ˆï¼ˆæˆ–å †ï¼‰å†…å­˜ä¸Šåˆ†é…ç›¸åº”çš„ç©ºé—´ï¼Œä»¥ä¾¿å­˜å‚¨å®ƒä»¬çš„å€¼ã€‚ç„¶ååœ¨å‡½æ•°ä¸­ä½¿ç”¨è¿™äº›å˜é‡ï¼Œç›´è‡³å‡½æ•°æ‰§è¡Œç»“æŸã€‚æ­¤æ—¶ï¼Œå±€éƒ¨å˜é‡å°±æ²¡æœ‰å­˜åœ¨çš„å¿…è¦äº†ï¼Œå› æ­¤å¯ä»¥é‡Šæ”¾å®ƒä»¬çš„å†…å­˜ä»¥ä¾›å°†æ¥ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆå®¹æ˜“åˆ¤æ–­å˜é‡æ˜¯å¦è¿˜æœ‰å­˜åœ¨çš„å¿…è¦ï¼›ä½†å¹¶éæ‰€æœ‰æƒ…å†µä¸‹éƒ½è¿™ä¹ˆå®¹æ˜“å°±èƒ½å¾—å‡ºç»“è®ºã€‚åƒåœ¾å›æ”¶å™¨å¿…é¡»è·Ÿè¸ªå“ªä¸ªå˜é‡æœ‰ç”¨ï¼Œå“ªä¸ªå˜é‡æ²¡ç”¨ï¼Œå¯¹äºä¸å†æœ‰ç”¨çš„å˜é‡æ‰“ä¸Šæ ‡è®°ï¼Œä»¥å¤‡å°†æ¥æ”¶å›å…¶å ç”¨çš„å†…å­˜ã€‚ç”¨äºæ ‡è¯†æ— ç”¨å˜é‡çš„ç­–ç•¥å¯èƒ½ä¼šå› å®ç°è€Œå¼‚ï¼Œä½†å…·ä½“åˆ°æµè§ˆå™¨ä¸­çš„å®ç°ï¼Œåˆ™é€šå¸¸æœ‰ä¸¤ä¸ªç­–ç•¥ã€‚</p>\n<ol>\n<li>æ ‡è®°æ¸…é™¤</li>\n</ol>\n<p>jsä¸­æœ€å¸¸ç”¨çš„åƒåœ¾å›æ”¶æ–¹å¼å°±æ˜¯æ ‡è®°æ¸…é™¤ã€‚å½“å˜é‡è¿›å…¥ç¯å¢ƒæ—¶ï¼Œä¾‹å¦‚ï¼Œåœ¨å‡½æ•°ä¸­å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå°±å°†è¿™ä¸ªå˜é‡æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ã€‚ä»é€»è¾‘ä¸Šè®²ï¼Œæ°¸è¿œä¸èƒ½é‡Šæ”¾è¿›å…¥ç¯å¢ƒçš„å˜é‡æ‰€å ç”¨çš„å†…å­˜ï¼Œå› ä¸ºåªè¦æ‰§è¡Œæµè¿›å…¥ç›¸åº”çš„ç¯å¢ƒï¼Œå°±å¯èƒ½ä¼šç”¨åˆ°å®ƒä»¬ã€‚è€Œå½“å˜é‡ç¦»å¼€ç¯å¢ƒæ—¶ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ã€‚åƒåœ¾å›æ”¶å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ï¼ˆå½“ç„¶ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•æ ‡è®°æ–¹å¼ï¼‰ã€‚ç„¶åï¼Œå®ƒä¼šå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ï¼ˆ<strong>é—­åŒ…</strong>ï¼‰ã€‚è€Œåœ¨æ­¤ä¹‹åå†è¢«åŠ ä¸Šæ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ï¼ŒåŸå› æ˜¯ç¯å¢ƒä¸­çš„å˜é‡å·²ç»æ— æ³•è®¿é—®åˆ°è¿™äº›å˜é‡äº†ã€‚æœ€åï¼Œåƒåœ¾å›æ”¶å™¨å®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œï¼Œé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p>\n<p>åˆ°2008å¹´ä¸ºæ­¢ï¼ŒIEã€Firefoxã€Operaã€Chromeã€Safariçš„jså®ç°ä½¿ç”¨çš„éƒ½æ˜¯æ ‡è®°æ¸…é™¤çš„åƒåœ¾å›æ”¶ç­–ç•¥æˆ–ç±»ä¼¼çš„ç­–ç•¥ï¼Œåªä¸è¿‡åƒåœ¾æ”¶é›†çš„æ—¶é—´é—´éš”äº’ä¸ç›¸åŒã€‚</p>\n<ol>\n<li>å¼•ç”¨è®¡æ•°</li>\n</ol>\n<p>å¼•ç”¨è®¡æ•°çš„å«ä¹‰æ˜¯è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚å½“å£°æ˜äº†ä¸€ä¸ªå˜é‡å¹¶å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹å€¼èµ‹ç»™è¯¥å˜é‡æ—¶ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å°±æ˜¯1ã€‚å¦‚æœåŒä¸€ä¸ªå€¼åˆè¢«èµ‹ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œåˆ™è¯¥å€¼çš„å¼•ç”¨æ¬¡æ•°åŠ 1ã€‚ç›¸åï¼Œå¦‚æœåŒ…å«å¯¹è¿™ä¸ªå€¼å¼•ç”¨çš„å˜é‡åˆå–å¾—äº†å¦å¤–ä¸€ä¸ªå€¼ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å‡1ã€‚å½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å˜æˆ0æ—¶ï¼Œåˆ™è¯´æ˜æ²¡æœ‰åŠæ³•å†è®¿é—®è¿™ä¸ªå€¼äº†ï¼Œå› è€Œå°±å¯ä»¥å°†å…¶å ç”¨çš„å†…å­˜ç©ºé—´å›æ”¶å›æ¥ã€‚è¿™æ ·ï¼Œå½“åƒåœ¾å›æ”¶å™¨ä¸‹æ¬¡å†è¿è¡Œæ—¶ï¼Œå®ƒå°±ä¼šé‡Šæ”¾é‚£äº›å¼•ç”¨æ¬¡æ•°ä¸º0çš„å€¼æ‰€å ç”¨çš„å†…å­˜ã€‚</p>\n<p>Netscape Navigator3æ˜¯æœ€æ—©ä½¿ç”¨å¼•ç”¨è®¡æ•°ç­–ç•¥çš„æµè§ˆå™¨ï¼Œä½†å¾ˆå¿«å®ƒå°±é‡åˆ°ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼šå¾ªç¯å¼•ç”¨ã€‚å¾ªç¯å¼•ç”¨æŒ‡çš„æ˜¯å¯¹è±¡Aä¸­åŒ…å«ä¸€ä¸ªæŒ‡å‘å¯¹è±¡Bçš„æŒ‡é’ˆï¼Œè€Œå¯¹è±¡Bä¸­ä¹ŸåŒ…å«ä¸€ä¸ªæŒ‡å‘å¯¹è±¡Açš„å¼•ç”¨ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> a = &#123;&#125;;</div><div class=\"line\">  <span class=\"keyword\">var</span> b = &#123;&#125;;</div><div class=\"line\">  a.pro = b;</div><div class=\"line\">  b.pro = a;</div><div class=\"line\">&#125;</div><div class=\"line\">fn();</div></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä»£ç aå’Œbçš„å¼•ç”¨æ¬¡æ•°éƒ½æ˜¯2ï¼Œfn()æ‰§è¡Œå®Œæ¯•åï¼Œä¸¤ä¸ªå¯¹è±¡éƒ½å·²ç»ç¦»å¼€ç¯å¢ƒï¼Œåœ¨æ ‡è®°æ¸…é™¤æ–¹å¼ä¸‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨å¼•ç”¨è®¡æ•°ç­–ç•¥ä¸‹ï¼Œå› ä¸ºaå’Œbçš„å¼•ç”¨æ¬¡æ•°ä¸ä¸º0ï¼Œæ‰€ä»¥ä¸ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶å†…å­˜ï¼Œå¦‚æœfnå‡½æ•°è¢«å¤§é‡è°ƒç”¨ï¼Œå°±ä¼šé€ æˆ<strong>å†…å­˜æ³„éœ²</strong>ã€‚</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼ŒIEä¸­æœ‰ä¸€éƒ¨åˆ†å¯¹è±¡å¹¶ä¸æ˜¯åŸç”Ÿjså¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå…¶<strong>DOMå’ŒBOM</strong>ä¸­çš„å¯¹è±¡å°±æ˜¯ä½¿ç”¨C++ä»¥COMå¯¹è±¡çš„å½¢å¼å®ç°çš„ï¼Œè€ŒCOMå¯¹è±¡çš„åƒåœ¾å›æ”¶æœºåˆ¶é‡‡ç”¨çš„å°±æ˜¯å¼•ç”¨è®¡æ•°ç­–ç•¥ã€‚å› æ­¤ï¼Œå³ä½¿<strong>IEçš„jså¼•æ“é‡‡ç”¨æ ‡è®°æ¸…é™¤ç­–ç•¥</strong>æ¥å®ç°ï¼Œä½†jsè®¿é—®çš„<strong>COMå¯¹è±¡ä¾ç„¶æ˜¯åŸºäºå¼•ç”¨è®¡æ•°ç­–ç•¥</strong>çš„ã€‚æ¢å¥è¯è¯´ï¼Œåªè¦åœ¨IEä¸­æ¶‰åŠCOMå¯¹è±¡ï¼Œå°±ä¼šå­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> element = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"some_element\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> myObject = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</div><div class=\"line\">myObject.e = element;</div><div class=\"line\">element.o = myObject;</div></pre></td></tr></table></figure>\n<p>è¿™ä¸ªä¾‹å­åœ¨ä¸€ä¸ªDOMå…ƒç´ ï¼ˆelement)ä¸ä¸€ä¸ªåŸç”Ÿjså¯¹è±¡ï¼ˆmyObject)ä¹‹é—´åˆ›å»ºäº†å¾ªç¯å¼•ç”¨ã€‚å…¶ä¸­ï¼Œå˜é‡myObjectæœ‰ä¸€ä¸ªåä¸ºelementçš„å±æ€§æŒ‡å‘elementå¯¹è±¡ï¼›è€Œå˜é‡elementä¹Ÿæœ‰ä¸€ä¸ªå±æ€§åä¸ºoå›æŒ‡myObjectã€‚ç”±äºå­˜åœ¨è¿™ä¸ªå¾ªç¯å¼•ç”¨ï¼Œå³ä½¿ä¾‹å­ä¸­çš„DOMä»é¡µé¢ä¸­ç§»é™¤ï¼Œå®ƒä¹Ÿæ°¸è¿œä¸ä¼šè¢«å›æ”¶ã€‚</p>\n<p>ä¸ºäº†é¿å…ç±»ä¼¼è¿™æ ·çš„å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œæœ€å¥½æ˜¯åœ¨ä¸ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™æ‰‹å·¥æ–­å¼€åŸç”Ÿjså¯¹è±¡ä¸DOMå…ƒç´ ä¹‹é—´çš„è¿æ¥ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">myObject.element = <span class=\"literal\">null</span>;</div><div class=\"line\">element.o = <span class=\"literal\">null</span>;</div></pre></td></tr></table></figure>\n<p>å°†å˜é‡è®¾ç½®ä¸ºnullæ„å‘³ç€åˆ‡æ–­å˜é‡ä¸å®ƒæ­¤å‰å¼•ç”¨çš„å€¼ä¹‹é—´çš„è¿æ¥ã€‚å½“åƒåœ¾å›æ”¶å™¨ä¸‹æ¬¡è¿è¡Œæ—¶ï¼Œå°±ä¼šåˆ é™¤è¿™äº›å€¼å¹¶å›æ”¶å®ƒä»¬å ç”¨çš„å†…å­˜ã€‚</p>\n<blockquote>\n<p>åŸåšåœ°å€ï¼š<a href=\"http://www.cnblogs.com/dolphinX/p/3348468.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/dolphinX/p/3348468.html</a></p>\n</blockquote>\n"},{"title":"gulpé…ç½®","url":"http://www.maotingfeng.me/2016/08/28/gulpé…ç½®/","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div></pre></td><td class=\"code\"><pre><div class=\"line\">/**</div><div class=\"line\"> *</div><div class=\"line\"> * @authors supmain (mtingfeng@gmail.com)</div><div class=\"line\"> * @date    2016-08-28 11:54:05</div><div class=\"line\"> * @version $Id$</div><div class=\"line\"> */</div><div class=\"line\">var gulp = require(&apos;gulp&apos;);</div><div class=\"line\"></div><div class=\"line\">// å¼•å…¥ç»„ä»¶</div><div class=\"line\">var jshint = require(&apos;gulp-jshint&apos;);</div><div class=\"line\">var sass = require(&apos;gulp-sass&apos;);</div><div class=\"line\">var concat = require(&apos;gulp-concat&apos;);</div><div class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</div><div class=\"line\">var rename = require(&apos;gulp-rename&apos;);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">// æ£€æŸ¥è„šæœ¬</div><div class=\"line\">gulp.task(&apos;lint&apos;, function() &#123;</div><div class=\"line\">    gulp.src(&apos;./js/*.js&apos;)</div><div class=\"line\">        .pipe(jshint())</div><div class=\"line\">        .pipe(jshint.reporter(&apos;default&apos;));</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">// ç¼–è¯‘Sass</div><div class=\"line\">gulp.task(&apos;sass&apos;, function() &#123;</div><div class=\"line\">    gulp.src(&apos;./scss/*.scss&apos;)</div><div class=\"line\">        .pipe(sass())</div><div class=\"line\">        .pipe(gulp.dest(&apos;./css&apos;));</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">// åˆå¹¶ï¼Œå‹ç¼©æ–‡ä»¶</div><div class=\"line\">gulp.task(&apos;scripts&apos;, function() &#123;</div><div class=\"line\">    gulp.src(&apos;./js/*.js&apos;)</div><div class=\"line\">        .pipe(concat(&apos;all.js&apos;))</div><div class=\"line\">        .pipe(gulp.dest(&apos;./dist&apos;))</div><div class=\"line\">        .pipe(rename(&apos;all.min.js&apos;))</div><div class=\"line\">        .pipe(uglify())</div><div class=\"line\">        .pipe(gulp.dest(&apos;./dist&apos;));</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">// é»˜è®¤ä»»åŠ¡</div><div class=\"line\">gulp.task(&apos;default&apos;, function()&#123;</div><div class=\"line\">    gulp.run(&apos;lint&apos;, &apos;sass&apos;, &apos;scripts&apos;);</div><div class=\"line\"></div><div class=\"line\">    // ç›‘å¬æ–‡ä»¶å˜åŒ–</div><div class=\"line\">    gulp.watch(&apos;./js/*.js&apos;, function()&#123;</div><div class=\"line\">        gulp.run(&apos;lint&apos;, &apos;sass&apos;, &apos;scripts&apos;);</div><div class=\"line\">    &#125;);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>"},{"title":"grunté…ç½®","url":"http://www.maotingfeng.me/2016/08/28/grunté…ç½®/","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\">module.exports = function(grunt) &#123;</div><div class=\"line\"></div><div class=\"line\">    // Project configuration.</div><div class=\"line\">    grunt.initConfig(&#123;</div><div class=\"line\">        pkg: grunt.file.readJSON(&apos;package.json&apos;),</div><div class=\"line\">        cssmin: &#123;</div><div class=\"line\">            minify: &#123;</div><div class=\"line\">                expand: true,</div><div class=\"line\">                cwd: &apos;static/css/&apos;,</div><div class=\"line\">                src: [&apos;*.css&apos;, &apos;!*.min.css&apos;],</div><div class=\"line\">                dest: &apos;static_src/css/&apos;,</div><div class=\"line\">                ext: &apos;.min.css&apos;</div><div class=\"line\">            &#125;,</div><div class=\"line\">            combine: &#123;</div><div class=\"line\">                files: &#123;</div><div class=\"line\">                    &apos;css/out.min.css&apos;: [&apos;css/part1.min.css&apos;, &apos;css/part2.min.css&apos;]</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    grunt.loadNpmTasks(&apos;grunt-contrib-uglify&apos;);//å‹ç¼©ä»£ç </div><div class=\"line\">    grunt.loadNpmTasks(&apos;grunt-contrib-jshint&apos;);//æ£€æŸ¥è¯­æ³•é”™è¯¯</div><div class=\"line\">    grunt.loadNpmTasks(&apos;grunt-contrib-concat&apos;);//åˆå¹¶æ–‡ä»¶</div><div class=\"line\">    grunt.loadNpmTasks(&apos;grunt-contrib-watch&apos;);//è‡ªåŠ¨æ‰§è¡Œ</div><div class=\"line\">    grunt.loadNpmTasks(&apos;grunt-contrib-cssmin&apos;);//æœ€å°åŒ–css</div><div class=\"line\">    grunt.loadNpmTasks(&apos;grunt-contrib-requirejs&apos;);</div><div class=\"line\"></div><div class=\"line\">    grunt.registerTask(&apos;default&apos;, [&apos;jshint&apos;, &apos;concat&apos;, &apos;uglify&apos;]);</div><div class=\"line\">    grunt.registerTask(&apos;check&apos;, [&apos;jshint&apos;]);</div><div class=\"line\">    grunt.registerTask(&apos;default&apos;, [&apos;cssmin:minify&apos;,&apos;cssmin:combine&apos;]);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>"},{"title":"webpacké…ç½®","url":"http://www.maotingfeng.me/2016/08/28/webpacké…ç½®/","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div></pre></td><td class=\"code\"><pre><div class=\"line\">/**</div><div class=\"line\"> * Created by maotingfeng on 16/7/18.</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\">var webpack = require( &apos;webpack&apos; ) ,</div><div class=\"line\">    CommonsChunkPlugin = webpack.optimize.CommonsChunkPlugin ,</div><div class=\"line\">    path = require( &apos;path&apos; ) ,</div><div class=\"line\">    root = path.resolve( &apos;./public_src&apos; ) ,</div><div class=\"line\">    env = process.env.NODE_ENV ,</div><div class=\"line\">    plugins = null ,</div><div class=\"line\">    loaders = [] ,</div><div class=\"line\">    __public = &apos;public&apos; ,</div><div class=\"line\">    __public_src = &apos;public_src&apos;,</div><div class=\"line\">    __js = path.join( __dirname , __public  , &apos;js&apos; ) ,</div><div class=\"line\">    __js_src = path.join( __dirname , __public_src , &apos;js&apos; ) ,</div><div class=\"line\">    __css = path.join( __dirname , __public , &apos;css&apos; ) ;</div><div class=\"line\">// extract-text-webpack-plugin : æœ‰æ—¶å€™å¯èƒ½å¸Œæœ›é¡¹ç›®çš„æ ·å¼èƒ½ä¸è¦è¢«æ‰“åŒ…åˆ°è„šæœ¬ä¸­ï¼Œè€Œæ˜¯ç‹¬ç«‹å‡ºæ¥ä½œä¸º.cssï¼Œç„¶ååœ¨é¡µé¢ä¸­ä»¥&lt;link&gt;æ ‡ç­¾å¼•å…¥ã€‚è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦  æ¥å¸®å¿™ï¼š</div><div class=\"line\">//var htmlWebpackPlugin = require( &apos;html-webpack-plugin&apos; ) ;</div><div class=\"line\">var importES5Shim = &apos;imports?shim=&apos;+ path.resolve( __js , &apos;es5-shim/es5-shim.min&apos; ) + &apos;&amp;sham=&apos;+ path.resolve( __js , &apos;es5-shim/es5-sham&apos; ) ;</div><div class=\"line\"></div><div class=\"line\">var plugin_uglify = new webpack.optimize.UglifyJsPlugin( &#123;</div><div class=\"line\">                        mangle:&#123; except: [&apos;$&apos;,&apos;jQuery&apos;,&apos;exports&apos;,&apos;require&apos;,&apos;module&apos;] &#125; ,</div><div class=\"line\">                        compress: &#123;</div><div class=\"line\">                            warnings: false ,   // è­¦å‘Šä¿¡æ¯ä¸æ˜¾ç¤º</div><div class=\"line\">                        &#125; ,</div><div class=\"line\">                        sourceMap: true</div><div class=\"line\">                    &#125; ) ;</div><div class=\"line\"></div><div class=\"line\">/* ,</div><div class=\"line\"> new webpack.ProvidePlugin(&#123;</div><div class=\"line\">     $: &quot;jquery&quot;,</div><div class=\"line\">     jQuery: &quot;jquery&quot;,</div><div class=\"line\">     &quot;window.jQuery&quot;: &quot;jquery&quot;</div><div class=\"line\"> &#125;)</div><div class=\"line\">*/</div><div class=\"line\">var loader_scss = env == &apos;production&apos; ? importES5Shim + &apos;!style!css!autoprefixer?browsers=last 20 version!sass&apos; : &apos;style!css?modules&amp;importLoaders=2&amp;sourceMap&amp;localIdentName=[local]___[hash:base64:5]!autoprefixer?browsers=last 20 version!sass?outputStyle=expanded&amp;sourceMap&apos; ;</div><div class=\"line\">// åŠ è½½å™¨</div><div class=\"line\">loaders = [</div><div class=\"line\">            &#123;   test: /\\.scss$/ , loader: loader_scss &#125; ,</div><div class=\"line\">            &#123; test: /\\.css$/ , loader: importES5Shim + &apos;!style!css&apos; &#125; ,</div><div class=\"line\">            &#123; test: /\\.jade$/ , loader: &apos;jade&apos; &#125; ,</div><div class=\"line\">            &#123;</div><div class=\"line\">                test: /\\.(jpe?g|png|gif|svg)$/i ,</div><div class=\"line\">                publicPath: &apos;../images/&apos; ,</div><div class=\"line\">                loaders: [</div><div class=\"line\">                    &apos;file?hash=sha512&amp;digest=hex&amp;name=[hash].[ext]&apos;</div><div class=\"line\">                ]</div><div class=\"line\">            &#125;</div><div class=\"line\">        ] ;</div><div class=\"line\">// æ’ä»¶</div><div class=\"line\">plugins = [</div><div class=\"line\">    // æå–å…¬å…±éƒ¨åˆ†</div><div class=\"line\">    // new CommonsChunkPlugin( &apos;hr_common.min.js&apos; , [ &apos;hr_index&apos; , &apos;hr_jobs&apos; , &apos;hr_resume_upload&apos; , &apos;hr_resume_edit&apos; , &apos;hr_my_resume&apos; , &apos;hr_my_account&apos; , &apos;hr_my_account_edit&apos; , &apos;hr_my_wallet&apos; , &apos;hr_resumes&apos; , &apos;hr_register_account&apos; , &apos;hr_register_info&apos; , &apos;hr_job_detail&apos; , &apos;hr_findpwd&apos; ] )</div><div class=\"line\">]</div><div class=\"line\">if( env == &apos;production&apos; )&#123;</div><div class=\"line\">    plugins.push( plugin_uglify ) ;</div><div class=\"line\">&#125;else&#123;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">module.exports = &#123;</div><div class=\"line\">    entry: &#123;</div><div class=\"line\">        &apos;index&apos; : path.resolve( __js_src , &apos;index.js&apos; ) ,</div><div class=\"line\">        // ä¸ªäºº hr</div><div class=\"line\">        &apos;hr_index&apos; : path.resolve( __js_src , &apos;hr_index.js&apos; ) ,</div><div class=\"line\">        &apos;hr_jobs&apos; : path.resolve( __js_src , &apos;hr_jobs.js&apos; ) ,</div><div class=\"line\">        &apos;hr_resume_upload&apos; : path.resolve( __js_src , &apos;hr_resume_upload.js&apos; ) ,</div><div class=\"line\">        &apos;hr_resume_edit&apos; : path.resolve( __js_src , &apos;hr_resume_edit.js&apos; ) ,</div><div class=\"line\">        &apos;hr_my_resume&apos; : path.resolve( __js_src , &apos;hr_my_resume.js&apos; ) ,</div><div class=\"line\">        &apos;hr_my_account&apos; : path.resolve( __js_src , &apos;hr_my_account.js&apos; ) ,</div><div class=\"line\">        &apos;hr_my_account_edit&apos; : path.resolve( __js_src , &apos;hr_my_account_edit.js&apos; ) ,</div><div class=\"line\">        &apos;hr_my_wallet&apos;: path.resolve( __js_src , &apos;hr_my_wallet.js&apos; ) ,</div><div class=\"line\">        &apos;hr_resumes&apos;: path.resolve( __js_src , &apos;hr_resumes.js&apos; ) ,</div><div class=\"line\">        &apos;hr_register_account&apos;: path.resolve( __js_src , &apos;hr_register_account.js&apos; ) ,</div><div class=\"line\">        &apos;hr_register_info&apos;: path.resolve( __js_src , &apos;hr_register_info.js&apos; ) ,</div><div class=\"line\">        &apos;hr_job_detail&apos;: path.resolve( __js_src , &apos;hr_job_detail.js&apos; ) ,</div><div class=\"line\">        &apos;hr_findpwd&apos;: path.resolve( __js_src , &apos;hr_findpwd.js&apos; ) ,</div><div class=\"line\">        // ä¼ä¸š company</div><div class=\"line\">        &apos;company_work&apos;: path.resolve( __js_src , &apos;company_work.js&apos; ),</div><div class=\"line\">        &apos;company_wallet&apos;: path.resolve( __js_src , &apos;company_wallet.js&apos;),</div><div class=\"line\">        &apos;company_resumes&apos;: path.resolve( __js_src , &apos;company_resumes.js&apos;),</div><div class=\"line\">        &apos;company_report_form&apos;: path.resolve( __js_src , &apos;company_report_form.js&apos;),</div><div class=\"line\">        &apos;company_register_corporate&apos;: path.resolve( __js_src , &apos;company_register_corporate.js&apos;),</div><div class=\"line\">        &apos;company_register_account&apos;: path.resolve( __js_src , &apos;company_register_account.js&apos; ),</div><div class=\"line\">        &apos;company_publish_post&apos;: path.resolve( __js_src , &apos;company_publish_post.js&apos;),</div><div class=\"line\">        &apos;company_position&apos;: path.resolve( __js_src, &apos;company_position.js&apos;),</div><div class=\"line\">        &apos;company_job_details&apos;: path.resolve( __js_src , &apos;company_job_details.js&apos;),</div><div class=\"line\">        &apos;company_findpwd&apos;: path.resolve( __js_src , &apos;company_findpwd.js&apos;),</div><div class=\"line\">        &apos;company_candidate&apos;: path.resolve( __js_src , &apos;company_candidate.js&apos;),</div><div class=\"line\">        &apos;company_account_set&apos;: path.resolve( __js_src , &apos;company_account_set.js&apos;),</div><div class=\"line\">        &apos;company_account_edit&apos;: path.resolve( __js_src , &apos;company_account_edit.js&apos;),</div><div class=\"line\">        &apos;company_apply_promise_service&apos;: path.resolve( __js_src , &apos;company_apply_promise_service.js&apos;),</div><div class=\"line\">        &apos;steward&apos;: path.resolve( __js_src , &apos;steward.js&apos;),</div><div class=\"line\">        // å…¬å…±éƒ¨åˆ†(hrã€company)</div><div class=\"line\">        &apos;common_resume_detail&apos;: path.resolve( __js_src , &apos;common_resume_detail.js&apos; ) ,</div><div class=\"line\">        &apos;common_login&apos;: path.resolve( __js_src , &apos;common_login.js&apos; ) ,</div><div class=\"line\">        &apos;common_msg&apos;: path.resolve( __js_src , &apos;common_msg.js&apos; )</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    output: &#123;</div><div class=\"line\">        path: &apos;./public/js&apos; ,</div><div class=\"line\">        publicPath: &apos;/js/&apos; ,</div><div class=\"line\">        filename: &apos;[name].min.js&apos;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    module: &#123;</div><div class=\"line\">        noParse: [ /moment\\.min\\.js/ ] ,</div><div class=\"line\">        loaders: loaders</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    plugins: plugins ,</div><div class=\"line\">    resolve: &#123;</div><div class=\"line\">       root: [ root ] ,</div><div class=\"line\">       alias: &#123;</div><div class=\"line\">           switchable: path.resolve( __js_src , &apos;lib/switchable.min.js&apos; ) ,</div><div class=\"line\">           dialog:  path.resolve( __js_src , &apos;lib/dialog&apos; ) ,</div><div class=\"line\">           hrjia_dialog: path.resolve( __js_src , &apos;lib/hrjia_dialog/hrjia_dialog.js&apos; ) ,</div><div class=\"line\">           jquerytmpl: path.resolve( __js_src , &apos;lib/jquery.tmpl.js&apos; ) ,</div><div class=\"line\">           validation: path.resolve( __js_src , &apos;lib/jquery-validation-1.14.0/dist/jquery.validate&apos; ) ,</div><div class=\"line\">           validation_zh: path.resolve( __js_src , &apos;lib/jquery-validation-1.14.0/dist/localization/messages_zh&apos; ) ,</div><div class=\"line\">           kitpage:  path.resolve( __js_src , &apos;lib/kitpage.js&apos; ) ,</div><div class=\"line\">           momentjs:  path.resolve( __js_src , &apos;lib/moment/min/moment.min.js&apos; ) ,</div><div class=\"line\">           easyaddress: path.resolve( __js_src , &apos;lib/easyaddress/jquery.easyaddress.js&apos; ) ,</div><div class=\"line\">           cookie: path.resolve( __js_src , &apos;lib/cookie.js&apos; ) ,</div><div class=\"line\">           md5 : path.resolve( __js_src , &apos;lib/jquery.md5.js&apos; ) ,</div><div class=\"line\">           mdate: path.resolve( __js_src , &apos;lib/mdate.js&apos; ) ,</div><div class=\"line\">           cropper: path.resolve( __js_src , &apos;lib/cropper-v2.3.0/cropper.js&apos; ) ,</div><div class=\"line\">           ajaxFileUpload: path.resolve( __js_src , &apos;lib/ajax_file_upload.js&apos; ) ,</div><div class=\"line\">           boardPopup: path.resolve( __js_src , &apos;lib/boardPopup.js&apos; ) ,</div><div class=\"line\">           upload_resume:  path.resolve( __js_src , &apos;upload_resume.js&apos; ) ,</div><div class=\"line\">           webuploader:  path.resolve( __js_src , &apos;lib/webuploader-0.1.5/webuploader.min&apos; ) ,</div><div class=\"line\">           percircle: path.resolve( __js_src , &apos;lib/percircle/percircle&apos; ) ,</div><div class=\"line\">           perfectScrollbar:  path.resolve( __js_src , &apos;lib/perfect-scrollbar/js/perfect-scrollbar.jquery&apos; ) ,</div><div class=\"line\">           checkReg: path.resolve( __js_src , &apos;lib/checkReg&apos; ) ,</div><div class=\"line\">           ymdate: path.resolve( __js_src , &apos;lib/ymdate&apos; ) ,</div><div class=\"line\">           browserCheck: path.resolve( __js_src , &apos;browserCheck&apos; ) ,</div><div class=\"line\">           global: path.resolve( __js_src , &apos;global.js&apos; ) ,</div><div class=\"line\">           hr_global: path.resolve( __js_src , &apos;hr_global.js&apos; ) ,</div><div class=\"line\">           company_global: path.resolve( __js_src , &apos;company_global.js&apos; ) ,</div><div class=\"line\">           common_upload_img:  path.resolve( __js_src , &apos;common_upload_img.js&apos; ),</div><div class=\"line\">           echarts: path.resolve( __js_src , &apos;lib/echarts.min.js&apos;)</div><div class=\"line\">       &#125;</div><div class=\"line\">    &#125; ,</div><div class=\"line\">    externals: &#123;</div><div class=\"line\">        &quot;$&quot;      : &quot;jQuery&quot; ,</div><div class=\"line\">        &quot;jQuery&quot; : &quot;jQuery&quot; ,</div><div class=\"line\">        &quot;jquery&quot; : &quot;jQuery&quot;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>"},{"title":"javascriptå¯¹è±¡è¯¦è§£","url":"http://www.maotingfeng.me/2016/08/27/javascriptå¯¹è±¡è¯¦è§£/","content":"<ul>\n<li><a href=\"#å¯¹è±¡çš„å®šä¹‰\">å¯¹è±¡çš„å®šä¹‰</a></li>\n<li><a href=\"#åˆ›å»ºå¯¹è±¡\">åˆ›å»ºå¯¹è±¡</a></li>\n<li><a href=\"#å±æ€§çš„æŸ¥è¯¢å’Œè®¾ç½®\">å±æ€§çš„æŸ¥è¯¢å’Œè®¾ç½®</a></li>\n<li><a href=\"#åˆ é™¤å±æ€§\">åˆ é™¤å±æ€§</a></li>\n<li><a href=\"#æ£€æµ‹å±æ€§\">æ£€æµ‹å±æ€§</a></li>\n<li><a href=\"#æšä¸¾å±æ€§\">æšä¸¾å±æ€§</a></li>\n<li><a href=\"#å±æ€§getterå’Œsetter\">å±æ€§getterå’Œsetter</a></li>\n<li><a href=\"#å±æ€§çš„ç‰¹æ€§\">å±æ€§çš„ç‰¹æ€§</a></li>\n<li><a href=\"#å¯¹è±¡çš„ä¸‰ä¸ªå±æ€§\">å¯¹è±¡çš„ä¸‰ä¸ªå±æ€§</a></li>\n<li><a href=\"#åºåˆ—åŒ–å¯¹è±¡\">åºåˆ—åŒ–å¯¹è±¡</a></li>\n<li><a href=\"#å¯¹è±¡çš„æ–¹æ³•\">å¯¹è±¡çš„æ–¹æ³•</a></li>\n</ul>\n<h3 id=\"å¯¹è±¡çš„å®šä¹‰\"><a href=\"#å¯¹è±¡çš„å®šä¹‰\" class=\"headerlink\" title=\"å¯¹è±¡çš„å®šä¹‰\"></a>å¯¹è±¡çš„å®šä¹‰</h3><p>å¯¹è±¡æ˜¯javascriptçš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯¹è±¡æ˜¯ä¸€ç§å¤åˆå€¼ï¼šå®ƒå°†å¾ˆå¤šå€¼ï¼ˆåŸå§‹å€¼æˆ–è€…å…¶ä»–å¯¹è±¡ï¼‰èšåˆåœ¨ä¸€èµ·ï¼Œå¯é€šè¿‡åå­—è®¿é—®è¿™äº›å€¼ã€‚å¯¹è±¡ä¹Ÿå¯çœ‹åšæ˜¯å±æ€§çš„æ— åºé›†åˆï¼Œæ¯ä¸ªå±æ€§éƒ½æ˜¯ä¸€ä¸ªå/å€¼å¯¹ã€‚è¿™ç§åŸºæœ¬æ•°æ®ç»“æ„æœ‰å¾ˆå¤šç§å«æ³•ï¼Œæ¯”å¦‚æ•£åˆ—ï¼ˆhashï¼‰ã€æ•£åˆ—è¡¨ï¼ˆhashtableï¼‰ã€å­—å…¸ï¼ˆdictionaryï¼‰ã€å…³è”æ•°ç»„ï¼ˆassociative arrayï¼‰ã€‚javascriptå¯¹è±¡çš„åŒºåˆ«äºå…¶å®ƒè¯­è¨€ä¸­ç±»ä¼¼å¯¹è±¡æ•°æ®ç»“æ„çš„æœ¬è´¨ç‰¹å¾æ˜¯ï¼šjavascriptå¯¹è±¡è¿˜å¯ä»¥ä»ä¸€ä¸ªæˆä¸ºåŸå‹çš„å¯¹è±¡ç»§æ‰¿å±æ€§ï¼Œå³â€œåŸå‹å¼ç»§æ‰¿â€(prototypal inheritance)ã€‚</p>\n<p>å¯¹è±¡æ‹¥æœ‰ä¸‰ä¸ªç›¸å…³çš„å¯¹è±¡ç‰¹æ€§ï¼ˆobject attributeï¼‰</p>\n<ul>\n<li>å¯¹è±¡çš„åŸå‹ï¼ˆprototypeï¼‰ï¼šåŸå‹å¯¹è±¡æŒ‡å‘å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œæœ¬å¯¹è±¡çš„å±æ€§ç»§æ‰¿è‡ªå®ƒçš„åŸå‹å¯¹è±¡</li>\n<li>å¯¹è±¡çš„ç±»â€ƒï¼ˆclassï¼‰:æ˜¯ä¸€ä¸ªæ ‡å¿—å¯¹è±¡ç±»å‹çš„å­—ç¬¦ä¸²</li>\n<li>å¯¹è±¡çš„æ‰©å±•æ ‡è®°ï¼ˆextensible flagï¼‰ï¼šæŒ‡æ˜äº†æ˜¯å¦å¯ä»¥å‘è¯¥å¯¹è±¡æ·»åŠ æ–°å±æ€§</li>\n</ul>\n<p>å¯¹è±¡çš„å±æ€§åŒ…å«åå­—å’Œå€¼ï¼Œå±æ€§åæ˜¯å¯ä»¥åŒ…å«ç©ºå­—ç¬¦ä¸²åœ¨é‚£çš„ä»»æ„å­—ç¬¦ä¸²ï¼Œä½†å¯¹è±¡ä¸­ä¸èƒ½å­˜åœ¨ä¸¤ä¸ªåŒåçš„å±æ€§åã€‚å±æ€§å€¼å¯ä»¥æ˜¯ä»»æ„javascriptå€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªgetteræˆ–setterå‡½æ•°ï¼ˆECMAScript 5ç‰¹æ€§ï¼‰</p>\n<p>å¯¹è±¡çš„å±æ€§è¿˜æœ‰ä¸€äº›ä¸ä¹‹ç›¸å…³çš„å€¼ï¼Œç§°ä¸ºâ€œå±æ€§ç‰¹æ€§â€ï¼ˆprototype attributeï¼‰</p>\n<ul>\n<li>å¯â€‚å†™â€‚æ€§ï¼ˆwtitable attributeï¼‰ï¼šè¡¨æ˜æ˜¯å¦å¯ä»¥è®¾ç½®è¯¥å±æ€§çš„å€¼</li>\n<li>å¯æšä¸¾æ€§ï¼ˆenumerable attributeï¼‰ï¼šè¡¨æ˜æ˜¯å¦å¯ä»¥é€šè¿‡for/inå¾ªç¯åæ‚”è¯¥å±æ€§</li>\n<li>å¯é…ç½®æ€§ï¼ˆconfigurable attributeï¼‰ï¼šè¡¨æ˜æ˜¯å¦å¯ä»¥åˆ é™¤æˆ–è€…ä¿®æ”¹è¯¥å±æ€§</li>\n</ul>\n<p>javascriptä¸­å¯¹è±¡æœ‰ä¸‰å¤§ç±»ï¼š</p>\n<ol>\n<li>å†…ç½®å¯¹è±¡ï¼ˆnative objectï¼‰ï¼šæ˜¯ç”±ECMAScriptè§„èŒƒå®šä¹‰çš„å¯¹è±¡æˆ–ç±»ï¼Œä¾‹å¦‚ï¼Œæ•°ç»„ï¼Œå‡½æ•°ï¼Œæ—¥æœŸï¼Œæ­£åˆ™è¡¨è¾¾å¼éƒ½æ˜¯å†…ç½®å¯¹è±¡</li>\n<li>å®¿ä¸»å¯¹è±¡ï¼ˆhost objectï¼‰ï¼šæ˜¯ç”±javascriptè§£é‡Šå™¨æ‰€åµŒå…¥çš„å®¿ä¸»ç¯å¢ƒï¼ˆæ¯”å¦‚webæµè§ˆå™¨ï¼‰å®šä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œè¡¨ç¤ºç½‘é¡µç»“æ„çš„HTMLElementå¯¹è±¡å‡æ˜¯å®¿ä¸»å¯¹è±¡ã€‚ç”±äºå®¿ä¸»ç¯å¢ƒå®šä¹‰çš„æ–¹æ³•å¯ä»¥å½“æˆæ™®é€šçš„javascriptå‡½æ•°å¯¹è±¡ï¼Œå®¿ä¸»å¯¹è±¡ä¹Ÿå¯ä»¥å½“æˆå†…ç½®å¯¹è±¡ã€‚</li>\n<li>è‡ªå®šä¹‰å¯¹è±¡ï¼ˆuser-defined objectï¼‰ï¼šæ˜¯æœ‰è¿è¡Œä¸­javascriptä»£ç åˆ›å»ºçš„å¯¹è±¡ï¼Œä¾‹å¦‚<code>var a = {} ;</code></li>\n</ol>\n<p>å¯¹è±¡çš„å±æ€§ä¹Ÿå¯åˆ†ä¸ºä¸¤ç±»ï¼š</p>\n<ol>\n<li>è‡ªæœ‰å±æ€§ï¼ˆown prototypeï¼‰ï¼šæ˜¯ç›´æ¥åœ¨å¯¹è±¡ä¸­å®šä¹‰çš„å±æ€§</li>\n<li>ç»§æ‰¿å±æ€§ï¼ˆinherited prototypeï¼‰ï¼šæ˜¯åœ¨å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸­å®šä¹‰çš„å±æ€§</li>\n</ol>\n<h3 id=\"åˆ›å»ºå¯¹è±¡\"><a href=\"#åˆ›å»ºå¯¹è±¡\" class=\"headerlink\" title=\"åˆ›å»ºå¯¹è±¡\"></a>åˆ›å»ºå¯¹è±¡</h3><p>åœ¨javascriptä¸­ï¼Œæœ‰ä¸‰ç§æ–¹å¼å¯ä»¥åˆ›å»ºå¯¹è±¡ï¼š</p>\n<ol>\n<li><p>å¯¹è±¡ç›´æ¥é‡</p>\n<blockquote>\n<ul>\n<li>å±æ€§åå¯ä»¥æ˜¯javascriptæ ‡å¿—ç¬¦ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç›´æ¥é‡ï¼ˆåŒ…æ‹¬ç©ºå­—ç¬¦ä¸²ï¼‰ä¾‹å¦‚ï¼š<code>var a = { b: 2 , &#39;&#39; : 3 } ;</code></li>\n</ul>\n<ul>\n<li>ä¿ç•™å­—ç”¨ä½œå±æ€§åï¼Œå¿…éœ€ç”¨å¼•å·(ECMAScript 5ä¸­å¯ä»¥ä¸ç”¨å¼•å·)ï¼Œä¾‹å¦‚ï¼š<code>var a = { &quot;for&quot; : 4 } ;</code></li>\n<li>å¯¹è±¡ç›´æ¥é‡ä¸­çš„æœ€åä¸€ä¸ªå±æ€§åçš„é€—å·åˆ†éš”ç¬¦å°†è¢«å¿½ç•¥ï¼ˆECMAScript 5ç‰¹æ€§ï¼‰,è€Œä¸”å¤§éƒ¨åˆ†ECMAScipt 3çš„å®ç°éƒ½æ”¯æŒå¿½ç•¥é€—å·ï¼Œä½†æ˜¯åœ¨è€ç‰ˆæœ¬IEä¸­ä¼šæŠ¥é”™( æˆ‘å°è±¡ä¸­è²Œä¼¼ie8ä»¥åŠä»¥ä¸‹ç‰ˆæœ¬ )ã€‚ä¾‹å¦‚ï¼š<code>var a = { b : 2 , } ;</code></li>\n</ul>\n</blockquote>\n</li>\n<li><p>ä½¿ç”¨å…³é”®å­—new</p>\n<blockquote>\n<ul>\n<li>newè¿ç®—ç¬¦åˆ›å»ºå¹¶åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡ã€‚å…³é”®å­—newåè·Ÿéšä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚è¿™é‡Œçš„å‡½æ•°è¢«ç§°ä¸ºæ„é€ å‡½æ•°ï¼ˆconstructorï¼‰ã€‚æ„é€ å‡½æ•°ç”¨ä»¥åˆå§‹åŒ–ä¸€ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š<code>var a = new Object() ;// åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå’Œ{}ä¸€æ ·</code></li>\n</ul>\n</blockquote>\n</li>\n<li><p>Object.create()ï¼ˆECMAScript 5ç‰¹æ€§ï¼‰</p>\n<blockquote>\n<ul>\n<li>ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œç”¨ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¿™ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œç¬¬äºŒä¸ªå¯é€‰å‚æ•°ï¼Œç”¨ä»¥å¯¹å¯¹è±¡çš„å±æ€§è¿›è¡Œè¿›ä¸€æ­¥æè¿°ã€‚<code>var o1 = Object.create( { x : 1 , y : 2 } ) ;// o1ç»§æ‰¿äº†å±æ€§xå’Œy</code></li>\n<li>ç¬¬ä¸€ä¸ªå‚æ•°è‹¥ä¸ºnullï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åŸå‹çš„æ–°å¯¹è±¡ï¼Œä¸ä¼šç»§æ‰¿ä»»ä½•ä¸œè¥¿ï¼ŒåŒ…æ‹¬åŸºç¡€æ–¹æ³•ï¼Œæ¯”å¦‚toString()ï¼Œæ‰€ä»¥å®ƒå°†ä¸èƒ½å’Œâ€œï¼‹â€è¿ç®—ç¬¦ä¸€èµ·æ­£å¸¸å·¥ä½œã€‚</li>\n<li>åˆ›å»ºæ™®é€šç©ºå¯¹è±¡ï¼Œ<code>var o3 = Object.create( Object.prototype ) ; // o3å’Œ{}å’Œnew Object() ä¸€æ ·</code></li>\n</ul>\n</blockquote>\n</li>\n</ol>\n<p>ä¸€äº›ç‰¹æ€§ï¼š</p>\n<ul>\n<li>æ‰€æœ‰é€šè¿‡å¯¹è±¡ç›´æ¥é‡åˆ›å»ºçš„å¯¹è±¡éƒ½å…·æœ‰åŒä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¯ç”¨Object.prototypeè·å¾—åŸå‹å¯¹è±¡çš„å¼•ç”¨</li>\n<li>é€šè¿‡å…³é”®å­—newåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹å°±æ˜¯æ„é€ å‡½æ•°çš„prototypeå±æ€§çš„å€¼,<code>var a = new Array() ;// açš„åŸå‹å¯¹è±¡å°±æ˜¯Array.prototype</code></li>\n<li>æ²¡æœ‰åŸå‹å¯¹è±¡çš„å¯¹è±¡ä¸ºæ•°ä¸å¤šï¼ŒObject.prototypeå°±æ²¡æœ‰åŸå‹å¯¹è±¡ï¼Œå®ƒä¸ç»§æ‰¿ä»»ä½•å±æ€§ã€‚å…¶å®ƒåŸå‹å¯¹è±¡éƒ½æ˜¯æ™®é€šå¯¹è±¡ï¼Œæ™®é€šå¯¹è±¡éƒ½å…·æœ‰åŸå‹ï¼›ï¼ˆnullï¼Œä¹Ÿæ˜¯æ²¡æœ‰åŸå‹å¯¹è±¡çš„å¯¹è±¡ï¼Œä¸ªäººç†è§£ï¼‰</li>\n<li>æ‰€æœ‰å†…ç½®æ„é€ å‡½æ•°ï¼ˆä»¥åŠå¤§éƒ¨åˆ†è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ï¼‰éƒ½å…·æœ‰ä¸€ä¸ªç»§æ‰¿è‡ªObject.prototypeçš„åŸå‹ï¼ˆå³ï¼Œæ‰€æœ‰å†…ç½®æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡éƒ½ç»§æ‰¿è‡ªObject.prototype ï¼‰ã€‚ä¾‹å¦‚ï¼šnew Date()åˆ›é€ çš„å¯¹è±¡åŒæ—¶ç»§æ‰¿Date.prototypeå’ŒObject.prototypeï¼Œè¿™ä¸€ç³»åˆ—çš„åŸå‹å¯¹è±¡å°±æ˜¯æ‰€è°“çš„â€œåŸå‹é“¾â€(prototype chain)</li>\n</ul>\n<p>ä¾‹6-1:é€šè¿‡åŸå‹ç»§æ‰¿åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">inherit</span>(<span class=\"params\"> p </span>)</span>&#123;\t\t<span class=\"comment\">// è¿”å›ä¸€ä¸ªç»§æ‰¿è‡ªåŸå‹å¯¹è±¡pçš„å±æ€§çš„æ–°å¯¹è±¡</span></div><div class=\"line\">\t<span class=\"keyword\">if</span>( p == <span class=\"literal\">null</span> ) <span class=\"keyword\">throw</span> <span class=\"built_in\">TypeError</span>() ;\t<span class=\"comment\">// pæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†ä¸èƒ½ä¸ºnullå’Œundefined</span></div><div class=\"line\">  \t<span class=\"keyword\">if</span>( <span class=\"built_in\">Object</span>.create ) <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.create( p ) ;\t<span class=\"comment\">// å¦‚æœcteate()æ–¹æ³•å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨å®ƒ</span></div><div class=\"line\">  \t<span class=\"keyword\">var</span> t = <span class=\"keyword\">typeof</span> p ;\t<span class=\"comment\">// å¦åˆ™è¿›ä¸€æ­¥æ£€æµ‹</span></div><div class=\"line\">  \t<span class=\"keyword\">if</span>( t !== <span class=\"string\">\"object\"</span> &amp;&amp; t !== <span class=\"string\">\"function\"</span> ) <span class=\"keyword\">throw</span> <span class=\"built_in\">TypeError</span>() ;\t<span class=\"comment\">// påªèƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°å¯¹è±¡</span></div><div class=\"line\">  \t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>)</span>&#123;&#125; ;\t<span class=\"comment\">// å®šä¹‰ä¸€ä¸ªç©ºçš„æ„é€ å‡½æ•°</span></div><div class=\"line\">  \tf.prototype = p ;\t<span class=\"comment\">// å°†å…¶åŸå‹å±æ€§è®¾ç½®ä¸ºp</span></div><div class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> f() ;\t<span class=\"comment\">// ä½¿ç”¨f()åˆ›å»ºä¸€ä¸ªpçš„ç»§æ‰¿å¯¹è±¡</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>inheritå‡½æ•°ä¸èƒ½å®Œå…¨æ›¿ä»£Object.cteate() ï¼Œ å®ƒä¸èƒ½ä¼ å…¥nullä¸ºåŸå‹åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸”ä¸èƒ½æ¥å—å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°</p>\n</blockquote>\n<p><strong><em>æ‰å†™äº†ä¸¤å°èŠ‚  æœªå®Œå¾…ç»­</em></strong></p>\n"},{"title":"Hello World","url":"http://www.maotingfeng.me/2016/07/25/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"external\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"external\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"external\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"external\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"external\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"external\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"external\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"external\">Deployment</a></p>\n"},{"title":"about","url":"http://www.maotingfeng.me/about/index.html","content":"<p>about:</p>\n<ul>\n<li>type: me<br>icon: icon-user<br>text_value:<ul>\n<li>â€œScutï¼Œ1991ï¼ŒSpring.â€</li>\n<li>â€œå–œæ¬¢è®¾è®¡ï¼Œå–œæ¬¢ç¼–ç¨‹ï¼Œå–œæ¬¢æµª.â€</li>\n<li>â€œå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œå¸¸ç”¨ HTML / CSS / JavaScript / nodejs / markdown.â€</li>\n</ul>\n</li>\n<li>type: Github<br>icon: icon-github<br>text_key: Github<br>text_value: â€œ@lcoderâ€<br>text_value_url: <a href=\"https://github.com/lcoder\" target=\"_blank\" rel=\"external\">https://github.com/lcoder</a></li>\n<li>type: weibo<br>icon: icon-weibo<br>text_key: å¾®åš<br>text_value: â€œ@å°å¼ºåƒå¤§è’œâ€<br>text_value_url: <a href=\"http://weibo.com/mivae\" target=\"_blank\" rel=\"external\">http://weibo.com/mivae</a></li>\n<li>type: mail<br>icon: icon-mail<br>text_key: Gmail<br>text_value: â€œmtingfeng@gmail.comâ€</li>\n<li>type: location<br>icon: icon-location<br>text_value: æ­å·</li>\n</ul>\n"},{"title":"è‡ªå®šä¹‰æ ·å¼","url":"http://www.maotingfeng.me/css/personal-style.css","content":"@charset \"UTF-8\";\n/**\n *\n * @authors supmain (mtingfeng@gmail.com)\n * @date    2016-08-02 19:42:47\n * @version $Id$\n */\n.highlight table td.gutter { display: none; counter-reset: line_num ; }\n.highlight table td.gutter .line { color: #f7f7f7; }\n.highlight table td.gutter .line::before { color: #f00;counter-increment: line_num ;content: counter(line_num) ; }"},{"title":"category","url":"http://www.maotingfeng.me/category/index.html","content":""},{"title":"tag","url":"http://www.maotingfeng.me/tag/index.html","content":""},{"title":"project","url":"http://www.maotingfeng.me/project/index.html","content":"<p>project:</p>\n<ul>\n<li>type: personal<br>name: fexo<br>url: <a href=\"https://github.com/forsigner/fexo\" target=\"_blank\" rel=\"external\">https://github.com/forsigner/fexo</a><br>intro: A minimalist design theme for hexo<h1 id=\"type-company\"><a href=\"#type-company\" class=\"headerlink\" title=\"- type: company\"></a>- type: company</h1><h1 id=\"name-Fexo\"><a href=\"#name-Fexo\" class=\"headerlink\" title=\"name: Fexo\"></a>name: Fexo</h1><h1 id=\"url-https-github-com-forsigner-fexo\"><a href=\"#url-https-github-com-forsigner-fexo\" class=\"headerlink\" title=\"url: https://github.com/forsigner/fexo\"></a>url: <a href=\"https://github.com/forsigner/fexo\" target=\"_blank\" rel=\"external\">https://github.com/forsigner/fexo</a></h1><h1 id=\"intro-A-minimalist-design-theme-for-hexo\"><a href=\"#intro-A-minimalist-design-theme-for-hexo\" class=\"headerlink\" title=\"intro: A minimalist design theme for hexo\"></a>intro: A minimalist design theme for hexo</h1></li>\n<li>type: personal<br>name: beside<br>url: <a href=\"https://github.com/forsigner/beside\" target=\"_blank\" rel=\"external\">https://github.com/forsigner/beside</a><br>intro: I need you beside me</li>\n<li>type: personal<br>name: web-fontmin<br>url: <a href=\"https://github.com/forsigner/web-fontmin\" target=\"_blank\" rel=\"external\">https://github.com/forsigner/web-fontmin</a><br>intro: å­—ä½“å­é›†åŒ–ï¼Œåœ¨çº¿æå–ä½ éœ€è¦çš„å­—ä½“</li>\n<li>type: personal<br>name: magic-check<br>url: <a href=\"https://github.com/forsigner/magic-check\" target=\"_blank\" rel=\"external\">https://github.com/forsigner/magic-check</a><br>intro: Beautify Radio and Checkbox with pure CSS</li>\n<li>type: personal<br>name: nice-bar<br>url: <a href=\"https://github.com/forsigner/nice-bar\" target=\"_blank\" rel=\"external\">https://github.com/forsigner/nice-bar</a><br>intro: A nice and lightweight scrollbar</li>\n<li>type: personal<br>name: angular-nice-bar<br>url: <a href=\"https://github.com/forsigner/angular-nice-bar\" target=\"_blank\" rel=\"external\">https://github.com/forsigner/angular-nice-bar</a><br>intro: A nice and lightweight scrollbar in Angular</li>\n</ul>\n"},{"title":"link","url":"http://www.maotingfeng.me/link/index.html","content":"<p>link:</p>\n<ul>\n<li>name: ç»‡ç½‘<br>info: èº«ä½“å’Œçµé­‚ï¼Œæ€»æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Š<br>url: <a href=\"http://zheng-ji.info/\" target=\"_blank\" rel=\"external\">http://zheng-ji.info/</a><br>avatar: <a href=\"https://avatars3.githubusercontent.com/u/1414745?v=3&amp;s=460\" target=\"_blank\" rel=\"external\">https://avatars3.githubusercontent.com/u/1414745?v=3&amp;s=460</a></li>\n<li>name: Dongyado<br>info: ç”Ÿå‘½ä¸æ­¢ï¼ŒæŠ˜è…¾ä¸æ¯<br>url: <a href=\"http://dongyado.com/\" target=\"_blank\" rel=\"external\">http://dongyado.com/</a><br>avatar: <a href=\"https://avatars0.githubusercontent.com/u/6274940?v=3&amp;s=460\" target=\"_blank\" rel=\"external\">https://avatars0.githubusercontent.com/u/6274940?v=3&amp;s=460</a></li>\n<li>name: OrangeCoder<br>info: android ffmpeg nodejs gradle<br>url: <a href=\"http://orangecoder.com/\" target=\"_blank\" rel=\"external\">http://orangecoder.com/</a><br>avatar: <a href=\"https://avatars0.githubusercontent.com/u/2263785?v=3&amp;s=460\" target=\"_blank\" rel=\"external\">https://avatars0.githubusercontent.com/u/2263785?v=3&amp;s=460</a></li>\n<li>name: EverET<br>info: å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´<br>url: <a href=\"http://everet.org/about-me/\" target=\"_blank\" rel=\"external\">http://everet.org/about-me/</a><br>avatar: <a href=\"https://avatars1.githubusercontent.com/u/1559563?v=3&amp;s=460\" target=\"_blank\" rel=\"external\">https://avatars1.githubusercontent.com/u/1559563?v=3&amp;s=460</a></li>\n</ul>\n"},{"title":"search","url":"http://www.maotingfeng.me/search/index.html","content":"<input type=\"text\" class=\"st-default-search-input\">\n\n<div class=\"st-search-container\"></div>\n\n\n<script type=\"text/javascript\">\n  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){\n  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);\n  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);\n  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');\n\n  _st('install','Hz_rCic8xUP3ozNEgD5x','2.0.0');\n</script>"}]